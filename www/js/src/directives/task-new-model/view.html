<div style="height: calc(100% - 130px) !important; padding: 10px 24px" ng-init="step = 1" class="modal-content"><div style="font-size: 14px" class="row task-steps"><div style="line-height: 5; float: left;" class="col s1"><span title="查看所有" ng-click="updateWorks()" style="cursor: pointer; color: #AAC9F4;">工作路线:</span></div><div ng-repeat="workNode in workRouter" style="width: 110px; padding: 0; float: left;"><div style="height: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 0 5px;direction: rtl; text-align: left;"><span title="{{workNode.name}}">{{workNode.name}}</span></div><div style="cursor: pointer;" ng-click="updateWorks(workNode)"><img ng-src="{{workNode.imgurl}}" title="巡检点: {{workNode.signals.join(',')}}" style="margin: 0 10px;"/></div></div></div><div ng-show="step == 1" class="row"><div style="margin: 48px 0 12px 0;" class="row task-row"><div class="title">工作内容：</div><table class="content"><tr><th>工作状态</th><th>站点名称</th><th>设备名称</th><th>作业项</th><th>作业项值</th><th>设备状态</th><th>作业项阈值</th><th>故障表象</th><th>故障原因</th><th>原因分析</th><th>损失情况</th></tr><tr ng-show="works.length == 0"> <td colspan="11">暂无数据</td></tr><tr ng-show="works.length &gt; 0" ng-repeat="(index, work) in works" ng-if="showType == 1"> <td>{{work.work_status ? '已处理' : '待处理'}}</td><td>{{work.stationName}}</td><td>{{work.equipName}}</td><td>{{work.signalName || work.eventName}}</td><td>{{subscribeSigVal[work.station + "-" + work.equipment + "-" + work.signal] || work.startValue}}</td><td>{{work.status == 0 ? '正常' : '异常'}}</td><td>{{work.setvalue}}</td><td>{{work.defect_representation}}</td><td>{{work.defect_reason}}</td><td>{{work.defect_analysis}}</td><td>{{work.loss_situation}}</td></tr><tr ng-show="works.length &gt; 0" ng-repeat="(index, work) in works" ng-if="showType == 2"> <td><md-checkbox ng-model="work.work_status"></md-checkbox></td><td>{{work.stationName}}</td><td>{{work.equipName}}</td><td>{{work.signalName || work.eventName}}</td><td><input ng-model="work.setvalue" style="height: 24px; margin: 0 5px; width: 40px;" type="number"/><span title="发布信号" ng-click="pubSig(work)"><i class="material-icons top-icon">navigation</i></span></td><td><select ng-model="work.status" ng-options="c.value as c.name for c in stateOption"></select></td><td>{{subscribeSigVal[work.station + "-" + work.equipment + "-" + work.signal] || work.startValue}}</td><td> <input ng-model="work.defect_representation" style="height: 24px; margin: 0 5px; width: 60px;"/></td><td> <input ng-model="work.defect_reason" style="height: 24px; margin: 0 5px; width: 60px;"/></td><td> <input ng-model="work.defect_analysis" style="height: 24px; margin: 0 5px; width: 60px;"/></td><td> <input ng-model="work.loss_situation" style="height: 24px; margin: 0 5px; width: 60px;"/></td></tr></table></div><div style="display: inline;" class="row task-row"><div ng-click="showAdd(1)" style="font-size: 14px;color: white;float: right" ng-if="showType == 2" class="btn">新增反馈</div></div><div class="row task-row"><div class="title">情况反馈：</div><table class="content"><tr><th>序号</th><th>内容</th><th>备注</th><th>操作</th></tr><tr ng-show="memos.length == 0"> <td colspan="4">暂无数据</td></tr><tr ng-show="memos.length &gt; 0" ng-repeat="memo in memos track by memo.id"> <td>{{memo.id}}</td><td>{{memo.content}}</td><td>{{memo.memo}}</td><td> <span ng-if="showType == 2" title="删除反馈" ng-click="removeMemos(memo)" style="cursor: pointer;"><i class="material-icons" >close</i></span></span></td></tr></table></div><div style="display: inline;" class="row task-row"><div ng-click="showAdd(2)" style="font-size: 14px;color: white;float: right" ng-if="showType == 2" class="btn">新增附件</div></div><div class="row task-row"><div class="title">现场附件：</div><div class="content2"><div ng-repeat="(i, file) in files" class="file-item"><div style="text-align: center;" class="title">{{i + 1}}.&nbsp;{{file.name}}</div><a ng-click="removeFiles(file)" title="删除该附件" ng-if="showType == 2">删除</a><a title="预览该附件" target="_black" href="{{file.url}}" ng-show="file.url != ''">预览</a></div></div></div></div><div ng-show="step == 2" class="row col s12"><task-timeline controller="vm" parameters="{ datas: task }"></task-timeline></div></div><div class="modal-footer modal-nav taskbtns"><div ng-click="acceptTask(1)" ng-show="showBtns.accept" class="taskbtn">接收</div><div ng-click="setTask(1)" ng-show="showBtns.approval" class="taskbtn">批准</div><div ng-click="setTask(2)" ng-show="showBtns.reject" class="taskbtn">拒绝</div><div ng-click="setTask(3)" ng-show="showBtns.cancel" class="taskbtn">撤销</div><div ng-click="saveTask(3)" ng-show="showBtns.save" class="taskbtn">保存</div><!--.taskbtn(ng-click="close()" style="float: right") 关闭--><div ng-click="close()" style="float: right" class="taskbtn modal-action modal-close">关闭</div></div><div id="task-detail" md-modal="md-modal" style="width: 100%; background-color: #082268cc;" class="modal modal-fixed-footer"><div class="modal-content"><div style="text-align: center; margin: 0 0 30px 0; font-size: 14px; font-weight: bold;color: #AAC9F4;" class="row">{{detailType == 1 ? '新增反馈' : '文件上传'}}</div><div ng-if="detailType == 1" style="margin: 36px 0;" class="row task-row col s12"><div class="col s2"></div><div class="col s8"><div style="float: left; width: 40px;height: 100%; line-height: 2.5; font-size: 14px; color: white;">内容:</div><input placeholder="请输入反馈内容" ng-model="addModel.content" style="padding: 0 8px; width: calc(100% - 80px); height: 32px; float: right; margin-bottom: 0px; font-size: 14px;"/></div><div class="col s2"></div></div><div ng-if="detailType == 1" style="margin: 36px 0;" class="row task-row col s12"><div class="col s2"></div><div class="col s8"><div style="float: left; width: 40px;height: 100%; line-height: 2.5; font-size: 14px; color: white;">备注:</div><input placeholder="请输入备注" ng-model="addModel.memo" style="padding: 0 8px; width: calc(100% - 80px); height: 32px; float: right; margin-bottom: 0px; font-size: 14px;"/></div><div class="col s2"></div></div><div ng-if="detailType == 2" class="row task-row col s12"><div class="col s2"></div><div style="display: flex;" class="col s8"><div style="float: left; width: 40px;height: 100%; line-height: 4; font-size: 14px; color: white;">文件:</div><div style="width: calc(100% - 40px);"><one-file-uploader controller="vm" parameters="{ handle: handle }"></one-file-uploader></div></div><div class="col s2"></div></div></div><div class="modal-footer modal-nav taskbtns"><div ng-click="saveAddModel()" style="background: #01a6ff66" class="taskbtn">确认</div><div ng-click="closeDetail()" style="float: right" class="taskbtn">关闭</div></div></div>