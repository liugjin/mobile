if("function"!=typeof define)var define=require("amdefine")(module);var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);function s(){this.constructor=t}return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};define(["./controller"],function(t){var e,i;return{PagingController:e=function(t){function e(t,i,s,r,o){var n,p,h,a,u;e.__super__.constructor.call(this,t,i,s,r,o),this.predicate="",this.reverse=!1,this.pageItems=12,h=this.$location.path(),p=null!=(a=this.$rootScope.pagings)?a[h]:void 0,this.page=this.$routeParams.page||p||1,this.pages=[],this.pageCount=0,this.itemCount=0,this.items=[],this.itemIds={},n=t.$watch("vm.pageItems",(u=this,function(t){return u.processPages(!0)})),this.addHandle(n)}return __extends(e,t),e.prototype.setItems=function(t){var e,i,s;if(t)if(t instanceof Array)for(this.items=t,i=0,s=t.length;i<s;i++)e=t[i],this.itemIds[e._id]=e;else this.itemIds[t._id]=t,this.items.push(t);else this.items=[],this.itemIds={};return this.processPages(),this.items},e.prototype.addItem=function(t){var e,i,s;if(t){if(e=this.itemIds[t._id]){for(i in t)s=t[i],e[i]=s;return e}return this.itemIds[t._id]=t,this.items.push(t),this.processPages(),t}},e.prototype.removeItem=function(t){var e;return t?(delete this.itemIds[t._id],e=this.items.indexOf(t),this.items.splice(e,1),this.processPages(),e):-1},e.prototype.removeById=function(t){var e;return e=this.itemIds[t],this.removeItem(e)},e.prototype.sortBy=function(t){return this.predicate===t?this.reverse=!this.reverse:(this.predicate=t,this.reverse=!0)},e.prototype.nextPage=function(){return this.setPage(this.page+1)},e.prototype.previousPage=function(){return this.setPage(this.page-1)},e.prototype.setPage=function(t){var e,i;return(!t||t>this.pageCount)&&(t=1),this.page=t,null==(i=this.$rootScope).pagings&&(i.pagings={}),e=this.$location.path(),this.$rootScope.pagings[e]=t,this.addLocationSearch({page:t})},e.prototype.processPages=function(t){var e,i,s,r,o;if(e=this.items.length,t||this.itemCount!==e)return this.itemCount=e,this.pageCount=Math.ceil(e/this.pageItems),0===this.pageCount?this.pages=[]:this.pages=function(){o=[];for(var t=1,e=this.pageCount;1<=e?t<=e:t>=e;1<=e?t++:t--)o.push(t);return o}.apply(this),i>this.pageCount?this.pageCount-1:void 0},e}(t.Controller)}});