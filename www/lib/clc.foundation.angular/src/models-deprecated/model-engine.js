if("function"!=typeof define)var define=require("amdefine")(module);var __hasProp={}.hasOwnProperty,__extends=function(e,t){for(var o in t)__hasProp.call(t,o)&&(e[o]=t[o]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define(["./model-engine-base","./common/projects"],function(e,t){var o,r;return{ModelEngine:o=function(e){function o(e,r,n){o.__super__.constructor.call(this,e,r,n),this.projects=new t.Projects({engine:this})}return __extends(o,e),o.prototype.loadProjects=function(e,t,o,r){return this.projects.load(e,t,o,r),this.projects},o.prototype.loadProject=function(e,t,o,r){return this.projects.load(e,t,(n=this,function(t,r){var i,c,s,p,u;if(t)return o(t);for(p=0,u=r.length;p<u;p++)if((i=(s=r[p]).model).user===e.user&&i.project===e.project)return c={user:i.user,project:i.project,name:i.name},n.storage.set("myproject",c),"function"==typeof o?o(t,s):void 0;return"function"==typeof o?o("无效项目："+e.user+"."+e.project):void 0}),r);var n},o}(e.ModelEngine)}});