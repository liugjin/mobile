if("function"!=typeof define)var define=require("amdefine")(module);var __hasProp={}.hasOwnProperty,__extends=function(e,t){for(var o in t)__hasProp.call(t,o)&&(e[o]=t[o]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};define(["../view-model","../items-model","underscore"],function(e,t,o){var s,i;return{EquipmentTemplate:s=function(e){function s(e,o){s.__super__.constructor.call(this,e,o),this.properties=new t.ItemsModel(this,{id:"equipmentproperties",keys:["user","project","type","template","property"]}),this.signals=new t.ItemsModel(this,{id:"equipmentsignals",keys:["user","project","type","template","signal"]}),this.events=new t.ItemsModel(this,{id:"equipmentevents",keys:["user","project","type","template","event"]}),this.commands=new t.ItemsModel(this,{id:"equipmentcommands",keys:["user","project","type","template","command"]})}return __extends(s,e),s.prototype.loadProperties=function(e,t,o){var s,i;return s={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadProperties(e,(i=this,function(n,r){return i.properties.load(s,e,function(e,o){var s,i,n,p,l,a,d,u;if(n=[],s={},o)for(l=0,d=o.length;l<d;l++)p=o[l],n.push(p),s[p.key]=p;if(i=0,r)for(a=0,u=r.length;a<u;a++)s[(p=r[a]).key]||n.splice(i++,0,p);return"function"==typeof t?t(e,n):void 0},o)}),o):this.properties.load(s,e,t,o)},s.prototype.loadSignals=function(e,t,o){var s,i;return s={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadSignals(e,(i=this,function(n,r){return i.signals.load(s,e,function(e,o){var s,i,n,p,l,a,d,u;if(n=[],s={},o)for(l=0,d=o.length;l<d;l++)p=o[l],n.push(p),s[p.key]=p;if(i=0,r)for(a=0,u=r.length;a<u;a++)s[(p=r[a]).key]||n.splice(i++,0,p);return"function"==typeof t?t(e,n):void 0},o)}),o):this.signals.load(s,e,t,o)},s.prototype.loadEvents=function(e,t,o){var s,i;return s={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadEvents(e,(i=this,function(n,r){return i.events.load(s,e,function(e,o){var s,i,n,p,l,a,d,u;if(n=[],s={},o)for(l=0,d=o.length;l<d;l++)p=o[l],n.push(p),s[p.key]=p;if(i=0,r)for(a=0,u=r.length;a<u;a++)s[(p=r[a]).key]||n.splice(i++,0,p);return"function"==typeof t?t(e,n):void 0},o)}),o):this.events.load(s,e,t,o)},s.prototype.loadCommands=function(e,t,o){var s,i;return s={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadCommands(e,(i=this,function(n,r){return i.commands.load(s,e,function(e,o){var s,i,n,p,l,a,d,u;if(n=[],s={},o)for(l=0,d=o.length;l<d;l++)p=o[l],n.push(p),s[p.key]=p;if(i=0,r)for(a=0,u=r.length;a<u;a++)s[(p=r[a]).key]||n.splice(i++,0,p);return"function"==typeof t?t(e,n):void 0},o)}),o):this.commands.load(s,e,t,o)},s.prototype.getModelValue=function(e){var t,o;return(t=this.model[e])||(null!=(o=this.base)?o.getModelValue(e):void 0)},s.prototype.getSampleUnits=function(e){var t,s,i,n,r,p,l;if(s={},this.model.sampleUnits)for(r=0,p=(l=this.model.sampleUnits).length;r<p;r++)s[(i=l[r]).id]=e?o.clone(i):i;if(this.base&&(n=this.base.getSampleUnits(e)))for(t in n)i=n[t],s.hasOwnProperty(t)||(s[t]=e?o.clone(i):i);return s},s.prototype.dispose=function(){return s.__super__.dispose.apply(this,arguments),this.signals.dispose(),this.events.dispose(),this.commands.dispose()},s}(e.ViewModel)}});