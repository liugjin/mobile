var __iced_k,__iced_k_noop,__hasProp={}.hasOwnProperty,__extends=function(n,e){for(var t in e)__hasProp.call(e,t)&&(n[t]=e[t]);function o(){this.constructor=n}return o.prototype=e.prototype,n.prototype=new o,n.__super__=e.prototype,n};if(__iced_k=__iced_k_noop=function(){},"function"!=typeof define)var define=require("amdefine")(module);define(["../../disposable","./racks","iced-coffee-script"],function(n,e,t){var o,r;return t.iced&&(t=t.iced),{StationRacks:o=function(n){function o(n){this.station=n,o.__super__.constructor.apply(this,arguments),this.racks=new e.Racks(this.station)}return __extends(o,n),o.prototype.loadRack=function(n,e,o){var r,s,i,a,l,u,c,f,d;f=__iced_k_noop,u=t.findDeferral(arguments),i=this.station.model,s={user:i.user,project:i.project,station:i.station,type:"rack",equipment:n},(d=this,function(n){c=new t.Deferrals(n,{parent:u,filename:"/Users/yangpu/repositories/clc.foundation.angular/src/models/business/station-racks.coffee",funcname:"StationRacks.loadRack"}),d.racks.load(s,null,c.defer({assign_fn:function(){return r=arguments[0],a=arguments[1]},lineno:29}),o),c._fulfill()})(function(n){return function(){n.rack=l=null!=a?a[0]:void 0,function(n){if(!l)return n();!function(n){c=new t.Deferrals(n,{parent:u,filename:"/Users/yangpu/repositories/clc.foundation.angular/src/models/business/station-racks.coffee",funcname:"StationRacks.loadRack"}),l.loadProperties(null,c.defer({assign_fn:function(){return r=arguments[0]},lineno:32}),o),c._fulfill()}(function(){!function(n){c=new t.Deferrals(n,{parent:u,filename:"/Users/yangpu/repositories/clc.foundation.angular/src/models/business/station-racks.coffee",funcname:"StationRacks.loadRack"}),l.loadSignals(null,c.defer({assign_fn:function(){return r=arguments[0]},lineno:33}),o),c._fulfill()}(function(){!function(n){c=new t.Deferrals(n,{parent:u,filename:"/Users/yangpu/repositories/clc.foundation.angular/src/models/business/station-racks.coffee",funcname:"StationRacks.loadRack"}),l.loadServers(null,c.defer({assign_fn:function(){return r=arguments[0]},lineno:34}),o),c._fulfill()}(function(){!function(n){c=new t.Deferrals(n,{parent:u,filename:"/Users/yangpu/repositories/clc.foundation.angular/src/models/business/station-racks.coffee",funcname:"StationRacks.loadRack"}),l.loadPdus(null,c.defer({assign_fn:function(){return r=arguments[0]},lineno:35}),o),c._fulfill()}(n)})})})}(function(){return"function"==typeof e?e(r,l):void 0})}}(this))},o.prototype.loadRacks=function(n,e,t){var o,r,s;return o={user:(r=this.station.model).user,project:r.project,station:r.station,type:"rack"},n&&(o.equipment=n),this.racks.load(o,null,(s=this,function(n,o){var r,i,a;if(o){for(i=0,a=o.length;i<a;i++)(r=o[i]).loadProperties(null,null,t),r.loadSignals(null,null,t),r.loadServers(null,null,t),r.loadPdus(null,null,t);s.rack=o[0]}return"function"==typeof e?e(n,o):void 0}),t)},o.prototype.dispose=function(n){return o.__super__.dispose.call(this,n),this.racks.dispose(n)},o.prototype.updateModel=function(n){var e,t,o,r,s;if("rack"===n.type)return null!=(e=this.racks.getItemByIds(n))?e.updateModel(n):void 0;if("server"===n.type)for(o=0,r=(s=this.racks.items).length;o<r;o++)if(t=(e=s[o]).updateModel(n))return t},o}(n.Disposable)}});