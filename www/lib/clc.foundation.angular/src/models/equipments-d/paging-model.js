if("function"!=typeof define)var define=require("amdefine")(module);var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};define(["../../disposable"],function(t){var e,i;return{PagingModel:e=function(t){function e(t){var i,r,s;this.options=null!=t?t:{},e.__super__.constructor.apply(this,arguments),this.predicate=null!=(i=this.options.predicate)?i:"",this.reverse=null!=(r=this.options.reverse)&&r,this.pageItems=null!=(s=this.options.pageItems)?s:10,this.page=1,this.pages=[],this.pageCount=0,this.itemCount=0,this.items=[]}return __extends(e,t),e.prototype.setItems=function(t){var e,i,r,s,n,o;if(i=[],t)if(t instanceof Array)for(n=0,o=t.length;n<o;n++)s=t[n],i.push(s);else for(r in t)e=t[r],i.push(e);else;return this.items=i,this.processPages(),this.items},e.prototype.addItem=function(t){var e,i,r,s,n,o;if(t){for(s=0,n=(o=this.items).length;s<n;s++)if((e=o[s])._id===t._id){for(i in t)r=t[i],e[i]=r;return e}return this.items.push(t),this.processPages(),t}},e.prototype.removeItem=function(t){var e;if(t)return e=this.items.indexOf(t),this.items.splice(e,1),this.processPages(),e},e.prototype.removeById=function(t){var e,i,r,s,n;for(e=r=0,s=(n=this.items).length;r<s;e=++r)if((i=n[e])._id===t)return this.items.splice(e,1),this.processPages(),e;return-1},e.prototype.sortBy=function(t){return this.predicate===t?this.reverse=!this.reverse:(this.predicate=t,this.reverse=!0)},e.prototype.nextPage=function(){if(this.page<this.pageCount)return this.page++},e.prototype.previousPage=function(){if(this.page>1)return this.page--},e.prototype.setPage=function(t){return(!t||t>this.pageCount)&&(t=1),this.page=t},e.prototype.processPages=function(t){var e,i,r,s,n;if(e=this.items.length,t||this.itemCount!==e)return this.itemCount=e,this.pageCount=Math.ceil(e/this.pageItems),0===this.pageCount?this.pages=[]:this.pages=function(){n=[];for(var t=1,e=this.pageCount;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(t);return n}.apply(this),i>this.pageCount?this.pageCount-1:void 0},e.prototype.filter=function(t,e,i){return null==e&&(e=["name"]),null==i&&(i=!0),r=this,function(s){var n,o,p;if(!t)return!0;for(o=0,p=e.length;o<p;o++)if(n=e[o],r.filterItemField(t,s,n,i))return!0;return!1};var r},e.prototype.filterItemField=function(t,e,i,r){var s,n,o;if(!(s=null!=(n=e[i])?n:null!=(o=e.model)?o[i]:void 0))return!1;if(r){if(t=t.toLowerCase(),s.toLowerCase().indexOf(t)>=0)return!0}else if(s.indexOf(t)>=0)return!0;return!1},e}(t.Disposable)}});