if("function"!=typeof define)var define=require("amdefine")(module);var __bind=function(e,t){return function(){return e.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(e,t){for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);function o(){this.constructor=e}return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};define(["../items-model","./equipment-type"],function(e,t){var r,o;return{EquipmentTypes:r=function(e){function r(e,t){var o,i;this.buildCategoryTree=__bind(this.buildCategoryTree,this),r.__super__.constructor.call(this,e,t),null==(o=this.options).id&&(o.id="equipmenttypes"),null==(i=this.options).keys&&(i.keys=["user","project","type"])}return __extends(r,e),r.prototype.createItem=function(e){var r;return new t.EquipmentType(this,e)},r.prototype.addItems=function(e){var t;return t=r.__super__.addItems.call(this,e),this.buildCategoryTree(t),t},r.prototype.buildCategoryTree=function(e,t){var r,o,i,n,s;if(t)for(t.categories=[],o=0,n=e.length;o<n;o++)(r=e[o]).model.base===t.model.type&&(t.categories.push(r),this.buildCategoryTree(e,r));else for(this.categories=[],i=0,s=e.length;i<s;i++)(r=e[i]).model.base||(this.categories.push(r),this.buildCategoryTree(e,r));return this.categories},r}(e.ItemsModel)}});