if("function"!=typeof define)var define=require("amdefine")(module);var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var o in e)__hasProp.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};define(["./service"],function(t){var e,o;return{UploadService:e=function(t){function e(t,o,r){this.$http=o,this.formDataObject=r,e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.upload=function(t,e,o,r,n){var i,u,a,p,c,f,s,l,d;return(i=new FormData).append("file",t),a=null!=(c=null!=(f=null!=(s=this.$rootScope.toProject)?s:this.$rootScope.myproject)?f:this.$rootScope.project)?c:{},p=null!=(l=this.$rootScope.user)?l:{},u={user:a.user,project:a.project,author:p.user,token:p.token},e&&(u.filename=e),this.$http({method:"POST",url:o,headers:{"Content-Type":void 0},data:i,transformRequest:angular.identity,params:u,uploadEventHandlers:{progress:function(t){var e;if(t.lengthComputable)return e=t.loaded/t.total,"function"==typeof n?n(e):void 0}}}).then((d=this,function(t){return(i=t.data)?"function"==typeof r?r(i.err,i):void 0:"function"==typeof r?r("null data"):void 0})).catch(function(t){return function(t){return(i=t.data)?"function"==typeof r?r(i.err,i):void 0:"function"==typeof r?r("null data"):void 0}}(this))},e}(t.Service)}});