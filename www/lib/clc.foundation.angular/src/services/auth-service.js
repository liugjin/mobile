if("function"!=typeof define)var define=require("amdefine")(module);var __hasProp={}.hasOwnProperty,__extends=function(t,e){for(var o in e)__hasProp.call(e,o)&&(t[o]=e[o]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define(["./service","tripledes"],function(t,e){var o,n;return{AuthService:o=function(t){function o(t,e,n,r,i){this.$location=e,this.$cookieStore=n,this.storage=r,this.httpService=i,o.__super__.constructor.call(this,t),this.tokenCookie="clc-token-info"}return __extends(o,t),o.prototype.authenticate=function(t,e){var o,n;return n=this,o=function(t,o){return n.$rootScope.user=o,"function"==typeof e?e(t,o):void 0},this.httpService.post(this.setting.urls.authenticate,{token:t},o,o)},o.prototype.getTokenCookie=function(t){var o,n;return null==t&&(t=!0),o=this.storage.get(this.tokenCookie),t&&o&&o.token&&(n=e.DES.decrypt(o.token,o.username),o.token=e.enc.Utf8.stringify(n)),o},o.prototype.setTokenCookie=function(t,o){return null==o&&(o=!0),o&&t&&t.token&&(t.token=e.DES.encrypt(t.token,t.username).toString()),this.storage.set(this.tokenCookie,t)},o.prototype.logout=function(t){return this.$rootScope.user=null,this.setTokenCookie({}),"function"==typeof t?t(null):void 0},o}(t.Service)}});