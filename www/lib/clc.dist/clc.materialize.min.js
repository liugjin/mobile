define("clc.foundation.angular/disposable",[],function(){var t,e;return e=0,t=function(){function t(){this.handlers={},this.index=0,this.initialize()}return t.prototype.initialize=function(t){return"function"==typeof t?t():void 0},t.prototype.addHandler=function(t){return this.addHandle(t)},t.prototype.addHandle=function(t){var n,r;return this.index++,r=e++,n={key:r,target:t,dispose:function(e){return function(n){if("function"==typeof t?t():"function"==typeof t.dispose&&t.dispose(),!n)return delete e.handlers[r]}}(this)},this.handlers[r]=n,n},t.prototype.removeHandler=function(t){var e;return e=this.handler[t],null!=e&&e.dispose(),e},t.prototype.dispose=function(){var t,e,n;n=this.handlers;for(e in n)t=n[e],t.dispose(!0);return this.handlers={},this.disposed=!0},t.prototype.getGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})},t.prototype.setInterval=function(t,e){var n;return n=setInterval(t,e),this.addHandle(function(){return clearInterval(n)})},t.prototype.setTimeout=function(t,e){var n;return n=setTimeout(t,e),this.addHandle(function(){return clearTimeout(n)})},t.prototype.addEventListener=function(t,e,n,r){return null==n&&(n=document),n.addEventListener(t,e,r),this.addHandle(function(){return n.removeEventListener(t,e)})},t.prototype.log=function(t){return"object"==typeof t?console.log(t):console.log((new Date).toISOString()+" "+t)},t}(),{Disposable:t}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/service",["../disposable"],function(t){var e;return e=function(t){function e(t){this.$rootScope=t,e.__super__.constructor.apply(this,arguments),this.setting=window.setting}return __extends(e,t),e.prototype.appendToken=function(t){var e;return(null!=(e=this.$rootScope.user)?e.token:void 0)&&(null==t&&(t={}),t.token=this.$rootScope.user.token),t},e.prototype.display=function(t,e,n){var r,o;if(r=this.setting.toastTime||n||5e3,o=this.formatErrorInfo(t,e))return M.toast({html:o,displayLength:r})},e.prototype.formatErrorInfo=function(t,e){var n;return t?(n="object"==typeof t?JSON.stringify(t):t,console.log(n)):n=e,n},e}(t.Disposable),{Service:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/http-service",["./service"],function(t){var e;return e=function(t){function e(t,n){this.$http=n,e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.onComplete=function(t,e){var n,r,o;return n=t.data,(null!=n?n._err:void 0)&&(r=null!=(o=n._err.message)?o:n._err),r||200===t.status||(r=t.status),this.$rootScope.loading=!1,"function"==typeof e?e(r,n,null!=n?n._paging:void 0):void 0},e.prototype.post=function(t,e,n){return t?(this.$rootScope.loading=!0,e=this.appendToken(e),this.$http.post(t,e).then(function(t){return function(e){return t.onComplete(e,n)}}(this)).catch(function(t){return function(e){return t.onComplete(e,n)}}(this))):"function"==typeof n?n("null post url"):void 0},e.prototype.delete=function(t,e,n){return t?(this.$rootScope.loading=!0,e=this.appendToken(e),this.$http.delete(t,{params:e}).then(function(t){return function(e){return t.onComplete(e,n)}}(this)).catch(function(t){return function(e){return t.onComplete(e,n)}}(this))):"function"==typeof n?n("null delete url"):void 0},e.prototype.get=function(t,e,n){return t?(this.$rootScope.loading=!0,e=this.appendToken(e),this.$http.get(t,{params:e}).then(function(t){return function(e){return t.onComplete(e,n)}}(this)).catch(function(t){return function(e){return t.onComplete(e,n)}}(this))):"function"==typeof n?n("null get url"):void 0},e.prototype.onComplete2=function(t,e){var n;return this.$rootScope.loading=!1,n=t.status,"function"==typeof e?e(n,t.data):void 0},e.prototype.post2=function(t,e,n){return t?(this.$rootScope.loading=!0,e=this.appendToken(e),this.$http.post(t,e).then(function(t){return function(e){return t.complete2(e,n)}}(this)).catch(function(t){return function(e){return t.complete2(e,n)}}(this))):"function"==typeof n?n("null post url"):void 0},e.prototype.delete2=function(t,e,n){return t?(this.$rootScope.loading=!0,e=this.appendToken(e),this.$http.delete(t,e).then(function(t){return function(e){return t.complete2(e,n)}}(this)).catch(function(t){return function(e){return t.complete2(e,n)}}(this))):"function"==typeof n?n("null delete url"):void 0},e.prototype.get2=function(t,e,n){return t?(this.$rootScope.loading=!0,e=this.appendToken(e),this.$http.get(t,{params:e}).then(function(t){return function(e){return t.complete2(e,n)}}(this)).catch(function(t){return function(e){return t.complete2(e,n)}}(this))):"function"==typeof n?n("null get url"):void 0},e}(t.Service),{HttpService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/resource-model-service",["./service"],function(t){var e;return e=function(t){function e(t,n){this.$resource=t,e.__super__.constructor.apply(this,arguments),this.bind(n)}return __extends(e,t),e.prototype.bind=function(t){var e,n,r,o;if(t)return this.options=t,this.keys={},this.model={loaded:!1,current:null,err:null,items:[]},n=null!=(r=t.params)?r:{id:"@_id"},e=null!=(o=t.actions)?o:{},e.update={method:"PUT"},e.remove={method:"DELETE"},e.query={method:"GET",isArray:!0,transformResponse:function(t){var e;return e=angular.fromJson(t),angular.isArray(e)?e:[e]}},this.Resource=this.$resource(t.url,n,e)},e.prototype.select=function(t){if(this.model.current!==t)return this.model.current=angular.copy(t)},e.prototype.selectByKey=function(t){var e;return e=this.keys[t],this.select(e),e},e.prototype.load=function(t,e){var n;return!e&&this.model.loaded?"function"==typeof t&&t(null,this.model.items):this.model.items=n=this.Resource.query(function(e){return function(r){var o,i,s,u,a,c;if(e.model.err=o=r._err,!o){for(e.keys={},s=null!=(c=e.options.key)?c:"_id",u=0,a=n.length;u<a;u++)i=n[u],e.keys[i[s]]=i;e.options.current&&e.selectByKey(e.options.current),e.model.loaded=!0}return"function"==typeof t?t(o,r):void 0}}(this),function(e){return function(n){var r;return r=n.data,e.model.err=r,"function"==typeof t?t(r):void 0}}(this)),this.model},e.prototype.get=function(t,e){var n;return this.keys.hasOwnProperty(t)?(n=this.keys[t],"function"==typeof e&&e(null,n),n):n=this.Resource.$get(filter,function(t){return function(r){var o,i,s;return t.model.err=o=r._err,o||(i=null!=(s=t.options.key)?s:"_id",t.keys[n[i]]=n,t.model.items.push(n),t.select(n)),"function"==typeof e?e(o,r):void 0}}(this),function(t){return function(n){var r;return r=n.data,t.model.err=r,"function"==typeof e?e(r):void 0}}(this))},e.prototype.create=function(t,e){var n;return n=new this.Resource(t),n.$save(function(t){return function(r){var o,i,s;return t.model.err=o=r._err,o||(i=null!=(s=t.options.key)?s:"_id",t.keys[n[i]]=n,t.model.items.push(n),t.select(n)),"function"==typeof e?e(o,r):void 0}}(this),function(t){return function(n){var r;return r=n.data,t.model.err=r,"function"==typeof e?e(r):void 0}}(this))},e.prototype.update=function(t,e){return t.$update(function(n){return function(r){var o,i,s,u;return n.model.err=o=r._err,o||(s=null!=(u=n.options.key)?u:"_id",i=n.keys[t[s]],angular.copy(t,i)),"function"==typeof e?e(o,r):void 0}}(this),function(t){return function(n){var r;return r=n.data,t.model.err=r,"function"==typeof e?e(r):void 0}}(this))},e.prototype.remove=function(t,e){return t.$remove(function(n){return function(r){var o,i,s,u,a,c,l;if(n.model.err=o=r._err,i=t._id,!o)for(delete n.keys[i],a=n.model.items,s=c=0,l=a.length;c<l;s=++c)if(t=a[s],t._id===i){u=s===a.length-1?a[0]:a[s+1],a.splice(s,1),n.select(u);break}return"function"==typeof e?e(o,r):void 0}}(this),function(t){return function(n){var r;return r=n.data,t.model.err=r,"function"==typeof e?e(r):void 0}}(this))},e}(t.Service),{ResourceModelService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/upload-service",["./service"],function(t){var e;return e=function(t){function e(t,n,r){this.$http=n,this.formDataObject=r,e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.upload=function(t,e,n,r,o){var i,s,u,a,c,l,h,p;return i=new FormData,i.append("file",t),u=null!=(c=null!=(l=null!=(h=this.$rootScope.toProject)?h:this.$rootScope.myproject)?l:this.$rootScope.project)?c:{},a=null!=(p=this.$rootScope.user)?p:{},s={user:u.user,project:u.project,author:a.user,token:a.token},e&&(s.filename=e),this.$http({method:"POST",url:n,headers:{"Content-Type":void 0},data:i,transformRequest:angular.identity,params:s,uploadEventHandlers:{progress:function(t){var e;if(t.lengthComputable)return e=t.loaded/t.total,"function"==typeof o?o(e):void 0}}}).then(function(t){return function(t){return i=t.data,i?"function"==typeof r?r(i.err,i):void 0:"function"==typeof r?r("null data"):void 0}}()).catch(function(t){return function(t){return i=t.data,i?"function"==typeof r?r(i.err,i):void 0:"function"==typeof r?r("null data"):void 0}}())},e}(t.Service),{UploadService:e}}),function(t){define("tripledes",[],function(){return function(){var e=e||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;o<t;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<t;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),u=n.enc={},a=u.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var o=e[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},c=u.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},l=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,u=o/(4*i),u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);if(e=u*i,o=t.min(4*e,o),e){for(var a=0;a<e;a+=i)this._doProcessBlock(r,a);a=r.splice(0,e),n.sigBytes-=o}return new s.init(a,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);return function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;o<n;o+=3)for(var i=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;4>s&&o+.75*s<n;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map,o=r.charAt(64);o&&-1!=(o=t.indexOf(o))&&(e=o);for(var o=[],i=0,s=0;s<e;s++)if(s%4){var u=r.indexOf(t.charAt(s-1))<<s%4*2,a=r.indexOf(t.charAt(s))>>>6-s%4*2;o[i>>>2]|=(u|a)<<24-i%4*8,i++}return n.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function n(t,e,n,r,o,i,s){return((t=t+(e&n|~e&r)+o+s)<<i|t>>>32-i)+e}function r(t,e,n,r,o,i,s){return((t=t+(e&r|n&~r)+o+s)<<i|t>>>32-i)+e}function o(t,e,n,r,o,i,s){return((t=t+(e^n^r)+o+s)<<i|t>>>32-i)+e}function i(t,e,n,r,o,i,s){return((t=t+(n^(e|~r))+o+s)<<i|t>>>32-i)+e}for(var s=e,u=s.lib,a=u.WordArray,c=u.Hasher,u=s.algo,l=[],h=0;64>h;h++)l[h]=4294967296*t.abs(t.sin(h+1))|0;u=u.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;16>s;s++){var u=e+s,a=t[u];t[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,u=t[e+0],a=t[e+1],c=t[e+2],h=t[e+3],p=t[e+4],f=t[e+5],d=t[e+6],m=t[e+7],v=t[e+8],y=t[e+9],_=t[e+10],g=t[e+11],b=t[e+12],w=t[e+13],x=t[e+14],C=t[e+15],S=s[0],E=s[1],k=s[2],D=s[3],S=n(S,E,k,D,u,7,l[0]),D=n(D,S,E,k,a,12,l[1]),k=n(k,D,S,E,c,17,l[2]),E=n(E,k,D,S,h,22,l[3]),S=n(S,E,k,D,p,7,l[4]),D=n(D,S,E,k,f,12,l[5]),k=n(k,D,S,E,d,17,l[6]),E=n(E,k,D,S,m,22,l[7]),S=n(S,E,k,D,v,7,l[8]),D=n(D,S,E,k,y,12,l[9]),k=n(k,D,S,E,_,17,l[10]),E=n(E,k,D,S,g,22,l[11]),S=n(S,E,k,D,b,7,l[12]),D=n(D,S,E,k,w,12,l[13]),k=n(k,D,S,E,x,17,l[14]),E=n(E,k,D,S,C,22,l[15]),S=r(S,E,k,D,a,5,l[16]),D=r(D,S,E,k,d,9,l[17]),k=r(k,D,S,E,g,14,l[18]),E=r(E,k,D,S,u,20,l[19]),S=r(S,E,k,D,f,5,l[20]),D=r(D,S,E,k,_,9,l[21]),k=r(k,D,S,E,C,14,l[22]),E=r(E,k,D,S,p,20,l[23]),S=r(S,E,k,D,y,5,l[24]),D=r(D,S,E,k,x,9,l[25]),k=r(k,D,S,E,h,14,l[26]),E=r(E,k,D,S,v,20,l[27]),S=r(S,E,k,D,w,5,l[28]),D=r(D,S,E,k,c,9,l[29]),k=r(k,D,S,E,m,14,l[30]),E=r(E,k,D,S,b,20,l[31]),S=o(S,E,k,D,f,4,l[32]),D=o(D,S,E,k,v,11,l[33]),k=o(k,D,S,E,g,16,l[34]),E=o(E,k,D,S,x,23,l[35]),S=o(S,E,k,D,a,4,l[36]),D=o(D,S,E,k,p,11,l[37]),k=o(k,D,S,E,m,16,l[38]),E=o(E,k,D,S,_,23,l[39]),S=o(S,E,k,D,w,4,l[40]),D=o(D,S,E,k,u,11,l[41]),k=o(k,D,S,E,h,16,l[42]),E=o(E,k,D,S,d,23,l[43]),S=o(S,E,k,D,y,4,l[44]),D=o(D,S,E,k,b,11,l[45]),k=o(k,D,S,E,C,16,l[46]),E=o(E,k,D,S,c,23,l[47]),S=i(S,E,k,D,u,6,l[48]),D=i(D,S,E,k,m,10,l[49]),k=i(k,D,S,E,x,15,l[50]),E=i(E,k,D,S,f,21,l[51]),S=i(S,E,k,D,b,6,l[52]),D=i(D,S,E,k,h,10,l[53]),k=i(k,D,S,E,_,15,l[54]),E=i(E,k,D,S,a,21,l[55]),S=i(S,E,k,D,v,6,l[56]),D=i(D,S,E,k,C,10,l[57]),k=i(k,D,S,E,d,15,l[58]),E=i(E,k,D,S,w,21,l[59]),S=i(S,E,k,D,p,6,l[60]),D=i(D,S,E,k,g,10,l[61]),k=i(k,D,S,E,c,15,l[62]),E=i(E,k,D,S,y,21,l[63]);s[0]=s[0]+S|0,s[1]=s[1]+E|0,s[2]=s[2]+k|0,s[3]=s[3]+D|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296);for(n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)o=n[r],n[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=c._createHelper(u),s.HmacMD5=c._createHmacHelper(u)}(Math),function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,n=t.algo,i=n.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),s=i.words,u=n.keySize,n=n.iterations;s.length<u;){a&&r.update(a);var a=r.update(t).finalize(e);r.reset();for(var c=1;c<n;c++)a=r.finalize(a),r.reset();i.concat(a)}return i.sigBytes=4*u,i}});t.EvpKDF=function(t,e,n){return i.create(n).compute(t,e)}}(),e.lib.Cipher||function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,s=r.BufferedBlockAlgorithm,u=n.enc.Base64,a=n.algo.EvpKDF,c=r.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?m:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?m:d).decrypt(t,e,n,r)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=n.mode={},h=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=r[o]},p=(r.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();p.Encryptor=p.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;h.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),p.Decryptor=p.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,o=t.slice(e,e+r);n.decryptBlock(t,e),h.call(this,t,e,r),this._prevBlock=o}}),l=l.CBC=p,p=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,n=n-t.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:l,padding:p}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var f=r.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),l=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(u)},parse:function(t){t=u.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return f.create({ciphertext:t,salt:n})}},d=r.SerializableCipher=o.extend({cfg:o.extend({format:l}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r);return e=o.finalize(e),o=o.cfg,f.create({ciphertext:e,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),n=(n.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=i.random(8)),t=a.create({keySize:e+n}).compute(t,r),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,f.create({key:t,iv:n,salt:r})}},m=r.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:n}),encrypt:function(t,e,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=d.encrypt.call(this,t,e,n.key,r),t.mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function n(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var r=e,o=r.lib,i=o.WordArray,o=o.BlockCipher,s=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=o.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=u[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){for(var o=t[r]=[],i=c[r],n=0;24>n;n++)o[n/6|0]|=e[(a[n]-1+i)%28]<<31-n%6,o[4+(n/6|0)]|=e[28+(a[n+24]-1+i)%28]<<31-n%6;for(o[0]=o[0]<<1|o[0]>>>31,n=1;7>n;n++)o[n]>>>=4*(n-1)+3;o[7]=o[7]<<5|o[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(e,r,o){this._lBlock=e[r],this._rBlock=e[r+1],t.call(this,4,252645135),t.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),t.call(this,1,1431655765);for(var i=0;16>i;i++){for(var s=o[i],u=this._lBlock,a=this._rBlock,c=0,p=0;8>p;p++)c|=l[p][((a^s[p])&h[p])>>>0];this._lBlock=a,this._rBlock=u^c}o=this._lBlock,this._lBlock=this._rBlock,this._rBlock=o,t.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[r]=this._lBlock,e[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=o._createHelper(p),s=s.TripleDES=o.extend({_doReset:function(){var t=this._key.words;this._des1=p.createEncryptor(i.create(t.slice(0,2))),this._des2=p.createEncryptor(i.create(t.slice(2,4))),this._des3=p.createEncryptor(i.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=o._createHelper(s)}(),t.CryptoJS=e}.apply(t,arguments)})}(this);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/auth-service",["./service","tripledes"],function(t,e){var n;return n=function(t){function n(t,e,r,o,i){this.$location=e,this.$cookieStore=r,this.storage=o,this.httpService=i,n.__super__.constructor.call(this,t),this.tokenCookie="clc-token-info"}return __extends(n,t),n.prototype.authenticate=function(t,e){var n;return n=function(t){return function(n,r){return t.$rootScope.user=r,"function"==typeof e?e(n,r):void 0}}(this),this.httpService.post(this.setting.urls.authenticate,{token:t},n,n)},n.prototype.getTokenCookie=function(t){var n,r;return null==t&&(t=!0),n=this.storage.get(this.tokenCookie),t&&n&&n.token&&(r=e.DES.decrypt(n.token,n.username),n.token=e.enc.Utf8.stringify(r)),n},n.prototype.setTokenCookie=function(t,n){return null==n&&(n=!0),n&&t&&t.token&&(t.token=e.DES.encrypt(t.token,t.username).toString()),this.storage.set(this.tokenCookie,t)},
n.prototype.logout=function(t){return this.$rootScope.user=null,this.setTokenCookie({}),"function"==typeof t?t(null):void 0},n}(t.Service),{AuthService:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/model-service",["./service"],function(t){var e;return e=function(t){function e(t,n,r){this.$http=n,this.options=r,e.__super__.constructor.call(this,t),this.items={},this.itemsByUrl={},this.keys=[]}var n;return __extends(e,t),n="url of ModelService is null",e.prototype.bind=function(t){return this.url=t,this.parseParams()},e.prototype.parseParams=function(){var t,e;return this.url?(e=this.url.match(/\/:([^\/\s]*)/g),e&&(this.keys=function(){var n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(t.substr(2));return o}()),this.keys.length&&(this.lastKey=this.keys[this.keys.length-1]),this.keys):void console.log(n)},e.prototype.replaceUrlParam=function(t,e,n){var r;return r=t.replace(/\/:([^\/\s]*)/g,function(t,r){var o;return o=e[r],n||delete e[r],null!=o?"/"+o:"/+"}),"+"===r[r.length-1]&&(r=r.substr(0,r.length-2)),r},e.prototype.getUrl=function(t,e){if(this.url)return this.replaceUrlParam(this.url,t,e)},e.prototype.onSuccess=function(t,e){var n,r,o;return this.afterAction(),n=t.data,(null!=n?n._err:void 0)?(r=null!=(o=n._err.message)?o:n._err,"function"==typeof e?e(r):void 0):"function"==typeof e?e(null,n):void 0},e.prototype.onError=function(t,e){var n,r,o,i,s;return this.afterAction(),n=t.data,r=(null!=n?n._err:void 0)?null!=(o=n._err.message)?o:n._err:null!=(i=null!=(s=t.message)?s:t.status)?i:"unknown error","function"==typeof e?e(r):void 0},e.prototype.beforeAction=function(){return this.$rootScope.loading=!0},e.prototype.afterAction=function(){return this.$rootScope.loading=!1},e.prototype.addItem=function(t,e){var n,r,o;if(t)return r=null!=(o=t._id)?o:e,n=this.items[r]||{},angular.extend(n,t),this.items[r]=n},e.prototype.create=function(t,e){var r;return t?(this.beforeAction(),(r=this.getUrl(t))?(t=this.appendToken(t),this.$http.post(r,t).then(function(t){return function(n){return t.onSuccess(n,function(n,r){var o;return o=t.addItem(r),"function"==typeof e?e(n,o):void 0})}}(this)).catch(function(t){return function(n){return t.onError(n,e)}}(this))):"function"==typeof e?e(n):void 0):"function"==typeof e?e("不能创建空项"):void 0},e.prototype.update=function(t,e){var r;return t?(this.beforeAction(),t=this.appendToken(t),r=this.getUrl(t),r?this.$http.put(r,t).then(function(t){return function(n){return t.onSuccess(n,function(n,r){var o;return o=t.addItem(r),"function"==typeof e?e(n,o):void 0})}}(this)).catch(function(t){return function(n){return t.onError(n,e)}}(this)):"function"==typeof e?e(n):void 0):"function"==typeof e?e("不能更新空项"):void 0},e.prototype.save=function(t,e){return t._removed?this.remove(t,e):t._id?this.update(t,e):this.create(t,e)},e.prototype.remove=function(t,e){var r,o;return t?(this.beforeAction(),(o=this.getUrl(t,!0))?(r=this.appendToken(null),this.$http.delete(o,{params:r}).then(function(n){return function(r){return n.onSuccess(r,function(r,o){return!r&&o&&n.removeItem,"function"==typeof e?e(r,null!=o?o:t):void 0})}}(this)).catch(function(t){return function(n){return t.onError(n,e)}}(this))):"function"==typeof e?e(n):void 0):"function"==typeof e?e("不能删除空项"):void 0},e.prototype.removeItem=function(t){var e,n,r,o,i,s,u,a;for(o=t._id,delete this.items[o],u=this.itemsByUrl,a=[],r=i=0,s=u.length;i<s;r=++i)u[r],a.push(function(){var t,i,s;for(s=[],e=t=0,i=r.length;t<i;e=++t){if(n=r[e],n._id===o){r.slice(e,1);break}s.push(void 0)}return s}());return a},e.prototype.get=function(t,e,r){var o,i,s;return i=JSON.stringify(t),t=this.clone(t),(s=this.getUrl(t))?!r&&(o=this.itemsByUrl[i])?"function"==typeof e?e(null,o):void 0:(this.beforeAction(),t=this.appendToken(t),this.$http.get(s,{params:t}).then(function(t){return function(n){return t.onSuccess(n,function(n,r){var o;return o=t.addItem(r,i),t.itemsByUrl[i]=o,"function"==typeof e?e(n,o):void 0})}}(this)).catch(function(t){return function(n){return t.onError(n,e)}}(this))):"function"==typeof e?e(n):void 0},e.prototype.hasProperties=function(t){var e;if(!t)return!1;for(e in t)return t[e],!0;return!1},e.prototype.clone=function(t){var e,n,r;if(!t)return t;e={};for(n in t)r=t[n],e[n]=r;return e},e.prototype.query=function(t,e,r,o){var i,s,u,a;return s=JSON.stringify(t)+"&"+e,t=this.clone(t),(a=this.getUrl(t))?!o&&(i=this.itemsByUrl[s])?"function"==typeof r?r(null,i):void 0:(this.beforeAction(),u={},this.hasProperties(t)&&(u.filter=t),e&&(u.fields=e),u=this.appendToken(u),this.$http.get(a,{params:u}).then(function(t){return function(e){return t.onSuccess(e,function(e,n){var o,i;return o=angular.isArray(n)?function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)i=n[t],r.push(this.addItem(i,s));return r}.call(t):t.addItem(n,s),t.itemsByUrl[s]=o,"function"==typeof r?r(e,o):void 0})}}(this)).catch(function(t){return function(e){return t.onError(e,r)}}(this))):"function"==typeof r?r(n):void 0},e.prototype.postData=function(t,e,n){return this.beforeAction(),e=this.appendToken(e),this.$http.post(t,e).then(function(t){return function(e){return t.onSuccess(e,n)}}(this)).catch(function(t){return function(e){return t.onError(e,n)}}(this))},e.prototype.getData=function(t,e,n,r){return this.beforeAction(),e=this.appendToken(e),this.$http.get(t,{params:e}).then(function(t){return function(e){return t.onSuccess(e,n)}}(this)).catch(function(t){return function(e){return t.onError(e,n)}}(this))},e.prototype.getStream=function(t,e){var n;return this.beforeAction(),n=this.getUrl(t),t.params=this.appendToken(),this.$http.get(n,t).then(function(t){return function(n){return t.afterAction(),"function"==typeof e?e(n):void 0}}(this)).catch(function(t){return function(n){return t.afterAction(),"function"==typeof e?e(n):void 0}}(this))},e}(t.Service),{ModelService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/model-manager",["./service","./model-service"],function(t,e){var n;return n=function(t){function n(t,e,r){this.$http=e,this.options=r,n.__super__.constructor.call(this,t),this.services={}}return __extends(n,t),n.prototype.getService=function(t,e){var n;return n=this.services[t],n||(n=this.addService(t,e)),n},n.prototype.addService=function(t,n){var r,o,i;return o=null!=(i=this.options.urls[t])?i:n,o||console.log((new Date).toISOString()+" model service "+t+" url is unknown!"),r=new e.ModelService(this.$rootScope,this.$http),r.bind(o),this.services[t]=r,r},n}(t.Service),{ModelManager:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/paging-model",["../disposable"],function(t){var e;return e=function(t){function e(t){var n,r,o;this.options=null!=t?t:{},e.__super__.constructor.apply(this,arguments),this.predicate=null!=(n=this.options.predicate)?n:"",this.reverse=null!=(r=this.options.reverse)&&r,this.pageItems=null!=(o=this.options.pageItems)?o:12,this.page=1,this.pages=[],this.pageCount=0,this.itemCount=0,this.items=[]}return __extends(e,t),e.prototype.predicateItem=function(t){return!0},e.prototype.setItems=function(t,e){var n,r,o,i,s,u;if(r=[],t)if(t instanceof Array)for(s=0,u=t.length;s<u;s++)i=t[s],this.predicateItem(n)&&r.push(i);else for(o in t)n=t[o],this.predicateItem(n)&&r.push(n);else;return this.items=r,e?this.setPaging(e):this.processPages(),this.items},e.prototype.setPaging=function(t){var e;return this.paging=t,null!=t.page&&(this.page=t.page),null!=t.pageItems&&(this.pageItems=t.pageItems),null!=t.count&&(this.itemCount=t.count),null!=t.pageCount&&(this.pageCount=t.pageCount),0===this.pageCount?this.pages=[]:this.pages=function(){e=[];for(var t=1,n=this.pageCount;1<=n?t<=n:t>=n;1<=n?t++:t--)e.push(t);return e}.apply(this)},e.prototype.addItem=function(t){var e,n,r,o,i,s;if(t){if(t._id)for(s=this.items,o=0,i=s.length;o<i;o++)if(e=s[o],e._id===t._id){for(n in t)r=t[n],e[n]=r;return e}if(this.predicateItem(t))return this.items.push(t),this.processPages(),t}},e.prototype.removeItem=function(t){var e;if(t)return e=this.items.indexOf(t),this.items.splice(e,1),this.processPages(),e},e.prototype.removeById=function(t){var e,n,r,o,i;for(i=this.items,e=r=0,o=i.length;r<o;e=++r)if(n=i[e],n._id===t)return this.items.splice(e,1),this.processPages(),e;return-1},e.prototype.sortBy=function(t){return this.predicate===t?this.reverse=!this.reverse:(this.predicate=t,this.reverse=!0)},e.prototype.nextPage=function(){if(this.page<this.pageCount)return this.setPage(this.page+1)},e.prototype.previousPage=function(){if(this.page>1)return this.setPage(this.page-1)},e.prototype.setPage=function(t){return t<1?t=1:t>this.pageCount&&(t=this.pageCount),this.page=t,this.onPageChange(t),t},e.prototype.onPageChange=function(t){},e.prototype.processPages=function(t){var e,n;if(!this.paging&&(e=this.items.length,t||this.itemCount!==e))return this.itemCount=e,this.pageCount=Math.ceil(e/this.pageItems),0===this.pageCount?this.pages=[]:this.pages=function(){n=[];for(var t=1,e=this.pageCount;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(t);return n}.apply(this),this.page>this.pageCount?this.page=this.pageCount:this.page<1?this.page=1:void 0},e.prototype.filter=function(t,e,n){return null==e&&(e=["name"]),null==n&&(n=!0),function(r){return function(o){var i,s,u;if(!t)return!0;for(s=0,u=e.length;s<u;s++)if(i=e[s],r.filterItemField(t,o,i,n))return!0;return!1}}(this)},e.prototype.filterItemField=function(t,e,n,r){var o,i,s;if(!(o=null!=(i=e[n])?i:null!=(s=e.model)?s[n]:void 0))return!1;if(r){if(t=t.toLowerCase(),o.toLowerCase().indexOf(t)>=0)return!0}else if(o.indexOf(t)>=0)return!0;return!1},e}(t.Disposable),{PagingModel:e}}),function(t){function e(t){return t&&t.Object===Object?t:null}function n(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function r(t){return function(){try{return t.apply(this,arguments)}catch(t){return Qt.e=t,Qt}}}function o(t){throw t}function i(t,e){if(Zt&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+re+"\n");t.stack=s(o)}}function s(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;o>r;r++){var i=e[r];u(i)||a(i)||!i||n.push(i)}return n.join("\n")}function u(t){var e=l(t);if(!e)return!1;var n=e[0],r=e[1];return n===ee&&r>=ne&&ys>=r}function a(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function c(){if(Zt)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=l(e);if(!n)return;return ee=n[0],n[1]}}function l(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function h(e,n,r,o,i,s){var u=Oe(e),a=u.length;if(a!==Oe(n).length&&!o)return!1;for(var c,l=a;l--;)if(c=u[l],!(o?c in n:ke.call(n,c)))return!1;for(var h=o;++l<a;){c=u[l];var p,f=e[c],d=n[c];if(!(p===t?r(f,d,o,i,s):p))return!1;h||(h="constructor"===c)}if(!h){var m=e.constructor,v=n.constructor;if(m!==v&&"constructor"in e&&"constructor"in n&&!("function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v))return!1}return!0}function p(t,e,n){switch(n){case ye:case _e:return+t==+e;case ge:return t.name===e.name&&t.message===e.message;case be:return t!==+t?e!==+e:t===+e;case xe:case Ce:return t===e+""}return!1}function f(t){return!!t&&"object"==typeof t}function d(t){return"number"==typeof t&&t>-1&&t%1==0&&Me>=t}function m(t){return f(t)&&d(t.length)&&!!Se[De.call(t)]}function v(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function y(e,n,r,o,i,s){var u=-1,a=e.length,c=n.length;if(a!==c&&!(o&&c>a))return!1;for(;++u<a;){var l,h=e[u],p=n[u];if(l!==t)return!1;if(o){if(!v(n,function(t){return h===t||r(h,t,o,i,s)}))return!1}else if(h!==p&&!r(h,p,o,i,s))return!1}return!0}function _(t,e,n,r,o,i){var s=Te(t),u=Te(e),a=ve,c=ve;s||(a=De.call(t),a===me?a=we:a!==we&&(s=m(t))),u||(c=De.call(e))===me&&(c=we);var l=a===we&&!Pe(t),f=c===we&&!Pe(e),d=a===c;if(d&&!s&&!l)return p(t,e,a);if(!r){var v=l&&ke.call(t,"__wrapped__"),_=f&&ke.call(e,"__wrapped__");if(v||_)return n(v?t.value():t,_?e.value():e,r,o,i)}if(!d)return!1;o||(o=[]),i||(i=[]);for(var g=o.length;g--;)if(o[g]===t)return i[g]===e;o.push(t),i.push(e);var b=(s?y:h)(t,e,n,r,o,i);return o.pop(),i.pop(),b}function g(t,e,n,r,o){return t===e||(null==t||null==e||!et(t)&&!f(e)?t!==t&&e!==e:_(t,e,g,n,r,o))}function b(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function w(t,e){this.id=t,this.value=e}function x(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function C(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function S(t){this._s=t,this.isDisposed=!1}function E(t){this._s=t}function k(t){this._s=t,this._l=t.length,this._i=0}function D(t){this._a=t}function M(t){this._a=t,this._l=A(t),this._i=0}function O(t){return"number"==typeof t&&Rt.isFinite(t)}function P(e){var n,r=e[le];if(!r&&"string"==typeof e)return n=new E(e),n[le]();if(!r&&e.length!==t)return n=new D(e),n[le]();if(!r)throw new TypeError("Object is not iterable");return e[le]()}function T(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function A(t){var e=+t.length;return isNaN(e)?0:0!==e&&O(e)?(e=T(e)*Math.floor(Math.abs(e)),0>=e?0:e>Qn?Qn:e):e}function N(t,e){return tn(t)||(t=an),new Zn(e,t)}function j(t,e){this.observer=t,this.parent=e}function $(t,e){return t.amb(e)}function q(){return!1}function I(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function q(){return!1}function I(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function q(){return!1}function F(){return[]}function q(){return!1}function F(){return[]}function I(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function B(t){return function(e){return t.subscribe(e)}}function L(t){return t.toArray()}function R(t){return t.length>0}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function z(t,e,n){var r=de(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return Kt(o)&&(o=zn(o)),(fe(o)||pe(o))&&(o=Xn(o)),o}).concatAll()}function H(t,e,n){for(var r=0,o=t.length;o>r;r++)if(n(t[r],e))return r;return-1}function Y(t){this.comparer=t,this.set=[]}function V(e,n){return function(r){for(var o=r,i=0;n>i;i++){var s=o[e[i]];if(void 0===s)return t;o=s}return o}}function W(t){if(0===t.length)throw new oe;return t[0]}function G(t,e,n,r){var o=de(e,n,3);return new as(function(e){return t.subscribe(new Wo(e,t,o,r))},t)}function K(t){return t?Pn.isObservable(t)?t:Kt(t)?Pn.fromPromise(t):tt(t)||Z(t)?ni.call(this,t):Jt(t)?X.call(this,t):fe(t)||pe(t)?J.call(this,t):et(t)?Q.call(this,t):t:t}function J(t){return Pn.from(t).concatMap(function(t){return Pn.isObservable(t)||et(t)?K.call(null,t):Ut.Observable.just(t)}).toArray()}function Q(e){for(var n=new e.constructor,r=Object.keys(e),o=[],i=0,s=r.length;s>i;i++){var u=r[i],a=K.call(this,e[u]);a&&Pn.isObservable(a)?function(e,r){n[r]=t,o.push(e.map(function(t){n[r]=t}))}(a,u):n[u]=e[u]}return Pn.forkJoin.apply(Pn,o).map(function(){return n})}function X(t){var e=this;return new as(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],o=1,i=arguments.length;i>o;o++)r.push(arguments[o]);e=r}n.onNext(e),n.onCompleted()})})}function Z(t){return Jt(t.next)&&Jt(t.throw)}function tt(t){var e=t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName||Z(e.prototype))}function et(t){return Object==t.constructor}function nt(t,e,n,r){var o=new fs;return r.push(rt(o,e,n)),t.apply(e,r),o.asObservable()}function rt(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];if(Jt(n)){if((o=Xt(n).apply(e,o))===Qt)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function ot(t,e,n,r){var o=new fs;return r.push(it(o,e,n)),t.apply(e,r),o.asObservable()}function it(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var o=arguments.length,i=[],s=1;o>s;s++)i[s-1]=arguments[s];if(Jt(n)){var i=Xt(n).apply(e,i);if(i===Qt)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function st(t){return Rt.StaticNodeList?t instanceof Rt.StaticNodeList||t instanceof Rt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function ut(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function at(t,e,n){var r=new Fe,o=Object.prototype.toString.call(t);if(st(t)||"[object HTMLCollection]"===o)for(var i=0,s=t.length;s>i;i++)r.add(at(t.item(i),e,n));else t&&r.add(new ut(t,e,n));return r}function ct(t,e,n){return new as(function(r){function o(t,e){if(c[e]=t,s[e]=!0,u||(u=s.every(Ht))){if(i)return r.onError(i);var o=Xt(n).apply(null,c);if(o===Qt)return r.onError(o.e);r.onNext(o)}a&&c[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,a=!1,c=new Array(2);return new Ge(t.subscribe(function(t){o(t,0)},function(t){c[1]?r.onError(t):i=t},function(){a=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){a=!0,o(!0,1)}))},t)}function L(t){return t.toArray()}function lt(t,e){return t.groupJoin(this,e,Kn,function(t,e){return e})}function ht(t){var e=this;return new as(function(n){var r=new ps,o=new Fe,i=new Je(o);return n.onNext($e(r,i)),o.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),Kt(t)&&(t=zn(t)),o.add(t.subscribe(function(t){r.onCompleted(),r=new ps,n.onNext($e(r,i))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),i},e)}function pt(t){var e=this;return new as(function(n){function r(){var e;try{e=t()}catch(t){return void n.onError(t)}Kt(e)&&(e=zn(e));var i=new Ve;o.setDisposable(i),i.setDisposable(e.take(1).subscribe(zt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new ps,n.onNext($e(u,s)),r()}))}var o=new We,i=new Fe(o),s=new Je(i),u=new ps;return n.onNext($e(u,s)),i.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function ft(t,e){return new gi(t,e)}function I(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function dt(t){this.patterns=t}function mt(t,e){this.expression=t,this.selector=e}function vt(t){return function(e){t.onError(e)}}function yt(t,e){return function(){var n=Xt(t.selector).apply(t,arguments);return n===Qt?e.onError(n.e):void e.onNext(n)}}function _t(t,e,n){var r=t.get(e);if(!r){var o=new Di(e,n);return t.set(e,o),o}return r}function gt(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new ki;for(var r=0,o=this.joinObserverArray.length;o>r;r++){var i=this.joinObserverArray[r];this.joinObservers.set(i,i)}}function bt(t,e){return new Mi(t,e)}function wt(t,e,n){return new as(function(r){var o=t,i=Ze(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function xt(t,e,n){return t===e?new as(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):Vn(function(){return wt(new Date(n.now()+t),e,n)})}function Ct(t,e,n){return new as(function(r){var o,i=!1,s=new We,u=null,a=[],c=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,l;"E"===t.value.kind?(a=[],a.push(t),u=t.value.error,l=!c):(a.push({value:t.value,timestamp:t.timestamp+e}),l=!i,i=!0),l&&(null!==u?r.onError(u):(o=new Ve,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,l,h;if(null===u){c=!0;do{l=null,a.length>0&&a[0].timestamp-n.now()<=0&&(l=a.shift().value),null!==l&&l.accept(r)}while(null!==l);h=!1,s=0,a.length>0?(h=!0,s=Math.max(0,a[0].timestamp-n.now())):i=!1,o=u,c=!1,null!==o?r.onError(o):h&&e(null,s)}}))))}),new Ge(o,s)},t)}function St(t,e,n){return Vn(function(){return Ct(t,e-n.now(),n)})}function Et(t,e,n){var r,o;return Jt(e)?o=e:(r=e,o=n),new as(function(e){function n(){a.setDisposable(t.subscribe(function(t){var n=Xt(o)(t);if(n===Qt)return e.onError(n.e);var r=new Ve;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),i()}))},function(t){e.onError(t)},function(){u=!0,a.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new Fe,u=!1,a=new We;return r?a.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new Ge(a,s)},t)}function kt(t,e){return new as(function(n){var r,o=!1,i=new We,s=0,u=t.subscribe(function(t){var u=Xt(e)(t);if(u===Qt)return n.onError(u.e);Kt(u)&&(u=zn(u)),o=!0,r=t,s++;var a=s,c=new Ve;i.setDisposable(c),c.setDisposable(u.subscribe(function(){o&&s===a&&n.onNext(r),o=!1,c.dispose()},function(t){n.onError(t)},function(){o&&s===a&&n.onNext(r),o=!1,c.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new Ge(u,i)},t)}function L(t){return t.toArray()}function L(t){return t.toArray()}function Dt(t,e,n,r){return Jt(e)&&(r=n,n=e,e=or()),Pn.isObservable(r)||(r=lr(new Bi)),new as(function(o){function i(t){function e(){return h=n===l}var n=l,i=new Ve;a.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(r.subscribe(o))}))}function s(){var t=!h;return t&&l++,t}var u=new We,a=new We,c=new Ve;u.setDisposable(c);var l=0,h=!1;return i(e),c.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=Xt(n)(t);if(e===Qt)return o.onError(e.e);i(Kt(e)?zn(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new Ge(u,a)},t)}function Mt(t,e,n,r){return tn(n)&&(r=n,n=lr(new Bi)),n instanceof Error&&(n=lr(n)),tn(r)||(r=fn),Pn.isObservable(n)||(n=lr(new Bi)),new as(function(o){function i(){var t=s;l.setDisposable(r.scheduleFuture(null,e,function(){(c=s===t)&&(Kt(n)&&(n=zn(n)),a.setDisposable(n.subscribe(o)))}))}var s=0,u=new Ve,a=new We,c=!1,l=new We;return a.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){c||(s++,o.onNext(t),i())},function(t){c||(s++,o.onError(t))},function(){c||(s++,o.onCompleted())})),new Ge(a,l)},t)}function Ot(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function Pt(t){this.predicate=t}function Tt(t){this.predicate=t}function At(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,o=this.messages.length;o>r;r++){var i=this.messages[r],s=i.value;!function(e){t.scheduleAbsolute(null,i.time,function(){for(var t=n.observers.slice(0),r=0,o=t.length;o>r;r++)e.accept(t[r]);return Ue})}(s)}}var Nt={function:!0,object:!0},jt=Nt[typeof exports]&&exports&&!exports.nodeType?exports:null,$t=Nt[typeof module]&&module&&!module.nodeType?module:null,qt=e(jt&&$t&&"object"==typeof global&&global),It=e(Nt[typeof self]&&self),Ft=e(Nt[typeof window]&&window),Bt=$t&&$t.exports===jt?jt:null,Lt=e(Nt[typeof this]&&this),Rt=qt||Ft!==(Lt&&Lt.window)&&Ft||It||Lt||Function("return this")(),Ut={internals:{},config:{Promise:Rt.Promise},helpers:{}},zt=Ut.helpers.noop=function(){},Ht=Ut.helpers.identity=function(t){return t},Yt=Ut.helpers.defaultNow=Date.now,Vt=Ut.helpers.defaultComparer=function(t,e){return Ae(t,e)},Wt=Ut.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},Gt=(Ut.helpers.defaultKeySerializer=function(t){return t.toString()},Ut.helpers.defaultError=function(t){throw t}),Kt=Ut.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},Jt=Ut.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Qt={e:{}},Xt=Ut.internals.tryCatch=function(t){if(!Jt(t))throw new TypeError("fn must be a function");return r(t)};Ut.config.longStackSupport=!1;var Zt=!1,te=Xt(function(){throw new Error})();Zt=!!te.e&&!!te.e.stack;var ee,ne=c(),re="From previous event:",oe=Ut.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};oe.prototype=Object.create(Error.prototype),oe.prototype.name="EmptyError";var ie=Ut.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ie.prototype=Object.create(Error.prototype),ie.prototype.name="ObjectDisposedError";var se=Ut.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};se.prototype=Object.create(Error.prototype),se.prototype.name="ArgumentOutOfRangeError";var ue=Ut.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};ue.prototype=Object.create(Error.prototype),ue.prototype.name="NotSupportedError";var ae=Ut.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};ae.prototype=Object.create(Error.prototype),ae.prototype.name="NotImplementedError";var ce=Ut.helpers.notImplemented=function(){throw new ae},le=(Ut.helpers.notSupported=function(){throw new ue},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Rt.Set&&"function"==typeof(new Rt.Set)["@@iterator"]&&(le="@@iterator");var he=Ut.doneEnumerator={done:!0,value:t},pe=Ut.helpers.isIterable=function(e){return e&&e[le]!==t},fe=Ut.helpers.isArrayLike=function(e){return e&&e.length!==t};Ut.helpers.iterator=le;var de=Ut.internals.bindCallback=function(t,e,n){if(void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},me="[object Arguments]",ve="[object Array]",ye="[object Boolean]",_e="[object Date]",ge="[object Error]",be="[object Number]",we="[object Object]",xe="[object RegExp]",Ce="[object String]",Se={};Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se[me]=Se[ve]=Se["[object ArrayBuffer]"]=Se[ye]=Se[_e]=Se[ge]=Se["[object Function]"]=Se["[object Map]"]=Se[be]=Se[we]=Se[xe]=Se["[object Set]"]=Se[Ce]=Se["[object WeakMap]"]=!1;var Ee=Object.prototype,ke=Ee.hasOwnProperty,De=Ee.toString,Me=Math.pow(2,53)-1,Oe=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;r>s;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),et=Ut.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Pe=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Te=Array.isArray||function(t){return f(t)&&d(t.length)&&De.call(t)===ve},Ae=Ut.internals.isEqual=function(t,e){return g(t,e)},Ne=(Array.prototype.slice,Ut.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),je=Ut.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var o=0,i=e.length;i>o;o++){var s=e[o];for(var u in s)t[u]=s[u]}},$e=Ut.internals.addRef=function(t,e){return new as(function(n){return new Ge(e.getDisposable(),t.subscribe(n))})};w.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var qe=Ut.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Ie=qe.prototype;Ie.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Ie.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Ie.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},Ie.peek=function(){return this.items[0].value},Ie.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=t,this.heapify()},Ie.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Ie.enqueue=function(t){var e=this.length++;this.items[e]=new w(qe.count++,t),this.percolate(e)},Ie.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},qe.count=0;var Fe=Ut.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},Be=Fe.prototype;Be.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},Be.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},Be.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var Le=Ut.Disposable=function(t){this.isDisposed=!1,this.action=t||zt};Le.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Re=Le.create=function(t){return new Le(t)},Ue=Le.empty={dispose:zt},ze=Le.isDisposable=function(t){return t&&Jt(t.dispose)},He=Le.checkDisposed=function(t){if(t.isDisposed)throw new ie},Ye=Le._fixup=function(t){return ze(t)?t:Ue},Ve=Ut.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Ve.prototype.getDisposable=function(){return this.current},Ve.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Ve.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var We=Ut.SerialDisposable=function(){this.isDisposed=!1,this.current=null};We.prototype.getDisposable=function(){return this.current},We.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},We.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Ge=Ut.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Ge.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first
;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Ke=Ut.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Ke.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var Je=Ut.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,0===--this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?Ue:new t(this)},e}();x.prototype.dispose=function(){this.scheduler.schedule(this,C)};var Qe=Ut.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||Wt,this.disposable=new Ve};Qe.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Qe.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Qe.prototype.isCancelled=function(){return this.disposable.isDisposed},Qe.prototype.invokeCore=function(){return Ye(this.action(this.scheduler,this.state))};var Xe=Ut.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new ae},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new ae},t.now=Yt,t.prototype.now=Yt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),Ze=Xe.normalize,tn=Xe.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(a):u=!0,o(e,n),Ue}var s=!1,u=!1,a=t.schedule(e,r);u||(i.add(a),s=!0)}var r=e[0],o=e[1],i=new Fe;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(c):a=!0,o(e,n),Ue}var u=!1,a=!1,c=t.scheduleFuture(e,r,s);a||(i.add(c),u=!0)}var r=e[0],o=e[1],i=new Fe;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(Xe.prototype),function(t){t.schedulePeriodic=function(t,e,n){if(void 0===Rt.setInterval)throw new ue;e=Ze(e);var r=t,o=Rt.setInterval(function(){r=n(r)},e);return Re(function(){Rt.clearInterval(o)})}}(Xe.prototype),function(t){t.catchError=t.catch=function(t){return new dn(this,t)}}(Xe.prototype);var en,nn,rn=Ut.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=Xt(t._action)(t._state);r===Qt&&(t._cancel.dispose(),o(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new Ve;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),on=function(t){function e(){t.call(this)}return Ne(e,t),e.prototype.schedule=function(t,e){return Ye(e(this,t))},e}(Xe),sn=Xe.immediate=new on,un=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Ne(n,t),n.prototype.schedule=function(t,n){var i=new Qe(this,t,n,this.now());if(r)r.enqueue(i);else{r=new qe(4),r.enqueue(i);var s=Xt(e)();r=null,s===Qt&&o(s.e)}return i.disposable},n.prototype.scheduleRequired=function(){return!r},n}(Xe),an=Xe.currentThread=new un,cn=function(){var t,e=zt;if(Rt.setTimeout)t=Rt.setTimeout,e=Rt.clearTimeout;else{if(!Rt.WScript)throw new ue;t=function(t,e){Rt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),ln=cn.setTimeout,hn=cn.clearTimeout;!function(){function t(e){if(r)ln(function(){t(e)},0);else{var i=n[e];if(i){r=!0;var s=Xt(i)();nn(e),r=!1,s===Qt&&o(s.e)}}}var e=1,n={},r=!1;nn=function(t){delete n[t]};var i=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),s="function"==typeof(s=qt&&Bt&&qt.setImmediate)&&!i.test(s)&&s;if(Jt(s))en=function(r){var o=e++;return n[o]=r,s(function(){t(o)}),o};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))en=function(r){var o=e++;return n[o]=r,process.nextTick(function(){t(o)}),o};else if(function(){if(!Rt.postMessage||Rt.importScripts)return!1;var t=!1,e=Rt.onmessage;return Rt.onmessage=function(){t=!0},Rt.postMessage("","*"),Rt.onmessage=e,t}()){var u="ms.rx.schedule"+Math.random(),a=function(e){"string"==typeof e.data&&e.data.substring(0,u.length)===u&&t(e.data.substring(u.length))};Rt.addEventListener("message",a,!1),en=function(t){var r=e++;return n[r]=t,Rt.postMessage(u+r,"*"),r}}else if(Rt.MessageChannel){var c=new Rt.MessageChannel;c.port1.onmessage=function(e){t(e.data)},en=function(t){var r=e++;return n[r]=t,c.port2.postMessage(r),r}}else en="document"in Rt&&"onreadystatechange"in Rt.document.createElement("script")?function(r){var o=Rt.document.createElement("script"),i=e++;return n[i]=r,o.onreadystatechange=function(){t(i),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},Rt.document.documentElement.appendChild(o),i}:function(r){var o=e++;return n[o]=r,ln(function(){t(o)},0),o}}();var pn=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(Le._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}function i(t,e,n){return function(){e(t,n)}}return Ne(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,nn(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,hn(this._id))},e.prototype.schedule=function(t,e){var o=new Ve,i=en(n(o,e,this,t));return new Ge(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new Ve,s=ln(n(i,r,this,t),e);return new Ge(i,new o(s))},e.prototype.scheduleLongRunning=function(t,e){var n=Re(zt);return en(i(t,e,n)),n},e}(Xe),fn=Xe.default=Xe.async=new pn,dn=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return Ne(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var i=Xt(t)(e._getRecursiveWrapper(n),r);return i===Qt?(e._handler(i.e)||o(i.e),Ue):Ye(i)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,i=!1,s=new Ve;return s.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(i)return null;var e=Xt(n)(t);return e===Qt?(i=!0,r._handler(e.e)||o(e.e),s.dispose(),null):e})),s},e}(Xe),mn=Ut.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new ae},t.prototype._acceptObserver=function(t,e,n){throw new ae},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return tn(t)||(t=sn),new as(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),vn=function(t){function e(t){this.value=t,this.kind="N"}return Ne(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(mn),yn=function(t){function e(t){this.error=t,this.kind="E"}return Ne(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(mn),_n=function(t){function e(){this.kind="C"}return Ne(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(mn),gn=mn.createOnNext=function(t){return new vn(t)},bn=mn.createOnError=function(t){return new yn(t)},wn=mn.createOnCompleted=function(){return new _n},xn=Ut.Observer=function(){};xn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},xn.prototype.asObserver=function(){var t=this;return new kn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},xn.prototype.checked=function(){return new Dn(this)};var Cn=xn.create=function(t,e,n){return t||(t=zt),e||(e=Gt),n||(n=zt),new kn(t,e,n)};xn.fromNotifier=function(t,e){var n=de(t,e,1);return new kn(function(t){return n(gn(t))},function(t){return n(bn(t))},function(){return n(wn())})},xn.prototype.notifyOn=function(t){return new On(t,this)},xn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Sn,En=Ut.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Ne(e,t),e.prototype.next=ce,e.prototype.error=ce,e.prototype.completed=ce,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(xn),kn=Ut.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Ne(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(En),Dn=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Ne(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=Xt(this._observer.onNext).call(this._observer,t);this._state=0,e===Qt&&o(e.e)},n.onError=function(t){this.checkAccess();var e=Xt(this._observer.onError).call(this._observer,t);this._state=2,e===Qt&&o(e.e)},n.onCompleted=function(){this.checkAccess();var t=Xt(this._observer.onCompleted).call(this._observer);this._state=2,t===Qt&&o(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(xn),Mn=Ut.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new We}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function i(t){return function(){t.onCompleted()}}function s(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=Xt(n)();return r===Qt?(t.queue=[],t.hasFaulted=!0,o(r.e)):void e(t)}return Ne(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(i(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,s))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(En),On=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Ne(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Mn),Pn=Ut.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){i(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(Ut.config.longStackSupport&&Zt){var e=this._subscribe,n=Xt(o)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Sn=e.prototype,e.isObservable=function(t){return t&&Jt(t.subscribe)},Sn.subscribe=Sn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Cn(t,e,n))},Sn.subscribeOnNext=function(t,e){return this._subscribe(Cn(void 0!==e?function(n){t.call(e,n)}:t))},Sn.subscribeOnError=function(t,e){return this._subscribe(Cn(null,void 0!==e?function(n){t.call(e,n)}:t))},Sn.subscribeOnCompleted=function(t,e){return this._subscribe(Cn(null,null,void 0!==e?function(){t.call(e)}:t))},e}(),Tn=Ut.ObservableBase=function(t){function e(t){return t&&Jt(t.dispose)?t:Jt(t)?Re(t):Ue}function n(t,n){var r=n[0],i=n[1],s=Xt(i.subscribeCore).call(i,r);s!==Qt||r.fail(Qt.e)||o(Qt.e),r.setDisposable(e(s))}function r(){t.call(this)}return Ne(r,t),r.prototype._subscribe=function(t){var e=new cs(t),r=[e,this];return an.scheduleRequired()?an.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=ce,r}(Pn),An=Ut.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=Jt(r)?r:null,this.selector=de(Jt(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Ne(n,En),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=Xt(this.selector)(t,e,this.source);return n===Qt?this.o.onError(n.e):(Kt(n)&&(n=zn(n)),(fe(n)||pe(n))&&(n=Pn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Tn),Nn=Ut.internals.Enumerable=function(){};S.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var jn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Xt(t.e.next).call(t.e);if(n===Qt)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var o=n.value;Kt(o)&&(o=zn(o));var i=new Ve;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We,r={isDisposed:!1,o:t,subscription:e,e:this.sources[le]()},o=an.scheduleRecursive(r,n);return new Ke([e,o,new S(r)])},Ne(r,En),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Tn);Nn.prototype.concat=function(){return new jn(this)};var $n=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Xt(t.e.next).call(t.e);if(n===Qt)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var o=n.value;Kt(o)&&(o=zn(o));var i=new Ve;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We,r={isDisposed:!1,e:this.sources[le](),subscription:e,lastError:null,o:t},o=an.scheduleRecursive(r,n);return new Ke([e,o,new S(r)])},Ne(r,En),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Tn);Nn.prototype.catchError=function(){return new $n(this)};var qn=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Ne(e,t),e.prototype[le]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?he:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Nn),In=Nn.repeat=function(t,e){return new qn(t,e)},Fn=function(t){function e(t,e,n){this.s=t,this.fn=e?de(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Ne(e,t),e.prototype[le]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:he},e}(Nn),Bn=Nn.of=function(t,e,n){return new Fn(t,e,n)},Ln=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new On(this._s,t))},e}(Tn);Sn.observeOn=function(t){return new Ln(this,t)};var Rn=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];r.setDisposable(new x(t,n.subscribe(o)))}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Ve,r=new We;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Tn);Sn.subscribeOn=function(t){return new Rn(this,t)};var Un=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Ve,o=this,i=this._p;return Jt(i)&&(i=Xt(i)())===Qt?(t.onError(i.e),e):(i.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e)},e}(Tn),zn=Pn.fromPromise=function(t,e){return e||(e=fn),new Un(t,e)};Sn.toPromise=function(t){if(t||(t=Ut.config.Promise),!t)throw new ue("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var Hn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Ne(n,En),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Tn);Sn.toArray=function(){return new Hn(this)},Pn.create=function(t,e){return new as(t,e)};var Yn=function(t){function e(e){this._f=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=Xt(this._f)();return e===Qt?lr(e.e).subscribe(t):(Kt(e)&&(e=zn(e)),e.subscribe(t))},e}(Tn),Vn=Pn.defer=function(t){return new Yn(t)},Wn=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),Ue}return Ne(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===sn?r(null,t):this.scheduler.schedule(t,r)},e}(Tn),Gn=new Wn(sn),Kn=Pn.empty=function(t){return tn(t)||(t=sn),t===sn?Gn:new Wn(t)},Jn=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i=Xt(e.next).call(e);if(i===Qt)return t.onError(i.e);if(i.done)return t.onCompleted();var s=i.value;return Jt(n)&&(s=Xt(n)(s,r))===Qt?t.onError(s.e):(t.onNext(s),void o(r+1))}}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=P(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Tn),Qn=Math.pow(2,53)-1;E.prototype[le]=function(){return new k(this._s)},k.prototype[le]=function(){return this},k.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:he},D.prototype[le]=function(){return new M(this._a)},M.prototype[le]=function(){return this},M.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:he};var Xn=Pn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!Jt(e))throw new Error("mapFn when provided must be a function");if(e)var o=de(e,n,2);return tn(r)||(r=an),new Jn(t,o,r)},Zn=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){n>r?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Tn),tr=Pn.fromArray=function(t,e){return tn(e)||(e=an),new Zn(t,e)},er=function(t){function e(e,n,r,o,i){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._s=i,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=Xt(t.self._itrFn)(t.newState),t.newState===Qt)return t.o.onError(t.newState.e);var n=Xt(t.self._cndFn)(t.newState);if(n===Qt)return t.o.onError(n.e);if(n){var r=Xt(t.self._resFn)(t.newState);if(r===Qt)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return Ne(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Tn);Pn.generate=function(t,e,n,r,o){return tn(o)||(o=an),new er(t,e,n,r,o)},Pn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new Zn(e,an)},Pn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new Zn(n,t)},Pn.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new as(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Pn.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new as(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var nr=function(t){function e(){t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return Ue},e}(Tn),rr=new nr,or=Pn.never=function(){return rr},ir=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Tn);Pn.pairs=function(t,e){return e||(e=an),new ir(t,e)};var sr=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){e>r?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Tn);Pn.range=function(t,e,n){return tn(n)||(n=an),new sr(t,e,n)};var ur=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return new j(t,this).run()},e}(Tn);j.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Pn.repeat=function(t,e,n){return tn(n)||(n=an),new ur(t,e,n)};var ar=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),Ue}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===sn?n(null,e):this._scheduler.schedule(e,n)},e}(Tn),cr=(Pn.return=Pn.just=function(t,e){return tn(e)||(e=sn),new ar(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),Ue}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===sn?n(null,e):this._scheduler.schedule(e,n)},e}(Tn)),lr=Pn.throw=function(t,e){return tn(e)||(e=sn),new cr(t,e)},hr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=Ue,n=Xt(this._resFn)();if(n===Qt)return new Ge(lr(n.e).subscribe(t),e);n&&(e=n);var r=Xt(this._obsFn)(n);return r===Qt?new Ge(lr(r.e).subscribe(t),e):new Ge(r.subscribe(t),e)},e}(Tn);Pn.using=function(t,e){return new hr(t,e)},Sn.amb=function(t){var e=this;return new as(function(n){function r(){i||(i=s,c.dispose())}function o(){i||(i=u,a.dispose())}var i,s="L",u="R",a=new Ve,c=new Ve;Kt(t)&&(t=zn(t));var l=Cn(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()}),h=Cn(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()});return a.setDisposable(e.subscribe(l)),c.setDisposable(t.subscribe(h)),new Ge(a,c)})},Pn.amb=function(){var t,e=or();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;n>r;r++)t[r]=arguments[r]}for(var r=0,n=t.length;n>r;r++)e=$(e,t[r]);return e};var pr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Ve,n=new We;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new fr(t,n,this._fn))),n},e}(Tn),fr=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=Xt(this._fn)(t);if(e===Qt)return this._o.onError(e.e);Kt(e)&&(e=zn(e));var n=new Ve;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(En);Sn.catch=function(t){return Jt(t)?new pr(this,t):dr([this,t])};var dr=Pn.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return Bn(t).catchError()};Sn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),yr.apply(this,e)};var mr=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:b(e,q),hasValueAll:!1,isDone:b(e,q),values:new Array(e)},o=0;e>o;o++){var i=this._params[o],s=new Ve;n[o]=s,Kt(i)&&(i=zn(i)),s.setDisposable(i.subscribe(new vr(t,o,this._cb,r)))}return new Ke(n)},e}(Tn),vr=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return Ne(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Ht))){var e=Xt(this._cb).apply(null,this._state.values);if(e===Qt)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(Ht)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Ht)&&this._o.onCompleted()},e}(En),yr=Pn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Jt(e[t-1])?e.pop():I;return Array.isArray(e[0])&&(e=e[0]),new mr(e,r)};Sn.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),br.apply(null,t)};var _r=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(En),gr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];Kt(n)&&(n=zn(n));var r=new Ve;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new _r(t,e)))}}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We,r=Re(zt),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=sn.scheduleRecursive(o,n);return new Ke([e,r,i])},e}(Tn),br=Pn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new gr(t)};Sn.concatAll=function(){return this.merge(1)};var wr=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Fe;return e.add(this.source.subscribe(new xr(t,this.maxConcurrent,e))),e},e}(Tn),xr=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ne(e,t),e.prototype.handleSubscribe=function(t){var e=new Ve;this.g.add(e),Kt(t)&&(t=zn(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Ne(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(En);Sn.merge=function(t){return"number"!=typeof t?Cr(this,t):new wr(this,t)};var Cr=Pn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(tn(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=sn,e=0;r>e;e++)n.push(arguments[e]);else for(t=sn,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),N(t,n).mergeAll()},Sr=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Fe,n=new Ve;return e.add(n),n.setDisposable(this.source.subscribe(new Er(t,e))),e},e}(Tn),Er=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=new Ve;this.g.add(e),Kt(t)&&(t=zn(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Ne(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(En);Sn.mergeAll=function(){return new Sr(this)};var kr=Ut.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};kr.prototype=Object.create(Error.prototype),
kr.prototype.name="CompositeError";var Dr=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Fe,n=new Ve,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Mr(e,r))),e},e}(Tn),Mr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new kr(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=new Ve;this._group.add(e),Kt(t)&&(t=zn(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Ne(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(En);Pn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=N(null,t);return new Dr(r)},Sn.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Tr([this,t])};var Or=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];Kt(n)&&(n=zn(n));var r=new Ve;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Pr(t,e)))}else t.o.onCompleted()}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We,r={pos:0,subscription:e,o:t,sources:this.sources},o=sn.scheduleRecursive(r,n);return new Ge(e,o)},e}(Tn),Pr=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(En),Tr=Pn.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Or(t)},Ar=function(t){function e(e,n){this._s=e,this._o=Kt(n)?zn(n):n,this._open=!1,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Ve;e.setDisposable(this._s.subscribe(new Nr(t,this))),Kt(this._o)&&(this._o=zn(this._o));var n=new Ve;return n.setDisposable(this._o.subscribe(new jr(t,this,n))),new Ge(e,n)},e}(Tn),Nr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(En),jr=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Ne(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(En);Sn.skipUntil=function(t){return new Ar(this,t)};var $r=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,En.call(this)}function r(t,e){this.parent=t,this.id=e,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We,r=this.source.subscribe(new n(t,e));return new Ge(r,e)},Ne(n,En),n.prototype.next=function(t){var e=new Ve,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),Kt(t)&&(t=zn(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Ne(r,En),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Tn);Sn.switch=Sn.switchLatest=function(){return new $r(this)};var qr=function(t){function e(e,n){this.source=e,this.other=Kt(n)?zn(n):n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return new Ge(this.source.subscribe(t),this.other.subscribe(new Ir(t)))},e}(Tn),Ir=function(t){function e(e){this._o=e,t.call(this)}return Ne(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=zt,e}(En);Sn.takeUntil=function(t){return new qr(this,t)};var Fr=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:b(e,q),hasValueAll:!1,values:new Array(e)},r=this._ss.length,o=new Array(r+1),i=0;r>i;i++){var s=this._ss[i],u=new Ve;Kt(s)&&(s=zn(s)),u.setDisposable(s.subscribe(new Br(t,i,n))),o[i]=u}var a=new Ve;return a.setDisposable(this._s.subscribe(new Lr(t,this._cb,n))),o[r]=a,new Ke(o)},e}(Tn),Br=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Ht)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=zt,e}(En),Lr=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=Xt(this._cb).apply(null,e);return n===Qt?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Jt(e[t-1])?e.pop():I;return Array.isArray(e[0])&&(e=e[0]),new Fr(this,e,r)};var Rr=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=b(e,q),o=b(e,F),i=0;e>i;i++){var s=this._s[i],u=new Ve;n[i]=u,Kt(s)&&(s=zn(s)),u.setDisposable(s.subscribe(new Ur(t,i,this,o,r)))}return new Ke(n)},e}(Tn),Ur=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ne(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=Xt(this._p._cb).apply(null,e);if(i===Qt)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(Ht)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Ht)&&this._o.onCompleted()},e}(En);Sn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Jt(e[t-1])?e.pop():I;Array.isArray(e[0])&&(e=e[0]);var o=this;return e.unshift(o),new Rr(e,r)},Pn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=Jt(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var zr=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),o={q:b(n,F),done:b(n,q),cb:this._cb,o:t},i=0;n>i;i++)!function(t){var n=e[t],i=new Ve;(fe(n)||pe(n))&&(n=Xn(n)),r[t]=i,i.setDisposable(n.subscribe(new Hr(o,t)))}(i);return new Ke(r)},e}(Tn),Hr=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ne(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=Xt(this._s.cb).apply(null,e);if(i===Qt)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(Ht)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Ht)&&this._s.o.onCompleted()},e}(En);Sn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Jt(e[t-1])?e.pop():I,o=this;return e.unshift(o),new zr(e,r)},Sn.asObservable=function(){return new as(B(this),this)},Sn.bufferWithCount=Sn.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(L).filter(R)};var Yr=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vr(t))},e}(Tn),Vr=function(t){function e(e){this._o=e,t.call(this)}return Ne(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.dematerialize=function(){return new Yr(this)};var Wr=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Gr(t,this.keyFn,this.comparer))},e}(Tn),Gr=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e,n=t;return Jt(this.keyFn)&&(n=Xt(this.keyFn)(t))===Qt?this.o.onError(n.e):this.hasCurrentKey&&(e=Xt(this.comparer)(this.currentKey,n))===Qt?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(En);Sn.distinctUntilChanged=function(t,e){return e||(e=Vt),new Wr(this,t,e)};var Kr=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||Jt(e._oN)?Cn(e._oN||zt,e._oE||zt,e._oC||zt):e._oN,this.isStopped=!1,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Ne(n,En),n.prototype.next=function(t){var e=Xt(this.t.onNext).call(this.t,t);e===Qt&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=Xt(this.t.onError).call(this.t,t);return e===Qt?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=Xt(this.t.onCompleted).call(this.t);return t===Qt?this.o.onError(t.e):void this.o.onCompleted()},e}(Tn);Sn.do=Sn.tap=Sn.doAction=function(t,e,n){return new Kr(this,t,e,n)},Sn.doOnNext=Sn.tapOnNext=function(t,e){return this.tap(void 0!==e?function(n){t.call(e,n)}:t)},Sn.doOnError=Sn.tapOnError=function(t,e){return this.tap(zt,void 0!==e?function(n){t.call(e,n)}:t)},Sn.doOnCompleted=Sn.tapOnCompleted=function(t,e){return this.tap(zt,null,void 0!==e?function(){t.call(e)}:t)};var Jr=function(t){function e(e,n,r){this.source=e,this._fn=de(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=Xt(this.source.subscribe).call(this.source,t);return e===Qt&&(this._fn(),o(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=Xt(this._s.dispose).call(this._s);this._fn(),t===Qt&&o(t.e)}},e}(Tn);Sn.finally=function(t,e){return new Jr(this,t,e)};var Qr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=zt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Tn);Sn.ignoreElements=function(){return new Qr(this)};var Xr=function(t){function e(e,n){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zr(t))},e}(Tn),Zr=function(t){function e(e){this._o=e,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._o.onNext(gn(t))},e.prototype.error=function(t){this._o.onNext(bn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(wn()),this._o.onCompleted()},e}(En);Sn.materialize=function(){return new Xr(this)},Sn.repeat=function(t){return In(this,t).concat()},Sn.retry=function(t){return In(this,t).catchError()};var to=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Ne(n,t),n.prototype.subscribeCore=function(t){var n=new ps,r=new ps,o=this._notifier(n),i=o.subscribe(r),s=this.source["@@iterator"](),u={isDisposed:!1},a=new We,c=an.scheduleRecursive(null,function(e,o){if(!u.isDisposed){var i=s.next();if(i.done)return void t.onCompleted();var c=i.value;Kt(c)&&(c=zn(c));var l=new Ve,h=new Ve;a.setDisposable(new Ge(h,l)),l.setDisposable(c.subscribe(function(e){t.onNext(e)},function(e){h.setDisposable(r.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),n.onNext(e),l.dispose()},function(){t.onCompleted()}))}});return new Ke([i,a,c,e(u)])},n}(Tn);Sn.retryWhen=function(t){return new to(U(this),t)};var eo=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Ne(n,t),n.prototype.subscribeCore=function(t){var n=new ps,r=new ps,o=this._notifier(n),i=o.subscribe(r),s=this.source["@@iterator"](),u={isDisposed:!1},a=new We,c=an.scheduleRecursive(null,function(e,o){if(!u.isDisposed){var i=s.next();if(i.done)return void t.onCompleted();var c=i.value;Kt(c)&&(c=zn(c));var l=new Ve,h=new Ve;a.setDisposable(new Ge(h,l)),l.setDisposable(c.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){h.setDisposable(r.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),n.onNext(null),l.dispose()}))}});return new Ke([i,a,c,e(u)])},n}(Tn);Sn.repeatWhen=function(t){return new eo(U(this),t)};var no=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ro(t,this))},e}(Tn),ro=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Xt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Xt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Qt?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(En);Sn.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new no(this,n,e,t)};var oo=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new io(t,this._c))},e}(Tn),io=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.skipLast=function(t){if(0>t)throw new se;return new oo(this,t)},Sn.startWith=function(){var t,e=0;arguments.length&&tn(arguments[0])?(t=arguments[0],e=1):t=sn;for(var n=[],r=e,o=arguments.length;o>r;r++)n.push(arguments[r]);return br.apply(null,[tr(n,t),this])};var so=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(En);Sn.takeLast=function(t){if(0>t)throw new se;var e=this;return new as(function(n){return e.subscribe(new so(n,t))},e)};var uo=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(En);Sn.takeLastBuffer=function(t){if(0>t)throw new se;var e=this;return new as(function(n){return e.subscribe(new uo(n,t))},e)},Sn.windowWithCount=Sn.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new se;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new se;return new as(function(r){function o(){var t=new ps;a.push(t),r.onNext($e(t,s))}var i=new Ve,s=new Je(i),u=0,a=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=a.length;i>r;r++)a[r].onNext(n);var s=u-t+1;s>=0&&s%e==0&&a.shift().onCompleted(),++u%e==0&&o()},function(t){for(;a.length>0;)a.shift().onError(t);r.onError(t)},function(){for(;a.length>0;)a.shift().onCompleted();r.onCompleted()})),s},n)},Sn.selectConcat=Sn.concatMap=function(t,e,n){return Jt(t)&&Jt(e)?this.concatMap(function(n,r){var o=t(n,r);return Kt(o)&&(o=zn(o)),(fe(o)||pe(o))&&(o=Xn(o)),o.map(function(t,o){return e(n,t,r,o)})}):Jt(t)?z(this,t,n):z(this,function(){return t})},Sn.concatMapObserver=Sn.selectConcatObserver=function(t,e,n,r){var o=this,i=de(t,r,2),s=de(e,r,1),u=de(n,r,0);return new as(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(e){return void t.onError(e)}Kt(r)&&(r=zn(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(e){return void t.onError(e)}Kt(n)&&(n=zn(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(e){return void t.onError(e)}Kt(e)&&(e=zn(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var ao=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(En);Sn.defaultIfEmpty=function(e){var n=this;return e===t&&(e=null),new as(function(t){return n.subscribe(new ao(t,e))},n)},Y.prototype.push=function(t){var e=-1===H(this.set,t,this.comparer);return e&&this.set.push(t),e};var co=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lo(t,this._keyFn,this._cmpFn))},e}(Tn),lo=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new Y(r),t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=t;return Jt(this._keyFn)&&(e=Xt(this._keyFn)(t))===Qt?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.distinct=function(t,e){return e||(e=Vt),new co(this,t,e)},Sn.groupBy=function(t,e){return this.groupByUntil(t,e,or)},Sn.groupByUntil=function(e,n,r){var o=this;return new as(function(i){var s=new ki,u=new Fe,a=new Je(u),c=function(t){return function(e){e.onError(t)}};return u.add(o.subscribe(function(o){var l=Xt(e)(o);if(l===Qt)return s.forEach(c(l.e)),i.onError(l.e);var h=!1,p=s.get(l);if(p===t&&(p=new ps,s.set(l,p),h=!0),h){var f=new hs(l,p,a),d=new hs(l,p),m=Xt(r)(d);if(m===Qt)return s.forEach(c(m.e)),i.onError(m.e);i.onNext(f);var v=new Ve;u.add(v),v.setDisposable(m.take(1).subscribe(zt,function(t){s.forEach(c(t)),i.onError(t)},function(){s.delete(l)&&p.onCompleted(),u.remove(v)}))}var y=o;return Jt(n)&&(y=Xt(n)(o))===Qt?(s.forEach(c(y.e)),i.onError(y.e)):void p.onNext(y)},function(t){s.forEach(c(t)),i.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),i.onCompleted()})),a},o)};var ho=function(t){function e(e,n,r){this.source=e,this.selector=de(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,En.call(this)}return Ne(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Ne(r,En),r.prototype.next=function(t){var e=Xt(this.selector)(t,this.i++,this.source);return e===Qt?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Tn);Sn.map=Sn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof ho?this.internalMap(n,e):new ho(this,n,e)},Sn.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;t>n;n++)e[n]=arguments[n];return this.map(V(e,t))},Sn.flatMap=Sn.selectMany=Sn.mergeMap=function(t,e,n){return new An(this,t,e,n).mergeAll()},Sn.flatMapObserver=Sn.selectManyObserver=function(t,e,n,r){var o=this;return new as(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(t){return void i.onError(t)}Kt(n)&&(n=zn(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(t){return void i.onError(t)}Kt(n)&&(n=zn(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(t){return void i.onError(t)}Kt(t)&&(t=zn(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},Sn.flatMapLatest=Sn.switchMap=function(t,e,n){return new An(this,t,e,n).switchLatest()};var po=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ne(n,En),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Tn);Sn.skip=function(t){if(0>t)throw new se;return new po(this,t)};var fo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mo(t,this))},e}(Tn),mo=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Ne(e,t),e.prototype.next=function(t){if(!this._r){var e=Xt(this._p._fn)(t,this._i++,this._p);if(e===Qt)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.skipWhile=function(t,e){var n=de(t,e,3);return new fo(this,n)};var vo=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ne(n,En),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Tn);Sn.take=function(t,e){if(0>t)throw new se;return 0===t?Kn(e):new vo(this,t)};var yo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _o(t,this))},e}(Tn),_o=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){return this._r&&(this._r=Xt(this._p._fn)(t,this._i++,this._p),this._r===Qt)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.takeWhile=function(t,e){var n=de(t,e,3);return new yo(this,n)};var go=function(t){function e(e,n,r){this.source=e,this.predicate=de(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,En.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Ne(r,En),r.prototype.next=function(t){var e=Xt(this.predicate)(t,this.i++,this.source);return e===Qt?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Tn);Sn.filter=Sn.where=function(t,e){return this instanceof go?this.internalFilter(t,e):new go(this,t,e)};var bo=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new wo(t,this._k,this._c))},e}(Tn),wo=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=Xt(this._k)(t);if(e===Qt)return this._o.onError(e.e);var n=0;if(this._hv){if((n=Xt(this._c)(e,this._v))===Qt)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(En),xo=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Co(t,this))},e}(Tn),Co=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Xt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Xt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Qt?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new oe),this._o.onCompleted()},e}(En);Sn.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new xo(this,n,e,t)};var So=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Eo(t,this._fn,this.source))},e}(Tn),Eo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=Xt(this._fn)(t,this._i++,this._s);return e===Qt?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(En);Sn.some=function(t,e){var n=de(t,e,3);return new So(this,n)};var ko=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Do(t))},e}(Tn),Do=function(t){function e(e){this._o=e,t.call(this)}return Ne(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(En);Sn.isEmpty=function(){return new ko(this)};var Mo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Oo(t,this._fn,this.source))},e}(Tn),Oo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=Xt(this._fn)(t,this._i++,this._s);return e===Qt?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(En);Sn.every=function(t,e){var n=de(t,e,3);return new Mo(this,n)};var Po=function(t){function e(e,n,r){var o=+r||0;Math.abs(o)===1/0&&(o=0),this.source=e,this._elem=n,this._n=o,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),Ue):this.source.subscribe(new To(t,this._elem,this._n))},e}(Tn),To=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}return Ne(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(En);Sn.includes=function(t,e){return new Po(this,t,e)};var Ao=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new No(t,this._fn,this.source))},e}(Tn),No=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){if(this._fn){var e=Xt(this._fn)(t,this._i++,this._s);if(e===Qt)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(En);Sn.count=function(t,e){var n=de(t,e,3);return new Ao(this,n)};var jo=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),Ue):this.source.subscribe(new $o(t,this._e,this._n))},e}(Tn),$o=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(En);Sn.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new jo(this,t,n)};var qo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Io(t,this._fn,this.source))},e}(Tn),Io=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){if(this._fn){var e=Xt(this._fn)(t,this._i++,this._s);if(e===Qt)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(En);Sn.sum=function(t,e){var n=de(t,e,3);return new qo(this,n)},Sn.minBy=function(t,e){return e||(e=Wt),new bo(this,t,function(t,n){return-1*e(t,n)})},Sn.min=function(t){
return this.minBy(Ht,t).map(W)},Sn.maxBy=function(t,e){return e||(e=Wt),new bo(this,t,e)},Sn.max=function(t){return this.maxBy(Ht,t).map(W)};var Fo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Bo(t,this._fn,this.source))},e}(Tn),Bo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){if(this._fn){var e=Xt(this._fn)(t,this._c++,this._s);if(e===Qt)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new oe):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(En);Sn.average=function(t,e){var n,r=this;return Jt(t)&&(n=de(t,e,3)),new Fo(r,n)},Sn.sequenceEqual=function(t,e){var n=this;return e||(e=Vt),new as(function(r){var o=!1,i=!1,s=[],u=[],a=n.subscribe(function(t){if(u.length>0){var n=u.shift(),o=Xt(e)(n,t);if(o===Qt)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(fe(t)||pe(t))&&(t=Xn(t)),Kt(t)&&(t=zn(t));var c=t.subscribe(function(t){if(s.length>0){var n=s.shift(),i=Xt(e)(n,t);if(i===Qt)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new Ge(a,c)},n)};var Lo=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ro(t,this._i,this._d))},e}(Tn),Ro=function(e){function n(t,n,r){this._o=t,this._i=n,this._d=r,e.call(this)}return Ne(n,e),n.prototype.next=function(t){0==this._i--&&(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._d===t?this._o.onError(new se):(this._o.onNext(this._d),this._o.onCompleted())},n}(En);Sn.elementAt=function(t,e){if(0>t)throw new se;return new Lo(this,t,e)};var Uo=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,e.call(this)}return Ne(n,e),n.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=Xt(this._obj.predicate)(t,this._i++,this._s);if(n===Qt)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===t?this._o.onError(new oe):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(En);Sn.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Jt(n.predicate)){var o=n.predicate;n.predicate=de(o,n.thisArg,3)}return new as(function(t){return r.subscribe(new Uo(t,n,r))},r)};var zo=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ho(t,this._obj,this.source))},e}(Tn),Ho=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,e.call(this)}return Ne(n,e),n.prototype.next=function(t){if(this._obj.predicate){var e=Xt(this._obj.predicate)(t,this._i++,this._s);if(e===Qt)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._obj.defaultValue===t?this._o.onError(new oe):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(En);Sn.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Jt(t.predicate)){var e=t.predicate;t.predicate=de(e,t.thisArg,3)}return new zo(this,t)};var Yo=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vo(t,this._obj,this.source))},e}(Tn),Vo=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,e.call(this)}return Ne(n,e),n.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=Xt(this._obj.predicate)(t,this._i++,this._s);if(n===Qt)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===t?this._o.onError(new oe):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(En);Sn.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Jt(t.predicate)){var e=t.predicate;t.predicate=de(e,t.thisArg,3)}return new Yo(this,t)};var Wo=function(t){function e(e,n,r,o){this._o=e,this._s=n,this._cb=r,this._y=o,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=Xt(this._cb)(t,this._i,this._s);return e===Qt?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(En);Sn.find=function(t,e){return G(this,t,e,!1)},Sn.findIndex=function(t,e){return G(this,t,e,!0)};var Go=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ko(t))},e}(Tn),Ko=function(t){function e(e){this._o=e,this._s=new Rt.Set,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(En);Sn.toSet=function(){if(void 0===Rt.Set)throw new TypeError;return new Go(this)};var Jo=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Qo(t,this._k,this._e))},e}(Tn),Qo=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new Rt.Map,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=Xt(this._k)(t);if(e===Qt)return this._o.onError(e.e);var n=t;return this._e&&(n=Xt(this._e)(t))===Qt?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(En);Sn.toMap=function(t,e){if(void 0===Rt.Map)throw new TypeError;return new Jo(this,t,e)};var Xo=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zo(t,this._b,this._e))},e}(Tn),Zo=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.slice=function(t,e){var n=t||0;if(0>n)throw new Ut.ArgumentOutOfRangeError;if("number"==typeof e&&n>e)throw new Ut.ArgumentOutOfRangeError;return new Xo(this,n,e)};var ti=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),Ue):this.source.subscribe(new ei(t,this._e,this._n))},e}(Tn),ei=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(En);Sn.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new ti(this,t,n)},Pn.wrap=function(t){function e(){return Pn.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var ni=Pn.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,o=arguments.length;o>r;r++)n.push(arguments[r]);return new as(function(r){function o(e){var n=Xt(t.next).call(t,e);return n===Qt?r.onError(n.e):void s(n)}function i(e){var n=Xt(t.next).call(t,e);return n===Qt?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=K.call(e,t.value),s=null,a=!1;Pn.isObservable(n)?u.add(n.subscribe(function(t){a=!0,s=t},i,function(){a&&o(s)})):i(new TypeError("type not supported"))}var u=new Fe;return Jt(t)&&(t=t.apply(e,n)),t&&Jt(t.next)?(o(),u):(r.onNext(t),r.onCompleted())})};Pn.start=function(t,e,n){return ri(t,e,n)()};var ri=Pn.toAsync=function(t,e,n){return tn(n)||(n=fn),function(){var r=arguments,o=new fs;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(t){return void o.onError(t)}o.onNext(n),o.onCompleted()}),o.asObservable()}};Pn.fromCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return nt(t,e,n,o)}},Pn.fromNodeCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return ot(t,e,n,o)}},ut.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Ut.config.useNativeEvents=!1;var oi=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return Jt(e)&&(n=Xt(e).apply(null,arguments))===Qt?t.onError(n.e):void t.onNext(n)}}return Ne(e,t),e.prototype.subscribeCore=function(t){return at(this._el,this._n,n(t,this._fn))},e}(Tn);Pn.fromEvent=function(t,e,n){return t.addListener?si(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):Ut.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new oi(t,e,n).publish().refCount():si(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var ii=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return Jt(e)&&(n=Xt(e).apply(null,arguments))===Qt?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(Jt(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Tn),si=Pn.fromEventPattern=function(t,e,n){return new ii(t,e,n).publish().refCount()};Pn.startAsync=function(t){var e=Xt(t)();return e===Qt?lr(e.e):zn(e)};var ui=function(t){function e(e,n){this.source=e,this.controller=new ps,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ne(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=Ue,o=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=Ue)});return new Ke([n,r,o])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Pn);Sn.pausable=function(t){return new ui(this,t)};var ai=function(e){function n(t,n){this.source=t,this.controller=new ps,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,e.call(this)}return Ne(n,e),n.prototype._subscribe=function(e){function n(){for(;o.length>0;)e.onNext(o.shift())}var r,o=[];return ct(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(i){r!==t&&i.shouldFire!==r?(r=i.shouldFire,i.shouldFire&&n()):(r=i.shouldFire,i.shouldFire?e.onNext(i.data):o.push(i.data))},function(t){n(),e.onError(t)},function(){n(),e.onCompleted()})},n.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},n.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},n}(Pn);Sn.pausableBuffered=function(t){return new ai(this,t)};var ci=function(t){function e(e,n,r){t.call(this),this.subject=new li(n,r),this.source=e.multicast(this.subject).refCount()}return Ne(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Pn),li=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new ps,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||an}return Ne(e,t),je(e.prototype,xn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(mn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(mn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(mn.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n);return!e.hasCompleted&&!e.hasFailed&&r>0?(e.requestedCount=r,Re(function(){e.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Pn);Sn.controlled=function(t,e){return t&&tn(t)&&(e=t,t=!0),null==t&&(t=!0),new ci(this,t,e)};var hi=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}Ne(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new Ge(this.subscription,fn.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return Ne(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=fn.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(En);return e}(Pn);ci.prototype.stopAndWait=function(){return new hi(this)};var pi=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}Ne(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new Ge(this.subscription,fn.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return Ne(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=fn.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(En);return e}(Pn);ci.prototype.windowed=function(t){return new pi(this,t)},Sn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var fi=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Ge(this._fn2(e).subscribe(t),e.connect())},e}(Tn);Sn.multicast=function(t,e){return Jt(t)?new fi(this,t,e):new vi(this,t)},Sn.publish=function(t){return t&&Jt(t)?this.multicast(function(){return new ps},t):this.multicast(new ps)},Sn.share=function(){return this.publish().refCount()},Sn.publishLast=function(t){return t&&Jt(t)?this.multicast(function(){return new fs},t):this.multicast(new fs)},Sn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new ds(e)},t):this.multicast(new ds(t))},Sn.shareValue=function(t){return this.publishValue(t).refCount()},Sn.replay=function(t,e,n,r){return t&&Jt(t)?this.multicast(function(){return new ms(e,n,r)},t):this.multicast(new ms(e,n,r))},Sn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var di=function(t,e){this._s=t,this._o=e};di.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var mi=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(Tn),vi=Ut.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Ne(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return Ue;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new mi(this)},e}(Pn);Sn.singleInstance=function(){function t(){return r||(r=!0,e=n.finally(function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new as(function(e){return t().subscribe(e)})},Sn.join=function(t,e,n,r){var o=this;return new as(function(i){var s=new Fe,u=!1,a=!1,c=0,l=0,h=new ki,p=new ki,f=function(t){i.onError(t)};return s.add(o.subscribe(function(t){var n=c++,o=new Ve;h.set(n,t),s.add(o);var a=Xt(e)(t);return a===Qt?i.onError(a.e):(o.setDisposable(a.take(1).subscribe(zt,f,function(){h.delete(n)&&0===h.size&&u&&i.onCompleted(),s.remove(o)})),void p.forEach(function(e){var n=Xt(r)(t,e);return n===Qt?i.onError(n.e):void i.onNext(n)}))},f,function(){u=!0,(a||0===h.size)&&i.onCompleted()})),s.add(t.subscribe(function(t){var e=l++,o=new Ve;p.set(e,t),s.add(o);var u=Xt(n)(t);return u===Qt?i.onError(u.e):(o.setDisposable(u.take(1).subscribe(zt,f,function(){p.delete(e)&&0===p.size&&a&&i.onCompleted(),s.remove(o)})),void h.forEach(function(e){var n=Xt(r)(e,t);return n===Qt?i.onError(n.e):void i.onNext(n)}))},f,function(){a=!0,(u||0===p.size)&&i.onCompleted()})),s},o)},Sn.groupJoin=function(t,e,n,r){var o=this;return new as(function(i){function s(t){}var u=new Fe,a=new Je(u),c=new ki,l=new ki,h=0,p=0,s=function(t){return function(e){e.onError(t)}};return u.add(o.subscribe(function(t){var n=new ps,o=h++;c.set(o,n);var p=Xt(r)(t,$e(n,a));if(p===Qt)return c.forEach(s(p.e)),i.onError(p.e);i.onNext(p),l.forEach(function(t){n.onNext(t)});var f=new Ve;u.add(f);var d=Xt(e)(t);return d===Qt?(c.forEach(s(d.e)),i.onError(d.e)):void f.setDisposable(d.take(1).subscribe(zt,function(t){c.forEach(s(t)),i.onError(t)},function(){c.delete(o)&&n.onCompleted(),u.remove(f)}))},function(t){c.forEach(s(t)),i.onError(t)},function(){i.onCompleted()})),u.add(t.subscribe(function(t){var e=p++;l.set(e,t);var r=new Ve;u.add(r);var o=Xt(n)(t);return o===Qt?(c.forEach(s(o.e)),i.onError(o.e)):(r.setDisposable(o.take(1).subscribe(zt,function(t){c.forEach(s(t)),i.onError(t)},function(){l.delete(e),u.remove(r)})),void c.forEach(function(e){e.onNext(t)}))},function(t){c.forEach(s(t)),i.onError(t)})),a},o)},Sn.buffer=function(){return this.window.apply(this,arguments).flatMap(L)},Sn.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?ht.call(this,t):"function"==typeof t?pt.call(this,t):lt.call(this,t,e)};var yi=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _i(t))},e}(Tn),_i=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.pairwise=function(){return new yi(this)},Sn.partition=function(t,e){var n=de(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var gi=function(t){function e(t,e){this.c=t,this.s=e}return Ne(e,t),e.prototype[le]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Nn);Sn.letBind=Sn.let=function(t){return t(this)},Pn.if=function(t,e,n){return Vn(function(){return n||(n=Kn()),Kt(e)&&(e=zn(e)),Kt(n)&&(n=zn(n)),"function"==typeof n.now&&(n=Kn(n)),t()?e:n})},Pn.for=Pn.forIn=function(t,e,n){return Bn(t,e,n).concat()};var bi=Pn.while=Pn.whileDo=function(t,e){return Kt(e)&&(e=zn(e)),ft(t,e).concat()};Sn.doWhile=function(t){return br([this,bi(t,this)])},Pn.case=function(t,e,n){return Vn(function(){Kt(n)&&(n=zn(n)),n||(n=Kn()),tn(n)&&(n=Kn(n));var r=e[t()];return Kt(r)&&(r=zn(r)),r||n})};var wi=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],o=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var i=new Ve;r.d.add(i),i.setDisposable(n.subscribe(new xi(r,o,i))),e([r,o])}return Ne(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new We,n=new Fe(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Tn),xi=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=Xt(this._p._fn)(t);return e===Qt?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),0===--this._s.activeCount&&this._s.o.onCompleted()},e}(En);Sn.expand=function(t,e){return tn(e)||(e=an),new wi(this,t,e)};var Ci=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),Ue;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new Fe,o=0,i=this._sources.length;i>o;o++){var s=this._sources[o];Kt(s)&&(s=zn(s)),r.add(s.subscribe(new Si(t,n,o,this._cb,r)))}return r},e}(Tn),Si=function(t){function e(e,n,r,o,i){this._o=e,this._s=n,this._i=r,this._cb=o,this._subs=i,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=Xt(this._cb).apply(null,this._s.results);if(e===Qt)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(En);Pn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Jt(e[t-1])?e.pop():I;return Array.isArray(e[0])&&(e=e[0]),new Ci(e,r)},Sn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Pn.forkJoin.apply(null,e)},Sn.manySelect=Sn.extend=function(t,e){tn(e)||(e=Ut.Scheduler.immediate);var n=this;return Vn(function(){var r;return n.map(function(t){var e=new Ei(t);return r&&r.onNext(t),r=e,e}).tap(zt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Ei=function(t){function e(e){t.call(this),this.head=e,this.tail=new fs}return Ne(e,t),je(e.prototype,xn,{_subscribe:function(t){var e=new Fe;return e.add(an.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Pn.empty())},onError:function(t){this.onNext(Pn.throw(t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Pn),ki=Rt.Map||function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},e.prototype.get=function(e){var n=this._keys.indexOf(e);return-1===n?t:this._values[n]},e.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},e.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},e}();dt.prototype.and=function(t){return new dt(this.patterns.concat(t))},dt.prototype.thenDo=function(t){return new mt(this,t)},mt.prototype.activate=function(t,e,n){for(var r=[],o=vt(e),i=0,s=this.expression.patterns.length;s>i;i++)r.push(_t(t,this.expression.patterns[i],o));var u=new gt(r,yt(this,e),function(){for(var t=0,e=r.length;e>t;t++)r[t].removeActivePlan(u);n(u)});for(i=0,s=r.length;s>i;i++)r[i].addActivePlan(u);return u},gt.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},gt.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],o=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(o=!0);if(o)this.onCompleted();else{this.dequeue();var i=[];for(t=0,e=r.length;t<r.length;t++)i.push(r[t].value);this.onNext.apply(this,i)}}};var Di=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new Ve,this.isDisposed=!1}Ne(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=zt,n.completed=zt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(En);Sn.and=function(t){return new dt([this,t])},Sn.thenDo=function(t){return new dt([this]).thenDo(t)},Pn.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new as(function(e){var n=[],r=new ki,o=Cn(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var i=0,s=t.length;s>i;i++)n.push(t[i].activate(r,o,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(t){return lr(t).subscribe(e)}var u=new Fe;return r.forEach(function(t){t.subscribe(),u.add(t)}),u})};var Mi=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Tn),Oi=Pn.interval=function(t,e){return xt(t,t,tn(e)?e:fn)};Pn.timer=function(e,n,r){var o;return tn(r)||(r=fn),null!=n&&"number"==typeof n?o=n:tn(n)&&(r=n),(e instanceof Date||"number"==typeof e)&&o===t?bt(e,r):e instanceof Date&&o!==t?wt(e,n,r):xt(e,o,r)},Sn.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return tn(n)||(n=fn),e instanceof Date?St(this,e,n):Ct(this,e,n)}if(Pn.isObservable(t)||Jt(t))return Et(this,t,arguments[1]);throw new Error("Invalid arguments")};var Pi=function(t){function e(e,n,r){tn(r)||(r=fn),this.source=e,this._dt=n,this._s=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We;return new Ge(this.source.subscribe(new Ti(t,this._dt,this._s,e)),e)},e}(Tn),Ti=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new Ve;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(En);Sn.debounce=function(){if(Jt(arguments[0]))return kt(this,arguments[0]);if("number"==typeof arguments[0])return new Pi(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Sn.windowWithTime=Sn.windowTime=function(t,e,n){var r,o=this;return null==e&&(r=t),tn(n)||(n=fn),"number"==typeof e?r=e:tn(e)&&(r=t,n=e),new as(function(e){function i(){var t=new Ve,o=!1,s=!1;h.setDisposable(t),c===a?(o=!0,s=!0):a>c?o=!0:s=!0;var f=o?c:a,d=f-p;p=f,o&&(c+=r),s&&(a+=r),t.setDisposable(n.scheduleFuture(null,d,function(){if(s){var t=new ps;l.push(t),e.onNext($e(t,u))}o&&l.shift().onCompleted(),i()}))}var s,u,a=r,c=t,l=[],h=new We,p=0;return s=new Fe(h),u=new Je(s),l.push(new ps),e.onNext($e(l[0],u)),i(),s.add(o.subscribe(function(t){for(var e=0,n=l.length;n>e;e++)l[e].onNext(t)},function(t){for(var n=0,r=l.length;r>n;n++)l[n].onError(t);e.onError(t)},function(){for(var t=0,n=l.length;n>t;t++)l[t].onCompleted()
;e.onCompleted()})),u},o)},Sn.windowWithTimeOrCount=Sn.windowTimeOrCount=function(t,e,n){var r=this;return tn(n)||(n=fn),new as(function(o){function i(e){var r=new Ve;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===l){c=0;var t=++l;h.onCompleted(),h=new ps,o.onNext($e(h,a)),i(t)}}))}var s=new We,u=new Fe(s),a=new Je(u),c=0,l=0,h=new ps;return o.onNext($e(h,a)),i(0),u.add(r.subscribe(function(t){var n=0,r=!1;h.onNext(t),++c===e&&(r=!0,c=0,n=++l,h.onCompleted(),h=new ps,o.onNext($e(h,a))),r&&i(n)},function(t){h.onError(t),o.onError(t)},function(){h.onCompleted(),o.onCompleted()})),a},r)},Sn.bufferWithTime=Sn.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(L)},Sn.bufferWithTimeOrCount=Sn.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(L)};var Ai=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ni(t,this._s))},e}(Tn),Ni=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.timeInterval=function(t){return tn(t)||(t=fn),new Ai(this,t)};var ji=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new $i(t,this._s))},e}(Tn),$i=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.timestamp=function(t){return tn(t)||(t=fn),new ji(this,t)};var qi=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new Ve};return e.sourceSubscription.setDisposable(this.source.subscribe(new Fi(e))),new Ge(e.sourceSubscription,this._sampler.subscribe(new Ii(e)))},e}(Tn),Ii=function(t){function e(e){this._s=e,t.call(this)}return Ne(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(En),Fi=function(t){function e(e){this._s=e,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(En);Sn.sample=function(t,e){return tn(e)||(e=fn),"number"==typeof t?new qi(this,Oi(t,e)):new qi(this,t)};var Bi=Ut.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};Bi.prototype=Object.create(Error.prototype),Sn.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Mt(this,t,arguments[1],arguments[2]);if(Pn.isObservable(t)||Jt(t))return Dt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var Li=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=Xt(t.self._itrFn)(t.newState),t.newState===Qt)return t.o.onError(t.newState.e);if(t.hasResult=Xt(t.self._cndFn)(t.newState),t.hasResult===Qt)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=Xt(t.self._resFn)(t.newState),t.result===Qt)return t.o.onError(t.result.e);var n=Xt(t.self._timeFn)(t.newState);if(n===Qt)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Ne(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Tn);Pn.generateWithAbsoluteTime=function(t,e,n,r,o,i){return tn(i)||(i=fn),new Li(t,e,n,r,o,i)};var Ri=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=Xt(t.self._itrFn)(t.newState),t.newState===Qt)return t.o.onError(t.newState.e);if(t.hasResult=Xt(t.self._cndFn)(t.newState),t.hasResult===Qt)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=Xt(t.self._resFn)(t.newState),t.result===Qt)return t.o.onError(t.result.e);var n=Xt(t.self._timeFn)(t.newState);if(n===Qt)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Ne(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Tn);Pn.generateWithRelativeTime=function(t,e,n,r,o,i){return tn(i)||(i=fn),new Ri(t,e,n,r,o,i)};var Ui=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1];e[2].setDisposable(n.subscribe(r))}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new We;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Tn);Sn.delaySubscription=function(t,e){return tn(e)||(e=fn),new Ui(this,t,e)};var zi=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Hi(t,this))},e}(Tn),Hi=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(En);Sn.skipLastWithTime=function(t,e){return tn(e)||(e=fn),new zi(this,t,e)};var Yi=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vi(t,this._d,this._s))},e}(Tn),Vi=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(En);Sn.takeLastWithTime=function(t,e){return tn(e)||(e=fn),new Yi(this,t,e)},Sn.takeLastBufferWithTime=function(t,e){var n=this;return tn(e)||(e=fn),new as(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),i=[];o.length>0;){var s=o.shift();n-s.interval<=t&&i.push(s.value)}r.onNext(i),r.onCompleted()})},n)};var Wi=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return Ne(e,t),e.prototype.subscribeCore=function(t){return new Ge(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Tn);Sn.takeWithTime=function(t,e){return tn(e)||(e=fn),new Wi(this,t,e)};var Gi=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return Ne(e,t),e.prototype.subscribeCore=function(t){return new Ge(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new Ki(t,this)))},e}(Tn),Ki=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.skipWithTime=function(t,e){return tn(e)||(e=fn),new Gi(this,t,e)};var Ji=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return Ne(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new Ge(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new Qi(t,this)))},e}(Tn),Qi=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(En);Sn.skipUntilWithTime=function(t,e){return tn(e)||(e=fn),new Ji(this,t,e)},Sn.takeUntilWithTime=function(t,e){tn(e)||(e=fn);var n=this;return new as(function(r){return new Ge(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},Sn.throttle=function(t,e){tn(e)||(e=fn);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new as(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var Xi=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){var e=Xt(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Qt&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(En);Sn.transduce=function(t){var e=this;return new as(function(n){var r=t(Ot(n));return e.subscribe(new Xi(n,r))},e)};var Zi=function(t){function e(e){this.source=e,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){var e=new Ve,n=new Fe,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new ts(r))),n},e}(Tn),ts=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return Ne(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,Kt(t)&&(t=zn(t));var e=new Ve;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},Ne(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(En);Sn.switchFirst=function(){return new Zi(this)},Sn.flatMapFirst=Sn.exhaustMap=function(t,e,n){return new An(this,t,e,n).switchFirst()},Sn.flatMapWithMaxConcurrent=Sn.flatMapMaxConcurrent=function(t,e,n,r){return new An(this,e,n,r).merge(t)};var es=Ut.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new qe(1024),t.call(this)}Ne(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=ce,n.toAbsoluteTime=ce,n.toRelativeTime=ce,n.schedulePeriodic=function(t,e,n){return new rn(this,t,e,n).start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new se;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new se;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new se;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return o.queue.remove(i),n(t,e)}var o=this,i=new Qe(this,t,r,e,this.comparer);return this.queue.enqueue(i),i.disposable},e}(Xe);Ut.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,o=n||Wt;t.call(this,r,o)}Ne(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(Ut.VirtualTimeScheduler),Pt.prototype.equals=function(t){return t===this||null!=t&&("N"===t.kind&&this.predicate(t.value))},Tt.prototype.equals=function(t){return t===this||null!=t&&("E"===t.kind&&this.predicate(t.error))};var ns=Ut.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new rs(t,new Pt(e)):new rs(t,mn.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new rs(t,new Tt(e)):new rs(t,mn.createOnError(e))},onCompleted:function(t){return new rs(t,mn.createOnCompleted())},subscribe:function(t,e){return new os(t,e)}},rs=Ut.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Vt};rs.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},rs.prototype.toString=function(){return this.value.toString()+"@"+this.time};var os=Ut.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};os.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},os.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"},(Ut.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)}).prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var is=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}Ne(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new rs(this.scheduler.clock,mn.createOnNext(t)))},n.onError=function(t){this.messages.push(new rs(this.scheduler.clock,mn.createOnError(t)))},n.onCompleted=function(){this.messages.push(new rs(this.scheduler.clock,mn.createOnCompleted()))},e}(xn);At.prototype.then=function(e,n){var r=this;this.subscriptions.push(new os(this.scheduler.clock));var o,i=this.subscriptions.length-1,s=Ut.Observer.create(function(n){var u=e(n);if(u&&"function"==typeof u.then)o=u;else{var a=r.scheduler.clock;o=new At(r.scheduler,[Ut.ReactiveTest.onNext(a,t),Ut.ReactiveTest.onCompleted(a)])}var c=r.observers.indexOf(s);r.observers.splice(c,1),r.subscriptions[i]=new os(r.subscriptions[i].subscribe,r.scheduler.clock)},function(t){n(t);var e=r.observers.indexOf(s);r.observers.splice(e,1),r.subscriptions[i]=new os(r.subscriptions[i].subscribe,r.scheduler.clock)});return this.observers.push(s),o||new At(this.scheduler,this.messages)};var ss=function(t){function e(e,n){t.call(this);var r,o,i=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;u>s;s++)r=this.messages[s],o=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=i.observers.slice(0),n=0,r=e.length;r>n;n++)t.accept(e[n]);return Ue})}(o)}return Ne(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new os(this.scheduler.clock));var n=this.subscriptions.length-1;return Re(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new os(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Pn),us=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return Ne(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new os(this.scheduler.clock));for(var o=this.subscriptions.length-1,i=new Fe,s=0,u=this.messages.length;u>s;s++)e=this.messages[s],n=e.value,function(n){i.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),Ue}))}(n);return Re(function(){r.subscriptions[o]=new os(r.subscriptions[o].subscribe,r.scheduler.clock),i.dispose()})},e}(Pn);Ut.TestScheduler=function(t){function e(t,e){return t>e?1:e>t?-1:0}function n(){t.call(this,0,e)}return Ne(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=ns.created),null==e.subscribed&&(e.subscribed=ns.subscribed),null==e.disposed&&(e.disposed=ns.disposed);var n,r,o=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),Ue}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(o),Ue}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),Ue}),this.start(),o},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new ss(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new us(this,t)},n.prototype.createResolvedPromise=function(t,e){return new At(this,[Ut.ReactiveTest.onNext(t,e),Ut.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new At(this,[Ut.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new is(this)},n}(es);var as=Ut.AnonymousObservable=function(t){function e(t){return t&&Jt(t.dispose)?t:Jt(t)?Re(t):Ue}function n(t,n){var r=n[0],i=n[1],s=Xt(i.__subscribe).call(i,r);s!==Qt||r.fail(Qt.e)||o(Qt.e),r.setDisposable(e(s))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Ne(r,t),r.prototype._subscribe=function(t){var e=new cs(t),r=[e,this];return an.scheduleRequired()?an.schedule(r,n):n(null,r),e},r}(Pn),cs=function(t){function e(e){t.call(this),this.observer=e,this.m=new Ve}Ne(e,t);var n=e.prototype;return n.next=function(t){var e=Xt(this.observer.onNext).call(this.observer,t);e===Qt&&(this.dispose(),o(e.e))},n.error=function(t){var e=Xt(this.observer.onError).call(this.observer,t);this.dispose(),e===Qt&&o(e.e)},n.completed=function(){var t=Xt(this.observer.onCompleted).call(this.observer);this.dispose(),t===Qt&&o(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(En),ls=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return Ne(e,t),e.prototype.subscribeCore=function(t){return new Ge(this._m.getDisposable(),this._u.subscribe(t))},e}(Tn),hs=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new ls(r,n):n}return Ne(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Pn),ps=Ut.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Ne(e,t),je(e.prototype,xn.prototype,{_subscribe:function(t){return He(this),this.isStopped?this.hasError?(t.onError(this.error),Ue):(t.onCompleted(),Ue):(this.observers.push(t),new di(this,t))},hasObservers:function(){return He(this),this.observers.length>0},onCompleted:function(){if(He(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=n(this.observers),r=e.length;r>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(He(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,r=n(this.observers),o=r.length;o>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){if(He(this),!this.isStopped)for(var e=0,r=n(this.observers),o=r.length;o>e;e++)r[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new vs(t,e)},e}(Pn),fs=Ut.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Ne(e,t),je(e.prototype,xn.prototype,{_subscribe:function(t){return He(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),Ue):(this.observers.push(t),new di(this,t))},hasObservers:function(){return He(this),this.observers.length>0},onCompleted:function(){var t,e;if(He(this),!this.isStopped){this.isStopped=!0;var r=n(this.observers),e=r.length;if(this.hasValue)for(t=0;e>t;t++){var o=r[t];o.onNext(this.value),o.onCompleted()}else for(t=0;e>t;t++)r[t].onCompleted();this.observers.length=0}},onError:function(t){if(He(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,r=n(this.observers),o=r.length;o>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){He(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Pn),ds=Ut.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Ne(e,t),je(e.prototype,xn.prototype,{_subscribe:function(t){return He(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),Ue):(this.observers.push(t),t.onNext(this.value),new di(this,t))},getValue:function(){return He(this),this.hasError&&o(this.error),this.value},hasObservers:function(){return He(this),this.observers.length>0},onCompleted:function(){if(He(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=n(this.observers),r=e.length;r>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(He(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,r=n(this.observers),o=r.length;o>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){if(He(this),!this.isStopped){this.value=t;for(var e=0,r=n(this.observers),o=r.length;o>e;e++)r[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Pn),ms=Ut.ReplaySubject=function(t){function e(t,e){return Re(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function r(e,n,r){this.bufferSize=null==e?o:e,this.windowSize=null==n?o:n,this.scheduler=r||an,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var o=Math.pow(2,53)-1;return Ne(r,t),je(r.prototype,xn.prototype,{_subscribe:function(t){He(this);var n=new Mn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var o=0,i=this.q.length;i>o;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return He(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(He(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var r=0,o=n(this.observers),i=o.length;i>r;r++){var s=o[r];s.onNext(t),s.ensureActive()}}},onError:function(t){if(He(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var r=0,o=n(this.observers),i=o.length;i>r;r++){var s=o[r];s.onError(t),s.ensureActive()}this.observers.length=0}},onCompleted:function(){if(He(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,r=n(this.observers),o=r.length;o>e;e++){var i=r[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),r}(Pn),vs=Ut.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Ne(e,t),je(e.prototype,xn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Pn);Ut.Pauser=function(t){function e(){t.call(this)}return Ne(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(ps),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Rt.Rx=Ut,define("rx",[],function(){return Ut})):jt&&$t?Bt?($t.exports=Ut).Rx=Ut:jt.Rx=Ut:Rt.Rx=Ut;var ys=c()}.call(this);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/items-base",["./paging-model","rx"],function(t,e){var n;return n=function(t){function n(t){n.__super__.constructor.call(this,t),this.items=[],this.keys={},this.index=0,this.subject=new e.Subject}return __extends(n,t),n.prototype.getKey=function(t,e){var n,r,o,i,s,u,a,c,l;if(i=this.options.keys,u=null!=i?i.length:void 0){for(a=this.options.keysSeperator||"_",o="",s=u-1,n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)r=i[n],o+=t[r]+a;e?c=t.parent:(r=i[s],c=t[r]),o+=c}else o=t._id;return o},n.prototype.getItem=function(t){return this.keys[t]},n.prototype.getItemByIds=function(t,e){var n;return n=this.getKey(t,e),this.getItem(n)},n.prototype.getModels=function(){var t;return function(){var e,n,r,o;for(r=this.items,o=[],e=0,n=r.length;e<n;e++)t=r[e],o.push(t.model);return o}.call(this)},n.prototype.addItems=function(t){var e,n,r,o,i;if(!t)return[];if(r=[],t instanceof Array)for(o=0,i=t.length;o<i;o++)n=t[o],e=this.addItem(n),r.push(e);else e=this.addItem(t),r.push(e);return r},n.prototype.addItem=function(t){var e,n;return n=this.getKey(t),(e=this.keys[n])?(e.setModel(t,n),e):(e=this.createItem(t))?(e.setModel(t,n),this.appendItem(e)):void 0},n.prototype.createItem=function(t){return t},n.prototype.addNewItem=function(t){return this.appendItem(t)},n.prototype.appendItem=function(t){var e,n,r;return t.index=++this.index,e=!1,r=this.keys[t.key],r&&(n=this.items.indexOf(r))>=0&&(this.items[n]=t,e=!0),e||this.items.push(t),this.keys[t.key]=t,this.subject.onNext({type:"add",item:t}),t},n.prototype.removeItem=function(t,e){var n,r;if(null==e&&(e=!0),r=this.keys[t])return delete this.keys[t],n=this.items.indexOf(r),n>=0&&this.items.splice(n,1),this.subject.onNext({type:"remove",item:r}),e&&r.dispose(),r},n.prototype.reset=function(){var t,e,n,r,o;for(n=function(){var e,n,r,o;for(r=this.items,o=[],e=0,n=r.length;e<n;e++)t=r[e],o.push(t.key);return o}.call(this),r=0,o=n.length;r<o;r++)e=n[r],this.removeItem(e,!1);return this.index=0},n.prototype.dispose=function(t){n.__super__.dispose.apply(this,arguments),t||(this.reset(),this.subject.dispose())},n.prototype.subscribe=function(t,e,n){var r,o;return o=this.subject,t&&(o=o.where(function(e){return e.type===t})),n&&(o=o.throttle(n)),r=o.subscribe(e),this.addHandler(r)},n}(t.PagingModel),{ItemsBase:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/view-model",["../disposable"],function(t){var e;return e=function(t){function e(t,n){this.parent=t,this.model=null!=n?n:{},e.__super__.constructor.apply(this,arguments),this.engine=this.parent.engine}return __extends(e,t),e.prototype.getIds=function(){return{}},e.prototype.getKey=function(t,e){var n;return null!=(n=this.parent)?n.getKey(t,e):void 0},e.prototype.setModel=function(t,e){var n,r;if(!t)return!1;if(null==e&&(e=this.getKey(t)),this.key&&this.key!==e)return!1;if(this.key=e,t!==this.model)for(n in t)r=t[n],this.model[n]=r;return!0},e.prototype.updateModel=function(t){var e,n;if(this.getKey(t)===this.key){if(!t||t===this.model)return t;for(e in t)n=t[e],this.model[e]=n;return this.model}},e.prototype.getModelService=function(){return null==this.service&&(this.service=this.engine.modelManager.getService(this.parent.options.id)),this.service},e.prototype.load=function(t,e){var n,r;return!e&&this.loaded?void("function"==typeof t&&t(null,this.model)):(r=this.getModelService(),n=this.getIds(),r.get(n,function(e){return function(n,r){return e.loaded=!0,e.setModel(r),"function"==typeof t?t(n,e.model):void 0}}(this),e))},e.prototype.reset=function(){var t,e;e=this.model;for(t in e)e[t],delete this.model[t]},e.prototype.display=function(t,e,n){var r,o;if(r=n||5e3,o=this.formatErrorInfo(t,e))return M.toast({html:o,displayLength:r})},e.prototype.formatErrorInfo=function(t,e){var n;return t?(n="object"==typeof t?JSON.stringify(t):t,console.log(n)):n=e,n},e.prototype.getChanges=function(t){var e,n,r;null==t&&(t=this.model),e={_id:t._id};for(n in t)r=t[n],"_"!==n[0]&&(e[n]=r);return e},e.prototype.update=function(t){var e,n;return e=this.getChanges(),n=this.getModelService(),n.update(e,function(e){return function(n,r){return e.setModel(r),e.display(n,"数据更新成功！"),"function"==typeof t?t(n,e.model):void 0}}(this))},e.prototype.remove=function(t){var e,n;return e=this.getChanges(),n=this.getModelService(),n.remove(e,function(e){return function(n,r){var o;return!n&&r&&null!=(o=e.parent)&&o.removeItem(e.key),e.display(n,"数据删除成功！"),"function"==typeof t?t(n,r):void 0}}(this))},e.prototype.create=function(t){var e,n;return e=this.getChanges(),n=this.getModelService(),n.create(e,function(e){return function(n,r){var o;return!n&&r&&(e.setModel(r),null!=(o=e.parent)&&o.addNewItem(e)),e.display(n,"数据创建成功！"),"function"==typeof t?t(n,e.model):void 0}}(this))},e.prototype.save=function(t){return this.model._removed?this.remove(t):this.model._id?this.update(t):this.create(t)},e}(t.Disposable),{ViewModel:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/items-model",["./items-base","./view-model"],function(t,e){var n;return n=function(t){function n(t,e){this.parent=t,n.__super__.constructor.call(this,e),this.engine=this.parent.engine,this.caches={}}return __extends(n,t),n.prototype.load=function(t,e,n,r){var o,i;return i=JSON.stringify(t)+"&"+e,r&&(this.reset(),delete this.caches[i]),(o=this.caches[i])?void(o.loaded?"function"==typeof n&&n(null,o.items):o.callbacks.push(n)):(o={filter:t,fields:e,callbacks:[n]},this.caches[i]=o,null==this.service&&(this.service=this.engine.modelManager.getService(this.options.id)),this.service.query(t,e,function(t){return function(e,n){var r,i,s,u,a;for(i=n&&0!==Object.keys(n).length?t.addItems(n):[],t.loaded=!0,o.loaded=!0,o.items=i,a=o.callbacks,s=0,u=a.length;s<u;s++)"function"==typeof(r=a[s])&&r(e,i);return o.callbacks=[]}}(this),r))},n.prototype.loadOne=function(t,e,n,r){var o;return o=this.getItemByIds(t),o?o.load(function(t){return function(e,r){return o=t.addItem(r),"function"==typeof n?n(e,o):void 0}}(this),r):this.load(t,e,function(t){
return function(t,e){return"function"==typeof n?n(t,null!=e?e[0]:void 0):void 0}}(),r)},n.prototype.createItem=function(t){return new e.ViewModel(this,t)},n.prototype.dispose=function(t){n.__super__.dispose.call(this,t),t||(this.cache={})},n}(t.ItemsBase),{ItemsModel:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/equipment-template",["../view-model","../items-model"],function(t,e){var n;return n=function(t){function n(t,r){n.__super__.constructor.call(this,t,r),this.properties=new e.ItemsModel(this,{id:"equipmentproperties",keys:["user","project","type","template","property"]}),this.signals=new e.ItemsModel(this,{id:"equipmentsignals",keys:["user","project","type","template","signal"]}),this.events=new e.ItemsModel(this,{id:"equipmentevents",keys:["user","project","type","template","event"]}),this.commands=new e.ItemsModel(this,{id:"equipmentcommands",keys:["user","project","type","template","command"]}),this.ports=new e.ItemsModel(this,{id:"equipmentports",keys:["user","project","type","template","port"]})}return __extends(n,t),n.prototype.loadProperties=function(t,e,n){var r;return r={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadProperties(t,function(o){return function(i,s){return o.properties.load(r,t,function(t,n){var r,o,i,u,a,c,l,h;if(i=[],r={},n)for(a=0,l=n.length;a<l;a++)u=n[a],i.push(u),r[u.model.property]=u;if(o=0,s)for(c=0,h=s.length;c<h;c++)u=s[c],r[u.model.property]||i.splice(o++,0,u);return"function"==typeof e?e(t,i):void 0},n)}}(this),n):this.properties.load(r,t,e,n)},n.prototype.loadSignals=function(t,e,n){var r;return r={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadSignals(t,function(o){return function(i,s){return o.signals.load(r,t,function(t,n){var r,o,i,u,a,c,l,h;if(i=[],r={},n)for(a=0,l=n.length;a<l;a++)u=n[a],i.push(u),r[u.model.signal]=u;if(o=0,s)for(c=0,h=s.length;c<h;c++)u=s[c],r[u.model.signal]||i.splice(o++,0,u);return"function"==typeof e?e(t,i):void 0},n)}}(this),n):this.signals.load(r,t,e,n)},n.prototype.loadEvents=function(t,e,n){var r;return r={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadEvents(t,function(o){return function(i,s){return o.events.load(r,t,function(t,n){var r,o,i,u,a,c,l,h;if(i=[],r={},n)for(a=0,l=n.length;a<l;a++)u=n[a],i.push(u),r[u.model.event]=u;if(o=0,s)for(c=0,h=s.length;c<h;c++)u=s[c],r[u.model.event]||i.splice(o++,0,u);return"function"==typeof e?e(t,i):void 0},n)}}(this),n):this.events.load(r,t,e,n)},n.prototype.loadCommands=function(t,e,n){var r;return r={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadCommands(t,function(o){return function(i,s){return o.commands.load(r,t,function(t,n){var r,o,i,u,a,c,l,h;if(i=[],r={},n)for(a=0,l=n.length;a<l;a++)u=n[a],i.push(u),r[u.model.command]=u;if(o=0,s)for(c=0,h=s.length;c<h;c++)u=s[c],r[u.model.command]||i.splice(o++,0,u);return"function"==typeof e?e(t,i):void 0},n)}}(this),n):this.commands.load(r,t,e,n)},n.prototype.loadPorts=function(t,e,n){var r;return r={user:this.model.user,project:this.model.project,type:this.model.type,template:this.model.template},this.base?this.base.loadPorts(t,function(o){return function(i,s){return o.ports.load(r,t,function(t,n){var r,o,i,u,a,c,l,h;if(i=[],r={},n)for(a=0,l=n.length;a<l;a++)u=n[a],i.push(u),r[u.model.port]=u;if(o=0,s)for(c=0,h=s.length;c<h;c++)u=s[c],r[u.model.port]||i.splice(o++,0,u);return"function"==typeof e?e(t,i):void 0},n)}}(this),n):this.ports.load(r,t,e,n)},n.prototype.getModelValue=function(t){var e;return this.model[t]||(null!=(e=this.base)?e.getModelValue(t):void 0)},n.prototype.getSampleUnits=function(){var t,e,n,r,o,i,s,u,a,c;if(n={},this.model.sampleUnits)for(c=this.model.sampleUnits,u=0,a=c.length;u<a;u++){r=c[u],o={};for(t in r)s=r[t],o[t]=s;n[o.id]=o}if(this.base&&(i=this.base.getSampleUnits()))for(e in i)r=i[e],n.hasOwnProperty(e)||(n[e]=r);return n},n.prototype.dispose=function(){return n.__super__.dispose.apply(this,arguments),this.signals.dispose(),this.events.dispose(),this.commands.dispose(),this.ports.dispose()},n}(t.ViewModel),{EquipmentTemplate:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/equipment-templates",["../items-model","./equipment-template"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmenttemplates"),null==(o=this.options).keys&&(o.keys=["user","project","type","template"])}return __extends(n,t),n.prototype.createItem=function(t){return new e.EquipmentTemplate(this,t)},n.prototype.loadEquipmentTemplate=function(t,e,n,r){var o;return!r&&(o=this.getItemByIds(t),null!=o?o._loaded:void 0)?"function"==typeof n?n(null,o):void 0:this.load(t,e,function(i){return function(s,u){var a,c,l,h;return o=null!=u?u[0]:void 0,null!=o&&(o._loaded=!0),o||i.log("equipment template not found: "+t.user+"/"+t.project+"/"+t.type+"/"+t.template),o&&!o.base&&o.model.base?(c=o.model.base.split("."),0===c.length?(h=o.type,l=c[0]):(h=c[0],l=c[1]),a={user:t.user,project:t.project,type:h,template:l},i.loadEquipmentTemplate(a,e,function(t,e){return o.base=e,"function"==typeof n?n(t,o):void 0},r)):"function"==typeof n?n(s,o):void 0}}(this),r)},n}(t.ItemsModel),{EquipmentTemplates:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/property",["../view-model"],function(t){var e;return e=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.equipment=this.parent.parent,this.station=this.equipment.station}return __extends(e,t),e.prototype.getIds=function(){var t;return t=this.equipment.getIds(),t.property=this.model.property,t},e.prototype.setValue=function(t){if(null!=t)return this.value=this.parseValue(t)},e.prototype.getValue=function(){return this.value?this.value:this.model.value},e.prototype.setModel=function(t,n){return!!e.__super__.setModel.call(this,t,n)&&(this.value=this.parseValue(this.model.value),!0)},e.prototype.parseValue=function(t){var e;if("string"!=typeof t)return t;switch(this.model.dataType){case"int":e=parseInt(t);break;case"float":e=parseFloat(t);break;case"date":e=new Date(t);break;default:e=t}return e},e.prototype.isChanged=function(){var t,e;return!!this.model.instantiation||(null!=(t=this.value)?t.toString():void 0)!==(null!=(e=this.model.value)?e.toString():void 0)},e}(t.ViewModel),{Property:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/properties",["../items-model","./property"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmentproperties"),null==(o=this.options).keys&&(o.keys=["user","project","station","equipment","property"]),this.equipment=this.parent}return __extends(n,t),n.prototype.createItem=function(t){return new e.Property(this,t)},n.prototype.getKey=function(t){var e,n;return n=this.options.keysSeperator||".",e=this.equipment.model,""+e.user+n+e.project+n+e.station+n+e.equipment+n+t.property},n}(t.ItemsModel),{Properties:n}}),function(t,e){"function"==typeof define&&define.amd?define("numeraljs",e):"object"==typeof module&&module.exports?module.exports=e():t.numeral=e()}(this,function(){function t(t,e){this._input=t,this._value=e}var e,n,r={},o={},i={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},s={currentLocale:i.currentLocale,zeroFormat:i.zeroFormat,nullFormat:i.nullFormat,defaultFormat:i.defaultFormat,scalePercentBy100:i.scalePercentBy100};return e=function(o){var i,u,a,c;if(e.isNumeral(o))i=o.value();else if(0===o||void 0===o)i=0;else if(null===o||n.isNaN(o))i=null;else if("string"==typeof o)if(s.zeroFormat&&o===s.zeroFormat)i=0;else if(s.nullFormat&&o===s.nullFormat||!o.replace(/[^0-9]+/g,"").length)i=null;else{for(u in r)if((c="function"==typeof r[u].regexps.unformat?r[u].regexps.unformat():r[u].regexps.unformat)&&o.match(c)){a=r[u].unformat;break}a=a||e._.stringToNumber,i=a(o)}else i=Number(o)||null;return new t(o,i)},e.version="2.0.6",e.isNumeral=function(e){return e instanceof t},e._=n={numberToFormat:function(t,n,r){var i,s,u,a,c,l,h,p=o[e.options.currentLocale],f=!1,d=!1,m=0,v="",y=1e12,_="",g=!1;if(t=t||0,s=Math.abs(t),e._.includes(n,"(")?(f=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(c=e._.includes(n,"+")?n.indexOf("+"):0>t?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(i=n.match(/a(k|m|b|t)?/),i=!!i&&i[1],e._.includes(n," a")&&(v=" "),n=n.replace(new RegExp(v+"a[kmbt]?"),""),s>=y&&!i||"t"===i?(v+=p.abbreviations.trillion,t/=y):y>s&&s>=1e9&&!i||"b"===i?(v+=p.abbreviations.billion,t/=1e9):1e9>s&&s>=1e6&&!i||"m"===i?(v+=p.abbreviations.million,t/=1e6):(1e6>s&&s>=1e3&&!i||"k"===i)&&(v+=p.abbreviations.thousand,t/=1e3)),e._.includes(n,"[.]")&&(d=!0,n=n.replace("[.]",".")),u=t.toString().split(".")[0],a=n.split(".")[1],l=n.indexOf(","),m=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,a?(e._.includes(a,"[")?(a=a.replace("]",""),a=a.split("["),_=e._.toFixed(t,a[0].length+a[1].length,r,a[1].length)):_=e._.toFixed(t,a.length,r),u=_.split(".")[0],_=e._.includes(_,".")?p.delimiters.decimal+_.split(".")[1]:"",d&&0===Number(_.slice(1))&&(_="")):u=e._.toFixed(t,0,r),v&&!i&&Number(u)>=1e3&&v!==p.abbreviations.trillion)switch(u=String(Number(u)/1e3),v){case p.abbreviations.thousand:v=p.abbreviations.million;break;case p.abbreviations.million:v=p.abbreviations.billion;break;case p.abbreviations.billion:v=p.abbreviations.trillion}if(e._.includes(u,"-")&&(u=u.slice(1),g=!0),u.length<m)for(var b=m-u.length;b>0;b--)u="0"+u;return l>-1&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p.delimiters.thousands)),0===n.indexOf(".")&&(u=""),h=u+_+(v||""),f?h=(f&&g?"(":"")+h+(f&&g?")":""):c>=0?h=0===c?(g?"-":"+")+h:h+(g?"-":"+"):g&&(h="-"+h),h},stringToNumber:function(t){var e,n,r,i=o[s.currentLocale],u=t,a={thousand:3,million:6,billion:9,trillion:12};if(s.zeroFormat&&t===s.zeroFormat)n=0;else if(s.nullFormat&&t===s.nullFormat||!t.replace(/[^0-9]+/g,"").length)n=null;else{n=1,"."!==i.delimiters.decimal&&(t=t.replace(/\./g,"").replace(i.delimiters.decimal,"."));for(e in a)if(r=new RegExp("[^a-zA-Z]"+i.abbreviations[e]+"(?:\\)|(\\"+i.currency.symbol+")?(?:\\))?)?$"),u.match(r)){n*=Math.pow(10,a[e]);break}n*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,t=t.replace(/[^0-9\.]+/g,""),n*=Number(t)}return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},includes:function(t,e){return-1!==t.indexOf(e)},insert:function(t,e,n){return t.slice(0,n)+e+t.slice(n)},reduce:function(t,e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r=Object(t),o=r.length>>>0,i=0;if(3===arguments.length)n=arguments[2];else{for(;o>i&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;o>i;i++)i in r&&(n=e(n,r[i],i,r));return n},multiplier:function(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(t,e){var r=n.multiplier(e);return t>r?t:r},1)},toFixed:function(t,e,n,r){var o,i,s,u,a=t.toString().split("."),c=e-(r||0);return o=2===a.length?Math.min(Math.max(a[1].length,c),e):c,s=Math.pow(10,o),u=(n(t+"e+"+o)/s).toFixed(o),r>e-o&&(i=new RegExp("\\.?0{1,"+(r-(e-o))+"}$"),u=u.replace(i,"")),u}},e.options=s,e.formats=r,e.locales=o,e.locale=function(t){return t&&(s.currentLocale=t.toLowerCase()),s.currentLocale},e.localeData=function(t){if(!t)return o[s.currentLocale];if(t=t.toLowerCase(),!o[t])throw new Error("Unknown locale : "+t);return o[t]},e.reset=function(){for(var t in i)s[t]=i[t]},e.zeroFormat=function(t){s.zeroFormat="string"==typeof t?t:null},e.nullFormat=function(t){s.nullFormat="string"==typeof t?t:null},e.defaultFormat=function(t){s.defaultFormat="string"==typeof t?t:"0.0"},e.register=function(t,e,n){if(e=e.toLowerCase(),this[t+"s"][e])throw new TypeError(e+" "+t+" already registered.");return this[t+"s"][e]=n,n},e.validate=function(t,n){var r,o,i,s,u,a,c,l;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),t=t.trim(),t.match(/^\d+$/))return!0;if(""===t)return!1;try{c=e.localeData(n)}catch(t){c=e.localeData(e.locale())}return i=c.currency.symbol,u=c.abbreviations,r=c.delimiters.decimal,o="."===c.delimiters.thousands?"\\.":c.delimiters.thousands,(null===(l=t.match(/^[^\d]+/))||(t=t.substr(1),l[0]===i))&&((null===(l=t.match(/[^\d]+$/))||(t=t.slice(0,-1),l[0]===u.thousand||l[0]===u.million||l[0]===u.billion||l[0]===u.trillion))&&(a=new RegExp(o+"{2}"),!t.match(/[^\d.,]/g)&&(s=t.split(r),!(s.length>2)&&(s.length<2?!!s[0].match(/^\d+.*\d$/)&&!s[0].match(a):1===s[0].length?!!s[0].match(/^\d+$/)&&!s[0].match(a)&&!!s[1].match(/^\d+$/):!!s[0].match(/^\d+.*\d$/)&&!s[0].match(a)&&!!s[1].match(/^\d+$/)))))},e.fn=t.prototype={clone:function(){return e(this)},format:function(t,n){var o,i,u,a=this._value,c=t||s.defaultFormat;if(n=n||Math.round,0===a&&null!==s.zeroFormat)i=s.zeroFormat;else if(null===a&&null!==s.nullFormat)i=s.nullFormat;else{for(o in r)if(c.match(r[o].regexps.format)){u=r[o].format;break}u=u||e._.numberToFormat,i=u(a,c,n)}return i},value:function(){return this._value},input:function(){return this._input},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e,n,o){return t+Math.round(r*e)}var r=n.correctionFactor.call(null,this._value,t);return this._value=n.reduce([this._value,t],e,0)/r,this},subtract:function(t){function e(t,e,n,o){return t-Math.round(r*e)}var r=n.correctionFactor.call(null,this._value,t);return this._value=n.reduce([t],e,Math.round(this._value*r))/r,this},multiply:function(t){function e(t,e,r,o){var i=n.correctionFactor(t,e);return Math.round(t*i)*Math.round(e*i)/Math.round(i*i)}return this._value=n.reduce([this._value,t],e,1),this},divide:function(t){function e(t,e,r,o){var i=n.correctionFactor(t,e);return Math.round(t*i)/Math.round(e*i)}return this._value=n.reduce([this._value,t],e),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),function(){e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,r){var o,i=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?(o=o.split(""),o.splice(-1,0,i+"BPS"),o=o.join("")):o=o+i+"BPS",o},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}})}(),function(){var t={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},n={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},r=t.suffixes.concat(n.suffixes.filter(function(e){return t.suffixes.indexOf(e)<0})),o=r.join("|");o="("+o.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(r,o,i){var s,u,a,c=e._.includes(o,"ib")?n:t,l=e._.includes(o," b")||e._.includes(o," ib")?" ":"";for(o=o.replace(/\s?i?b/,""),s=0;s<=c.suffixes.length;s++)if(u=Math.pow(c.base,s),a=Math.pow(c.base,s+1),null===r||0===r||r>=u&&a>r){l+=c.suffixes[s],u>0&&(r/=u);break}return e._.numberToFormat(r,o,i)+l},unformat:function(r){var o,i,s=e._.stringToNumber(r);if(s){for(o=t.suffixes.length-1;o>=0;o--){if(e._.includes(r,t.suffixes[o])){i=Math.pow(t.base,o);break}if(e._.includes(r,n.suffixes[o])){i=Math.pow(n.base,o);break}}s*=i||1}return s}})}(),function(){e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,r){var o,i,s=e.locales[e.options.currentLocale],u={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),o=e._.numberToFormat(t,n,r),t>=0?(u.before=u.before.replace(/[\-\(]/,""),u.after=u.after.replace(/[\-\)]/,"")):0>t&&!e._.includes(u.before,"-")&&!e._.includes(u.before,"(")&&(u.before="-"+u.before),i=0;i<u.before.length;i++)switch(u.before[i]){case"$":o=e._.insert(o,s.currency.symbol,i);break;case" ":o=e._.insert(o," ",i+s.currency.symbol.length-1)}for(i=u.after.length-1;i>=0;i--)switch(u.after[i]){case"$":o=i===u.after.length-1?o+s.currency.symbol:e._.insert(o,s.currency.symbol,-(u.after.length-(1+i)));break;case" ":o=i===u.after.length-1?o+" ":e._.insert(o," ",-(u.after.length-(1+i)+s.currency.symbol.length-1))}return o}})}(),function(){e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,r){var o="number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential(),i=o.split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(i[0]),n,r)+"e"+i[1]},unformat:function(t){function n(t,n,r,o){var i=e._.correctionFactor(t,n);return t*i*(n*i)/(i*i)}var r=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),o=Number(r[0]),i=Number(r[1]);return i=e._.includes(t,"e-")?i*=-1:i,e._.reduce([o,Math.pow(10,i)],n,1)}})}(),function(){e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,r){var o=e.locales[e.options.currentLocale],i=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),i+=o.ordinal(t),e._.numberToFormat(t,n,r)+i}})}(),function(){e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,r){var o,i=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?(o=o.split(""),o.splice(-1,0,i+"%"),o=o.join("")):o=o+i+"%",o},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}})}(),function(){e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(t,e,n){var r=Math.floor(t/60/60),o=Math.floor((t-60*r*60)/60),i=Math.round(t-60*r*60-60*o);return r+":"+(10>o?"0"+o:o)+":"+(10>i?"0"+i:i)},unformat:function(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}})}(),e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("moment",e):t.moment=e()}(this,function(){"use strict";function t(){return On.apply(null,arguments)}function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function s(t,e,n,r){return St(t,e,n,r,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(t){return null==t._pf&&(t._pf=u()),t._pf}function c(t){if(null==t._isValid){var e=a(t);t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function l(t){var e=s(NaN);return null!=t?i(a(e),t):a(e).userInvalidated=!0,e}function h(t,e){var n,r,o;if(void 0!==e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),void 0!==e._i&&(t._i=e._i),void 0!==e._f&&(t._f=e._f),void 0!==e._l&&(t._l=e._l),void 0!==e._strict&&(t._strict=e._strict),void 0!==e._tzm&&(t._tzm=e._tzm),void 0!==e._isUTC&&(t._isUTC=e._isUTC),void 0!==e._offset&&(t._offset=e._offset),void 0!==e._pf&&(t._pf=a(e)),void 0!==e._locale&&(t._locale=e._locale),Tn.length>0)for(n in Tn)r=Tn[n],void 0!==(o=e[r])&&(t[r]=o);return t}function p(e){h(this,e),this._d=new Date(+e._d),!1===An&&(An=!0,t.updateOffset(this),An=!1)}function f(t){return t instanceof p||null!=t&&null!=t._isAMomentObject}function d(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function m(t,e,n){var r,o=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),s=0;for(r=0;o>r;r++)(n&&t[r]!==e[r]||!n&&d(t[r])!==d(e[r]))&&s++;return s+i}function v(){}function y(t){return t?t.toLowerCase().replace("_","-"):t}function _(t){for(var e,n,r,o,i=0;i<t.length;){for(o=y(t[i]).split("-"),e=o.length,n=y(t[i+1]),n=n?n.split("-"):null;e>0;){if(r=g(o.slice(0,e).join("-")))return r;if(n&&n.length>=e&&m(o,n,!0)>=e-1)break;e--}i++}return null}function g(t){var e=null;if(!Nn[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Pn._abbr,require("./locale/"+t),b(e)}catch(t){}return Nn[t]}function b(t,e){var n;return t&&(n=void 0===e?x(t):w(t,e))&&(Pn=n),Pn._abbr}function w(t,e){return null!==e?(e.abbr=t,Nn[t]||(Nn[t]=new v),Nn[t].set(e),b(t),Nn[t]):(delete Nn[t],null)}function x(t){var n;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Pn;if(!e(t)){if(n=g(t))return n;t=[t]}return _(t)}function C(t,e){var n=t.toLowerCase();jn[n]=jn[n+"s"]=jn[e]=t}function S(t){return"string"==typeof t?jn[t]||jn[t.toLowerCase()]:void 0}function E(t){var e,n,r={};for(n in t)o(t,n)&&(e=S(n))&&(r[e]=t[n]);return r}function k(e,n){return function(r){return null!=r?(M(this,e,r),t.updateOffset(this,n),this):D(this,e)}}function D(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function M(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function O(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=S(t),"function"==typeof this[t])return this[t](e);return this}function P(t,e,n){for(var r=""+Math.abs(t),o=t>=0;r.length<e;)r="0"+r;return(o?n?"+":"":"-")+r}function T(t,e,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),t&&(Fn[t]=o),e&&(Fn[e[0]]=function(){return P(o.apply(this,arguments),e[1],e[2])}),n&&(Fn[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function A(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function N(t){var e,n,r=t.match($n);for(e=0,n=r.length;n>e;e++)Fn[r[e]]?r[e]=Fn[r[e]]:r[e]=A(r[e]);return function(o){var i="";for(e=0;n>e;e++)i+=r[e]instanceof Function?r[e].call(o,t):r[e];return i}}function j(t,e){return t.isValid()?(e=$(e,t.localeData()),In[e]||(In[e]=N(e)),In[e](t)):t.localeData().invalidDate()}function $(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(qn.lastIndex=0;r>=0&&qn.test(t);)t=t.replace(qn,n),qn.lastIndex=0,r-=1;return t}function q(t,e,n){Zn[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function I(t,e){return o(Zn,t)?Zn[t](e._strict,e._locale):new RegExp(F(t))}function F(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,o){return e||n||r||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(r=function(t,n){n[e]=d(t)}),n=0;n<t.length;n++)tr[t[n]]=r}function L(t,e){B(t,function(t,n,r,o){r._w=r._w||{},e(t,r._w,r,o)})}function R(t,e,n){null!=e&&o(tr,t)&&tr[t](e,n._a,n,t)}function U(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function z(t){return this._months[t.month()]}function H(t){return this._monthsShort[t.month()]}function Y(t,e,n){var r,o,i;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(o=s([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function V(t,e){var n;return"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))?t:(n=Math.min(t.date(),U(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function W(e){return null!=e?(V(this,e),t.updateOffset(this,!0),this):D(this,"Month")}function G(){return U(this.year(),this.month())}function K(t){var e,n=t._a;return n&&-2===a(t).overflow&&(e=n[nr]<0||n[nr]>11?nr:n[rr]<1||n[rr]>U(n[er],n[nr])?rr:n[or]<0||n[or]>24||24===n[or]&&(0!==n[ir]||0!==n[sr]||0!==n[ur])?or:n[ir]<0||n[ir]>59?ir:n[sr]<0||n[sr]>59?sr:n[ur]<0||n[ur]>999?ur:-1,a(t)._overflowDayOfYear&&(er>e||e>rr)&&(e=rr),a(t).overflow=e),t}function J(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function Q(t,e){var n=!0,r=t+"\n"+(new Error).stack;return i(function(){return n&&(J(r),n=!1),e.apply(this,arguments)},e)}function X(t,e){lr[t]||(J(e),lr[t]=!0)}function Z(t){var e,n,r=t._i,o=hr.exec(r);if(o){for(a(t).iso=!0,e=0,n=pr.length;n>e;e++)if(pr[e][1].exec(r)){t._f=pr[e][0]+(o[6]||" ");break}for(e=0,n=fr.length;n>e;e++)if(fr[e][1].exec(r)){t._f+=fr[e][0];break}r.match(Jn)&&(t._f+="Z"),_t(t)}else t._isValid=!1}function tt(e){var n=dr.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(Z(e),void(!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e))))}function et(t,e,n,r,o,i,s){var u=new Date(t,e,n,r,o,i,s);return 1970>t&&u.setFullYear(t),u}function nt(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function rt(t){return ot(t)?366:365}function ot(t){return t%4==0&&t%100!=0||t%400==0}function it(){return ot(this.year())}function st(t,e,n){var r,o=n-e,i=n-t.day();return i>o&&(i-=7),o-7>i&&(i+=7),r=Et(t).add(i,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ut(t){return st(t,this._week.dow,this._week.doy).week}function at(){return this._week.dow}function ct(){return this._week.doy}function lt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function ht(t){var e=st(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function pt(t,e,n,r,o){var i,s,u=nt(t,0,1).getUTCDay();return u=0===u?7:u,n=null!=n?n:o,i=o-u+(u>r?7:0)-(o>u?7:0),s=7*(e-1)+(n-o)+i+1,{year:s>0?t:t-1,dayOfYear:s>0?s:rt(t-1)+s}}function ft(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function dt(t,e,n){return null!=t?t:null!=e?e:n}function mt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function vt(t){var e,n,r,o,i=[];if(!t._d){for(r=mt(t),t._w&&null==t._a[rr]&&null==t._a[nr]&&yt(t),t._dayOfYear&&(o=dt(t._a[er],r[er]),t._dayOfYear>rt(o)&&(a(t)._overflowDayOfYear=!0),n=nt(o,0,t._dayOfYear),t._a[nr]=n.getUTCMonth(),t._a[rr]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=i[e]=r[e];for(;7>e;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[or]&&0===t._a[ir]&&0===t._a[sr]&&0===t._a[ur]&&(t._nextDay=!0,t._a[or]=0),t._d=(t._useUTC?nt:et).apply(null,i),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[or]=24)}}function yt(t){var e,n,r,o,i,s,u;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(i=1,s=4,n=dt(e.GG,t._a[er],st(Et(),1,4).year),r=dt(e.W,1),o=dt(e.E,1)):(i=t._locale._week.dow,s=t._locale._week.doy,n=dt(e.gg,t._a[er],st(Et(),i,s).year),r=dt(e.w,1),null!=e.d?(o=e.d,i>o&&++r):o=null!=e.e?e.e+i:i),u=pt(n,r,o,s,i),t._a[er]=u.year,t._dayOfYear=u.dayOfYear}function _t(e){if(e._f===t.ISO_8601)return void Z(e);e._a=[],a(e).empty=!0;var n,r,o,i,s,u=""+e._i,c=u.length,l=0;for(o=$(e._f,e._locale).match($n)||[],n=0;n<o.length;n++)i=o[n],r=(u.match(I(i,e))||[])[0],r&&(s=u.substr(0,u.indexOf(r)),s.length>0&&a(e).unusedInput.push(s),u=u.slice(u.indexOf(r)+r.length),l+=r.length),Fn[i]?(r?a(e).empty=!1:a(e).unusedTokens.push(i),R(i,r,e)):e._strict&&!r&&a(e).unusedTokens.push(i);a(e).charsLeftOver=c-l,u.length>0&&a(e).unusedInput.push(u),!0===a(e).bigHour&&e._a[or]<=12&&e._a[or]>0&&(a(e).bigHour=void 0),e._a[or]=gt(e._locale,e._a[or],e._meridiem),vt(e),K(e)}function gt(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(r=t.isPM(n),r&&12>e&&(e+=12),r||12!==e||(e=0),e):e}function bt(t){var e,n,r,o,s;if(0===t._f.length)return a(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)s=0,e=h({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],_t(e),c(e)&&(s+=a(e).charsLeftOver,s+=10*a(e).unusedTokens.length,a(e).score=s,(null==r||r>s)&&(r=s,n=e));i(t,n||e)}function wt(t){if(!t._d){var e=E(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],vt(t)}}function xt(t){var r,o=t._i,i=t._f;return t._locale=t._locale||x(t._l),null===o||void 0===i&&""===o?l({nullInput:!0}):("string"==typeof o&&(t._i=o=t._locale.preparse(o)),f(o)?new p(K(o)):(e(i)?bt(t):i?_t(t):n(o)?t._d=o:Ct(t),r=new p(K(t)),r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r))}function Ct(o){var i=o._i;void 0===i?o._d=new Date:n(i)?o._d=new Date(+i):"string"==typeof i?tt(o):e(i)?(o._a=r(i.slice(0),function(t){return parseInt(t,10)}),vt(o)):"object"==typeof i?wt(o):"number"==typeof i?o._d=new Date(i):t.createFromInputFallback(o)}function St(t,e,n,r,o){var i={};return"boolean"==typeof n&&(r=n,n=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=o,i._l=n,i._i=t,i._f=e,i._strict=r,xt(i)}function Et(t,e,n,r){return St(t,e,n,r,!1)}function kt(t,n){var r,o;if(1===n.length&&e(n[0])&&(n=n[0]),!n.length)return Et();for(r=n[0],o=1;o<n.length;++o)n[o][t](r)&&(r=n[o]);return r}function Dt(){return kt("isBefore",[].slice.call(arguments,0))}function Mt(){return kt("isAfter",[].slice.call(arguments,0))}function Ot(t){var e=E(t),n=e.year||0,r=e.quarter||0,o=e.month||0,i=e.week||0,s=e.day||0,u=e.hour||0,a=e.minute||0,c=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*c+6e4*a+36e5*u,this._days=+s+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=x(),this._bubble()}function Pt(t){return t instanceof Ot}function Tt(t,e){T(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)})}function At(t){var e=(t||"").match(Jn)||[],n=e[e.length-1]||[],r=(n+"").match(gr)||["-",0,0],o=60*r[1]+d(r[2]);return"+"===r[0]?o:-o}function Nt(e,r){var o,i;return r._isUTC?(o=r.clone(),i=(f(e)||n(e)?+e:+Et(e))-+o,o._d.setTime(+o._d+i),t.updateOffset(o,!1),o):Et(e).local()}function jt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function $t(e,n){var r,o=this._offset||0;return null!=e?("string"==typeof e&&(e=At(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(r=jt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!n||this._changeInProgress?Qt(this,Vt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:jt(this)}
function qt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function It(t){return this.utcOffset(0,t)}function Ft(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(jt(this),"m")),this}function Bt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(At(this._i)),this}function Lt(t){return t=t?Et(t).utcOffset():0,(this.utcOffset()-t)%60==0}function Rt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ut(){if(this._a){var t=this._isUTC?s(this._a):Et(this._a);return this.isValid()&&m(this._a,t.toArray())>0}return!1}function zt(){return!this._isUTC}function Ht(){return this._isUTC}function Yt(){return this._isUTC&&0===this._offset}function Vt(t,e){var n,r,i,s=t,u=null;return Pt(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(u=br.exec(t))?(n="-"===u[1]?-1:1,s={y:0,d:d(u[rr])*n,h:d(u[or])*n,m:d(u[ir])*n,s:d(u[sr])*n,ms:d(u[ur])*n}):(u=wr.exec(t))?(n="-"===u[1]?-1:1,s={y:Wt(u[2],n),M:Wt(u[3],n),d:Wt(u[4],n),h:Wt(u[5],n),m:Wt(u[6],n),s:Wt(u[7],n),w:Wt(u[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=Kt(Et(s.from),Et(s.to)),s={},s.ms=i.milliseconds,s.M=i.months),r=new Ot(s),Pt(t)&&o(t,"_locale")&&(r._locale=t._locale),r}function Wt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Gt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Kt(t,e){var n;return e=Nt(e,t),t.isBefore(e)?n=Gt(t,e):(n=Gt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Jt(t,e){return function(n,r){var o,i;return null===r||isNaN(+r)||(X(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=Vt(n,r),Qt(this,o,t),this}}function Qt(e,n,r,o){var i=n._milliseconds,s=n._days,u=n._months;o=null==o||o,i&&e._d.setTime(+e._d+i*r),s&&M(e,"Date",D(e,"Date")+s*r),u&&V(e,D(e,"Month")+u*r),o&&t.updateOffset(e,s||u)}function Xt(t){var e=t||Et(),n=Nt(e,this).startOf("day"),r=this.diff(n,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,Et(e)))}function Zt(){return new p(this)}function te(t,e){return e=S(void 0!==e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Et(t),+this>+t):(f(t)?+t:+Et(t))<+this.clone().startOf(e)}function ee(t,e){var n;return e=S(void 0!==e?e:"millisecond"),"millisecond"===e?+(t=f(t)?t:Et(t))>+this:(n=f(t)?+t:+Et(t),+this.clone().endOf(e)<n)}function ne(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function re(t,e){var n;return e=S(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Et(t),+this==+t):(n=+Et(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function oe(t){return 0>t?Math.ceil(t):Math.floor(t)}function ie(t,e,n){var r,o,i=Nt(t,this),s=6e4*(i.utcOffset()-this.utcOffset());return e=S(e),"year"===e||"month"===e||"quarter"===e?(o=se(this,i),"quarter"===e?o/=3:"year"===e&&(o/=12)):(r=this-i,o="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-s)/864e5:"week"===e?(r-s)/6048e5:r),n?o:oe(o)}function se(t,e){var n,r,o=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(o,"months");return 0>e-i?(n=t.clone().add(o-1,"months"),r=(e-i)/(i-n)):(n=t.clone().add(o+1,"months"),r=(e-i)/(n-i)),-(o+r)}function ue(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ae(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():j(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ce(e){var n=j(this,e||t.defaultFormat);return this.localeData().postformat(n)}function le(t,e){return this.isValid()?Vt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function he(t){return this.from(Et(),t)}function pe(t,e){return this.isValid()?Vt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fe(t){return this.to(Et(),t)}function de(t){var e;return void 0===t?this._locale._abbr:(e=x(t),null!=e&&(this._locale=e),this)}function me(){return this._locale}function ve(t){switch(t=S(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ye(t){return t=S(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function _e(){return+this._d-6e4*(this._offset||0)}function ge(){return Math.floor(+this/1e3)}function be(){return this._offset?new Date(+this):this._d}function we(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function xe(){return c(this)}function Ce(){return i({},a(this))}function Se(){return a(this).overflow}function Ee(t,e){T(0,[t,t.length],0,e)}function ke(t,e,n){return st(Et([t,11,31+e-n]),e,n).week}function De(t){var e=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Me(t){var e=st(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Oe(){return ke(this.year(),1,4)}function Pe(){var t=this.localeData()._week;return ke(this.year(),t.dow,t.doy)}function Te(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ae(t,e){if("string"==typeof t)if(isNaN(t)){if("number"!=typeof(t=e.weekdaysParse(t)))return null}else t=parseInt(t,10);return t}function Ne(t){return this._weekdays[t.day()]}function je(t){return this._weekdaysShort[t.day()]}function $e(t){return this._weekdaysMin[t.day()]}function qe(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Et([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ie(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ae(t,this.localeData()),this.add(t-e,"d")):e}function Fe(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Be(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Le(t,e){T(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Re(t,e){return e._meridiemParse}function Ue(t){return"p"===(t+"").toLowerCase().charAt(0)}function ze(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function He(t){T(0,[t,3],0,"millisecond")}function Ye(){return this._isUTC?"UTC":""}function Ve(){return this._isUTC?"Coordinated Universal Time":""}function We(t){return Et(1e3*t)}function Ge(){return Et.apply(null,arguments).parseZone()}function Ke(t,e,n){var r=this._calendar[t];return"function"==typeof r?r.call(e,n):r}function Je(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Qe(){return this._invalidDate}function Xe(t){return this._ordinal.replace("%d",t)}function Ze(t){return t}function tn(t,e,n,r){var o=this._relativeTime[n];return"function"==typeof o?o(t,e,n,r):o.replace(/%d/i,t)}function en(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function nn(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function rn(t,e,n,r){var o=x(),i=s().set(r,e);return o[n](i,t)}function on(t,e,n,r,o){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return rn(t,e,n,o);var i,s=[];for(i=0;r>i;i++)s[i]=rn(t,i,n,o);return s}function sn(t,e){return on(t,e,"months",12,"month")}function un(t,e){return on(t,e,"monthsShort",12,"month")}function an(t,e){return on(t,e,"weekdays",7,"day")}function cn(t,e){return on(t,e,"weekdaysShort",7,"day")}function ln(t,e){return on(t,e,"weekdaysMin",7,"day")}function hn(){var t=this._data;return this._milliseconds=Rr(this._milliseconds),this._days=Rr(this._days),this._months=Rr(this._months),t.milliseconds=Rr(t.milliseconds),t.seconds=Rr(t.seconds),t.minutes=Rr(t.minutes),t.hours=Rr(t.hours),t.months=Rr(t.months),t.years=Rr(t.years),this}function pn(t,e,n,r){var o=Vt(e,n);return t._milliseconds+=r*o._milliseconds,t._days+=r*o._days,t._months+=r*o._months,t._bubble()}function fn(t,e){return pn(this,t,e,1)}function dn(t,e){return pn(this,t,e,-1)}function mn(){var t,e,n,r=this._milliseconds,o=this._days,i=this._months,s=this._data,u=0;return s.milliseconds=r%1e3,t=oe(r/1e3),s.seconds=t%60,e=oe(t/60),s.minutes=e%60,n=oe(e/60),s.hours=n%24,o+=oe(n/24),u=oe(vn(o)),o-=oe(yn(u)),i+=oe(o/30),o%=30,u+=oe(i/12),i%=12,s.days=o,s.months=i,s.years=u,this}function vn(t){return 400*t/146097}function yn(t){return 146097*t/400}function _n(t){var e,n,r=this._milliseconds;if("month"===(t=S(t))||"year"===t)return e=this._days+r/864e5,n=this._months+12*vn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(yn(this._months/12)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function gn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*d(this._months/12)}function bn(t){return function(){return this.as(t)}}function wn(t){return t=S(t),this[t+"s"]()}function xn(t){return function(){return this._data[t]}}function Cn(){return oe(this.days()/7)}function Sn(t,e,n,r,o){return o.relativeTime(e||1,!!n,t,r)}function En(t,e,n){var r=Vt(t).abs(),o=ro(r.as("s")),i=ro(r.as("m")),s=ro(r.as("h")),u=ro(r.as("d")),a=ro(r.as("M")),c=ro(r.as("y")),l=o<oo.s&&["s",o]||1===i&&["m"]||i<oo.m&&["mm",i]||1===s&&["h"]||s<oo.h&&["hh",s]||1===u&&["d"]||u<oo.d&&["dd",u]||1===a&&["M"]||a<oo.M&&["MM",a]||1===c&&["y"]||["yy",c];return l[2]=e,l[3]=+t>0,l[4]=n,Sn.apply(null,l)}function kn(t,e){return void 0!==oo[t]&&(void 0===e?oo[t]:(oo[t]=e,!0))}function Dn(t){var e=this.localeData(),n=En(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Mn(){var t=io(this.years()),e=io(this.months()),n=io(this.days()),r=io(this.hours()),o=io(this.minutes()),i=io(this.seconds()+this.milliseconds()/1e3),s=this.asSeconds();return s?(0>s?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(r||o||i?"T":"")+(r?r+"H":"")+(o?o+"M":"")+(i?i+"S":""):"P0D"}var On,Pn,Tn=t.momentProperties=[],An=!1,Nn={},jn={},$n=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,qn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,In={},Fn={},Bn=/\d/,Ln=/\d\d/,Rn=/\d{3}/,Un=/\d{4}/,zn=/[+-]?\d{6}/,Hn=/\d\d?/,Yn=/\d{1,3}/,Vn=/\d{1,4}/,Wn=/[+-]?\d{1,6}/,Gn=/\d+/,Kn=/[+-]?\d+/,Jn=/Z|[+-]\d\d:?\d\d/gi,Qn=/[+-]?\d+(\.\d{1,3})?/,Xn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Zn={},tr={},er=0,nr=1,rr=2,or=3,ir=4,sr=5,ur=6;T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),T("MMMM",0,0,function(t){return this.localeData().months(this,t)}),C("month","M"),q("M",Hn),q("MM",Hn,Ln),q("MMM",Xn),q("MMMM",Xn),B(["M","MM"],function(t,e){e[nr]=d(t)-1}),B(["MMM","MMMM"],function(t,e,n,r){var o=n._locale.monthsParse(t,r,n._strict);null!=o?e[nr]=o:a(n).invalidMonth=t});var ar="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),cr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),lr={};t.suppressDeprecationWarnings=!1;var hr=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],fr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],dr=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Q("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),C("year","y"),q("Y",Kn),q("YY",Hn,Ln),q("YYYY",Vn,Un),q("YYYYY",Wn,zn),q("YYYYYY",Wn,zn),B(["YYYY","YYYYY","YYYYYY"],er),B("YY",function(e,n){n[er]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return d(t)+(d(t)>68?1900:2e3)};var mr=k("FullYear",!1);T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),q("w",Hn),q("ww",Hn,Ln),q("W",Hn),q("WW",Hn,Ln),L(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=d(t)});var vr={dow:0,doy:6};T("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),q("DDD",Yn),q("DDDD",Rn),B(["DDD","DDDD"],function(t,e,n){n._dayOfYear=d(t)}),t.ISO_8601=function(){};var yr=Q("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Et.apply(null,arguments);return this>t?this:t}),_r=Q("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Et.apply(null,arguments);return t>this?this:t});Tt("Z",":"),Tt("ZZ",""),q("Z",Jn),q("ZZ",Jn),B(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=At(t)});var gr=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var br=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wr=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Vt.fn=Ot.prototype;var xr=Jt(1,"add"),Cr=Jt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Sr=Q("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ee("gggg","weekYear"),Ee("ggggg","weekYear"),Ee("GGGG","isoWeekYear"),Ee("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),q("G",Kn),q("g",Kn),q("GG",Hn,Ln),q("gg",Hn,Ln),q("GGGG",Vn,Un),q("gggg",Vn,Un),q("GGGGG",Wn,zn),q("ggggg",Wn,zn),L(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=d(t)}),L(["gg","GG"],function(e,n,r,o){n[o]=t.parseTwoDigitYear(e)}),T("Q",0,0,"quarter"),C("quarter","Q"),q("Q",Bn),B("Q",function(t,e){e[nr]=3*(d(t)-1)}),T("D",["DD",2],"Do","date"),C("date","D"),q("D",Hn),q("DD",Hn,Ln),q("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),B(["D","DD"],rr),B("Do",function(t,e){e[rr]=d(t.match(Hn)[0],10)});var Er=k("Date",!0);T("d",0,"do","day"),T("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),T("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),T("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),q("d",Hn),q("e",Hn),q("E",Hn),q("dd",Xn),q("ddd",Xn),q("dddd",Xn),L(["dd","ddd","dddd"],function(t,e,n){var r=n._locale.weekdaysParse(t);null!=r?e.d=r:a(n).invalidWeekday=t}),L(["d","e","E"],function(t,e,n,r){e[r]=d(t)});var kr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Dr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");T("H",["HH",2],0,"hour"),T("h",["hh",2],0,function(){return this.hours()%12||12}),Le("a",!0),Le("A",!1),C("hour","h"),q("a",Re),q("A",Re),q("H",Hn),q("h",Hn),q("HH",Hn,Ln),q("hh",Hn,Ln),B(["H","HH"],or),B(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),B(["h","hh"],function(t,e,n){e[or]=d(t),a(n).bigHour=!0});var Or=/[ap]\.?m?\.?/i,Pr=k("Hours",!0);T("m",["mm",2],0,"minute"),C("minute","m"),q("m",Hn),q("mm",Hn,Ln),B(["m","mm"],ir);var Tr=k("Minutes",!1);T("s",["ss",2],0,"second"),C("second","s"),q("s",Hn),q("ss",Hn,Ln),B(["s","ss"],sr);var Ar=k("Seconds",!1);T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),He("SSS"),He("SSSS"),C("millisecond","ms"),q("S",Yn,Bn),q("SS",Yn,Ln),q("SSS",Yn,Rn),q("SSSS",Gn),B(["S","SS","SSS","SSSS"],function(t,e){e[ur]=d(1e3*("0."+t))});var Nr=k("Milliseconds",!1);T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var jr=p.prototype;jr.add=xr,jr.calendar=Xt,jr.clone=Zt,jr.diff=ie,jr.endOf=ye,jr.format=ce,jr.from=le,jr.fromNow=he,jr.to=pe,jr.toNow=fe,jr.get=O,jr.invalidAt=Se,jr.isAfter=te,jr.isBefore=ee,jr.isBetween=ne,jr.isSame=re,jr.isValid=xe,jr.lang=Sr,jr.locale=de,jr.localeData=me,jr.max=_r,jr.min=yr,jr.parsingFlags=Ce,jr.set=O,jr.startOf=ve,jr.subtract=Cr,jr.toArray=we,jr.toDate=be,jr.toISOString=ae,jr.toJSON=ae,jr.toString=ue,jr.unix=ge,jr.valueOf=_e,jr.year=mr,jr.isLeapYear=it,jr.weekYear=De,jr.isoWeekYear=Me,jr.quarter=jr.quarters=Te,jr.month=W,jr.daysInMonth=G,jr.week=jr.weeks=lt,jr.isoWeek=jr.isoWeeks=ht,jr.weeksInYear=Pe,jr.isoWeeksInYear=Oe,jr.date=Er,jr.day=jr.days=Ie,jr.weekday=Fe,jr.isoWeekday=Be,jr.dayOfYear=ft,jr.hour=jr.hours=Pr,jr.minute=jr.minutes=Tr,jr.second=jr.seconds=Ar,jr.millisecond=jr.milliseconds=Nr,jr.utcOffset=$t,jr.utc=It,jr.local=Ft,jr.parseZone=Bt,jr.hasAlignedHourOffset=Lt,jr.isDST=Rt,jr.isDSTShifted=Ut,jr.isLocal=zt,jr.isUtcOffset=Ht,jr.isUtc=Yt,jr.isUTC=Yt,jr.zoneAbbr=Ye,jr.zoneName=Ve,jr.dates=Q("dates accessor is deprecated. Use date instead.",Er),jr.months=Q("months accessor is deprecated. Use month instead",W),jr.years=Q("years accessor is deprecated. Use year instead",mr),jr.zone=Q("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",qt);var $r=jr,qr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ir={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Fr=/\d{1,2}/,Br={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Lr=v.prototype;Lr._calendar=qr,Lr.calendar=Ke,Lr._longDateFormat=Ir,Lr.longDateFormat=Je,Lr._invalidDate="Invalid date",Lr.invalidDate=Qe,Lr._ordinal="%d",Lr.ordinal=Xe,Lr._ordinalParse=Fr,Lr.preparse=Ze,Lr.postformat=Ze,Lr._relativeTime=Br,Lr.relativeTime=tn,Lr.pastFuture=en,Lr.set=nn,Lr.months=z,Lr._months=ar,Lr.monthsShort=H,Lr._monthsShort=cr,Lr.monthsParse=Y,Lr.week=ut,Lr._week=vr,Lr.firstDayOfYear=ct,Lr.firstDayOfWeek=at,Lr.weekdays=Ne,Lr._weekdays=kr,Lr.weekdaysMin=$e,Lr._weekdaysMin=Mr,Lr.weekdaysShort=je,Lr._weekdaysShort=Dr,Lr.weekdaysParse=qe,Lr.isPM=Ue,Lr._meridiemParse=Or,Lr.meridiem=ze,b("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===d(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=Q("moment.lang is deprecated. Use moment.locale instead.",b),t.langData=Q("moment.langData is deprecated. Use moment.localeData instead.",x);var Rr=Math.abs,Ur=bn("ms"),zr=bn("s"),Hr=bn("m"),Yr=bn("h"),Vr=bn("d"),Wr=bn("w"),Gr=bn("M"),Kr=bn("y"),Jr=xn("milliseconds"),Qr=xn("seconds"),Xr=xn("minutes"),Zr=xn("hours"),to=xn("days"),eo=xn("months"),no=xn("years"),ro=Math.round,oo={s:45,m:45,h:22,d:26,M:11},io=Math.abs,so=Ot.prototype;return so.abs=hn,so.add=fn,so.subtract=dn,so.as=_n,so.asMilliseconds=Ur,so.asSeconds=zr,so.asMinutes=Hr,so.asHours=Yr,so.asDays=Vr,so.asWeeks=Wr,so.asMonths=Gr,so.asYears=Kr,so.valueOf=gn,so._bubble=mn,so.get=wn,so.milliseconds=Jr,so.seconds=Qr,so.minutes=Xr,so.hours=Zr,so.days=to,so.weeks=Cn,so.months=eo,so.years=no,so.humanize=Dn,so.toISOString=Mn,so.toString=Mn,so.toJSON=Mn,so.locale=de,so.localeData=me,so.toIsoString=Q("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),so.lang=Sr,T("X",0,0,"unix"),T("x",0,0,"valueOf"),q("x",Kn),q("X",Qn),B("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),B("x",function(t,e,n){n._d=new Date(d(t))}),t.version="2.10.3",function(t){On=t}(Et),t.fn=$r,t.min=Dt,t.max=Mt,t.utc=s,t.unix=We,t.months=sn,t.isDate=n,t.locale=b,t.invalid=l,t.duration=Vt,t.isMoment=f,t.weekdays=an,t.parseZone=Ge,t.localeData=x,t.isDuration=Pt,t.monthsShort=un,t.weekdaysMin=ln,t.defineLocale=w,t.weekdaysShort=cn,t.normalizeUnits=S,t.relativeTimeThreshold=kn,t}),define("clc.foundation.angular/filters/format-string-filter",["numeraljs","moment"],function(t,e){var n,r;return r={},n=function(){return function(n,o,i,s){var u,a,c,l,h,p,f,d,m;if(null==s&&(s=""),!n&&0!==n)return s;if(!i)return n;switch(o){case"float":case"int":case"increase-float":case"decrease-float":case"increase-int":case"decrease-int":h=t(n).format(i);break;case"enum":case"state":if(r.hasOwnProperty(i))u=r[i];else{if(i=i.trim(),"{"===i[0])u=angular.fromJson(i);else for(u={},l=i.split(","),p=0,f=l.length;p<f;p++)c=l[p],a=c.split(":"),2===a.length&&(u[a[0].trim()]=a[1].trim());r[i]=u}h=null!=(d=null!=(m=u[n])?m:u.else)?d:n;break;case"datetime":h=e(n).format(i);break;default:h=n}return h}},{FormatStringFilter:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/signal",["../view-model","../../filters/format-string-filter"],function(t,e){var n;return n=function(t){function n(t,r){n.__super__.constructor.call(this,t,r),this.equipment=this.parent.parent,this.station=this.equipment.station,this.data={},this.formatString=e.FormatStringFilter()}return __extends(n,t),n.prototype.getIds=function(){var t;return t=this.equipment.getIds(),t.signal=this.model.signal,t},n.prototype.setValue=function(t){return this.data={unit:t.unit,severity:t.severity,value:t.value,lastValue:t.lastValue,formatValue:this.formatString(t.value,this.model.dataType,this.model.format),timestamp:new Date(t.timestamp)}},n}(t.ViewModel),{Signal:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/signals",["../items-model","./signal"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmentsignals"),null==(o=this.options).keys&&(o.keys=["user","project","station","equipment","signal"]),this.equipment=this.parent}return __extends(n,t),n.prototype.createItem=function(t){return new e.Signal(this,t)},n.prototype.getKey=function(t){var e,n;return n=this.options.keysSeperator||".",e=this.equipment.model,""+e.user+n+e.project+n+e.station+n+e.equipment+n+t.signal},n}(t.ItemsModel),{Signals:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/event",["../view-model"],function(t){var e;return e=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.equipment=this.parent.parent,this.station=this.equipment.station,this.data={}}return __extends(e,t),e.prototype.getIds=function(){var t;return t=this.equipment.getIds(),t.event=this.model.event,t},e.prototype.setValue=function(t){var e;if(!(t.startTime<this.data.startTime))return this.data=e=t,e},e}(t.ViewModel),{Event:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/events",["../items-model","./event"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmentevents"),null==(o=this.options).keys&&(o.keys=["user","project","station","equipment","event"]),this.equipment=this.parent}return __extends(n,t),n.prototype.createItem=function(t){return new e.Event(this,t)},n.prototype.getKey=function(t){var e,n;return n=this.options.keysSeperator||".",e=this.equipment.model,""+e.user+n+e.project+n+e.station+n+e.equipment+n+t.event},n}(t.ItemsModel),{Events:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/command",["../view-model"],function(t){var e;return e=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.equipment=this.parent.parent,this.station=this.equipment.station,this.data={}}return __extends(e,t),e.prototype.setModel=function(t,n){var r,o,i,s,u,a,c,l,h,p,f;if(!e.__super__.setModel.call(this,t,n))return!1;if(this.model.parameters)for(f=this.model.parameters,c=0,h=f.length;c<h;c++)if(s=f[c],"enum"===s.type&&s.definition){for(r=[],i=s.definition.split(","),l=0,p=i.length;l<p;l++)o=i[l],u=o.split(":"),a=u[0],a=isNaN(a)?a:Number(a),r.push({key:u[1]+" ("+a+")",value:a});s.enums=r}return!0},e.prototype.getIds=function(){var t;return t=this.equipment.getIds(),t.command=this.model.command,t},e.prototype.setValue=function(t){var e,n,r,o,i,s,u,a,c;e={};for(n in t)s=t[n],e[n]=s;if(o={},i="",e.parameters)for(c=e.parameters,u=0,a=c.length;u<a;u++)r=c[u],o[r.key]=r.value,i&&(i+=", "),i+=r.key+"="+r.value;return e.parameters3=i,"user"===e.trigger?e.triggerName=e.operatorName:e.triggerName=e.trigger,this._data=t,this.data=e},e.prototype.getParameterValue=function(t){var e;switch(e=t.value,t.type){case"float":e=parseFloat(e);break;case"int":e=parseInt(e);break;case"bool":e=Bool(e);break;case"enum":isNaN(e)||(e=Number(e))}return e},e.prototype.getParameterValues=function(){var t,e,n,r,o;for(e=[],o=this.model.parameters,n=0,r=o.length;n<r;n++)t=o[n],e.push({key:t.key,value:this.getParameterValue(t)});return e},e}(t.ViewModel),{Command:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/commands",["../items-model","./command"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmentcommands"),null==(o=this.options).keys&&(o.keys=["user","project","station","equipment","command"]),this.equipment=this.parent}return __extends(n,t),n.prototype.createItem=function(t){return new e.Command(this,t)},n.prototype.getKey=function(t){var e,n;return n=this.options.keysSeperator||".",e=this.equipment.model,""+e.user+n+e.project+n+e.station+n+e.equipment+n+t.command},n}(t.ItemsModel),{Commands:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/port",["../view-model"],function(t){var e;return e=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.equipment=this.parent.parent,this.station=this.equipment.station,this.data={}}return __extends(e,t),e.prototype.getIds=function(){var t;return t=this.equipment.getIds(),t.port=this.model.port,t},e.prototype.setValue=function(t){var e;return this.data=e=t,e},e}(t.ViewModel),{Port:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/ports",["../items-model","./port"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmentports"),null==(o=this.options).keys&&(o.keys=["user","project","station","equipment","port"]),this.equipment=this.parent}return __extends(n,t),n.prototype.createItem=function(t){return new e.Port(this,t)},n.prototype.getKey=function(t){var e,n;return n=this.options.keysSeperator||".",e=this.equipment.model,""+e.user+n+e.project+n+e.station+n+e.equipment+n+t.port},n}(t.ItemsModel),{Ports:n}}),function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},e=t._,n=Array.prototype,r=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,i=n.push,s=n.slice,u=r.toString,a=r.hasOwnProperty,c=Array.isArray,l=Object.keys,h=Object.create,p=function(){},f=function(t){return t instanceof f?t:this instanceof f?void(this._wrapped=t):new f(t)};"undefined"==typeof exports||exports.nodeType?t._=f:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=f),exports._=f),f.VERSION="1.9.1";var d,m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}},v=function(t,e,n){return f.iteratee!==d?f.iteratee(t,e):null==t?f.identity:f.isFunction(t)?m(t,e,n):f.isObject(t)&&!f.isArray(t)?f.matcher(t):f.property(t)};f.iteratee=d=function(t,e){return v(t,e,1/0)};var y=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}},_=function(t){if(!f.isObject(t))return{};if(h)return h(t);p.prototype=t;var e=new p;return p.prototype=null,e},g=function(t){return function(e){return null==e?void 0:e[t]}},b=function(t,e){return null!=t&&a.call(t,e)},w=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},x=Math.pow(2,53)-1,C=g("length"),S=function(t){var e=C(t);return"number"==typeof e&&0<=e&&e<=x};f.each=f.forEach=function(t,e,n){var r,o;if(e=m(e,n),S(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=f.keys(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t},f.map=f.collect=function(t,e,n){e=v(e,n);for(var r=!S(t)&&f.keys(t),o=(r||t).length,i=Array(o),s=0;s<o;s++){var u=r?r[s]:s;i[s]=e(t[u],u,t)}return i};var E=function(t){return function(e,n,r,o){var i=3<=arguments.length;return function(e,n,r,o){var i=!S(e)&&f.keys(e),s=(i||e).length,u=0<t?0:s-1;for(o||(r=e[i?i[u]:u],u+=t);0<=u&&u<s;u+=t){var a=i?i[u]:u;r=n(r,e[a],a,e)}return r}(e,m(n,o,4),r,i)}};f.reduce=f.foldl=f.inject=E(1),f.reduceRight=f.foldr=E(-1),f.find=f.detect=function(t,e,n){var r=(S(t)?f.findIndex:f.findKey)(t,e,n)
;if(void 0!==r&&-1!==r)return t[r]},f.filter=f.select=function(t,e,n){var r=[];return e=v(e,n),f.each(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r},f.reject=function(t,e,n){return f.filter(t,f.negate(v(e)),n)},f.every=f.all=function(t,e,n){e=v(e,n);for(var r=!S(t)&&f.keys(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(!e(t[s],s,t))return!1}return!0},f.some=f.any=function(t,e,n){e=v(e,n);for(var r=!S(t)&&f.keys(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(e(t[s],s,t))return!0}return!1},f.contains=f.includes=f.include=function(t,e,n,r){return S(t)||(t=f.values(t)),("number"!=typeof n||r)&&(n=0),0<=f.indexOf(t,e,n)},f.invoke=y(function(t,e,n){var r,o;return f.isFunction(e)?o=e:f.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),f.map(t,function(t){var i=o;if(!i){if(r&&r.length&&(t=w(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)})}),f.pluck=function(t,e){return f.map(t,f.property(e))},f.where=function(t,e){return f.filter(t,f.matcher(e))},f.findWhere=function(t,e){return f.find(t,f.matcher(e))},f.max=function(t,e,n){var r,o,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,a=(t=S(t)?t:f.values(t)).length;u<a;u++)null!=(r=t[u])&&i<r&&(i=r);else e=v(e,n),f.each(t,function(t,n,r){o=e(t,n,r),(s<o||o===-1/0&&i===-1/0)&&(i=t,s=o)});return i},f.min=function(t,e,n){var r,o,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,a=(t=S(t)?t:f.values(t)).length;u<a;u++)null!=(r=t[u])&&r<i&&(i=r);else e=v(e,n),f.each(t,function(t,n,r){((o=e(t,n,r))<s||o===1/0&&i===1/0)&&(i=t,s=o)});return i},f.shuffle=function(t){return f.sample(t,1/0)},f.sample=function(t,e,n){if(null==e||n)return S(t)||(t=f.values(t)),t[f.random(t.length-1)];var r=S(t)?f.clone(t):f.values(t),o=C(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,s=0;s<e;s++){var u=f.random(s,i),a=r[s];r[s]=r[u],r[u]=a}return r.slice(0,e)},f.sortBy=function(t,e,n){var r=0;return e=v(e,n),f.pluck(f.map(t,function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var k=function(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=v(r,o),f.each(n,function(e,o){var s=r(e,o,n);t(i,e,s)}),i}};f.groupBy=k(function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]}),f.indexBy=k(function(t,e,n){t[n]=e}),f.countBy=k(function(t,e,n){b(t,n)?t[n]++:t[n]=1});var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;f.toArray=function(t){return t?f.isArray(t)?s.call(t):f.isString(t)?t.match(D):S(t)?f.map(t,f.identity):f.values(t):[]},f.size=function(t){return null==t?0:S(t)?t.length:f.keys(t).length},f.partition=k(function(t,e,n){t[n?0:1].push(e)},!0),f.first=f.head=f.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:f.initial(t,t.length-e)},f.initial=function(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},f.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:f.rest(t,Math.max(0,t.length-e))},f.rest=f.tail=f.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},f.compact=function(t){return f.filter(t,Boolean)};var M=function(t,e,n,r){for(var o=(r=r||[]).length,i=0,s=C(t);i<s;i++){var u=t[i];if(S(u)&&(f.isArray(u)||f.isArguments(u)))if(e)for(var a=0,c=u.length;a<c;)r[o++]=u[a++];else M(u,e,n,r),o=r.length;else n||(r[o++]=u)}return r};f.flatten=function(t,e){return M(t,e,!1)},f.without=y(function(t,e){return f.difference(t,e)}),f.uniq=f.unique=function(t,e,n,r){f.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=v(n,r));for(var o=[],i=[],s=0,u=C(t);s<u;s++){var a=t[s],c=n?n(a,s,t):a;e&&!n?(s&&i===c||o.push(a),i=c):n?f.contains(i,c)||(i.push(c),o.push(a)):f.contains(o,a)||o.push(a)}return o},f.union=y(function(t){return f.uniq(M(t,!0,!0))}),f.intersection=function(t){for(var e=[],n=arguments.length,r=0,o=C(t);r<o;r++){var i=t[r];if(!f.contains(e,i)){var s;for(s=1;s<n&&f.contains(arguments[s],i);s++);s===n&&e.push(i)}}return e},f.difference=y(function(t,e){return e=M(e,!0,!0),f.filter(t,function(t){return!f.contains(e,t)})}),f.unzip=function(t){for(var e=t&&f.max(t,C).length||0,n=Array(e),r=0;r<e;r++)n[r]=f.pluck(t,r);return n},f.zip=y(f.unzip),f.object=function(t,e){for(var n={},r=0,o=C(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var O=function(t){return function(e,n,r){n=v(n,r);for(var o=C(e),i=0<t?0:o-1;0<=i&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}};f.findIndex=O(1),f.findLastIndex=O(-1),f.sortedIndex=function(t,e,n,r){for(var o=(n=v(n,r,1))(e),i=0,s=C(t);i<s;){var u=Math.floor((i+s)/2);n(t[u])<o?i=u+1:s=u}return i};var P=function(t,e,n){return function(r,o,i){var u=0,a=C(r);if("number"==typeof i)0<t?u=0<=i?i:Math.max(i+a,u):a=0<=i?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,o)]===o?i:-1;if(o!=o)return 0<=(i=e(s.call(r,u,a),f.isNaN))?i+u:-1;for(i=0<t?u:a-1;0<=i&&i<a;i+=t)if(r[i]===o)return i;return-1}};f.indexOf=P(1,f.findIndex,f.sortedIndex),f.lastIndexOf=P(-1,f.findLastIndex),f.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},f.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(s.call(t,r,r+=e));return n};var T=function(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=_(t.prototype),s=t.apply(i,o);return f.isObject(s)?s:i};f.bind=y(function(t,e,n){if(!f.isFunction(t))throw new TypeError("Bind must be called on a function");var r=y(function(o){return T(t,r,e,this,n.concat(o))});return r}),f.partial=y(function(t,e){var n=f.partial.placeholder,r=function(){for(var o=0,i=e.length,s=Array(i),u=0;u<i;u++)s[u]=e[u]===n?arguments[o++]:e[u];for(;o<arguments.length;)s.push(arguments[o++]);return T(t,r,this,this,s)};return r}),(f.partial.placeholder=f).bindAll=y(function(t,e){var n=(e=M(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=f.bind(t[r],t)}}),f.memoize=function(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return b(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n},f.delay=y(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),f.defer=f.partial(f.delay,f,1),f.throttle=function(t,e,n){var r,o,i,s,u=0;n||(n={});var a=function(){u=!1===n.leading?0:f.now(),r=null,s=t.apply(o,i),r||(o=i=null)},c=function(){var c=f.now();u||!1!==n.leading||(u=c);var l=e-(c-u);return o=this,i=arguments,l<=0||e<l?(r&&(clearTimeout(r),r=null),u=c,s=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(a,l)),s};return c.cancel=function(){clearTimeout(r),u=0,r=o=i=null},c},f.debounce=function(t,e,n){var r,o,i=function(e,n){r=null,n&&(o=t.apply(e,n))},s=y(function(s){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(i,e),u&&(o=t.apply(this,s))}else r=f.delay(i,e,this,s);return o});return s.cancel=function(){clearTimeout(r),r=null},s},f.wrap=function(t,e){return f.partial(e,t)},f.negate=function(t){return function(){return!t.apply(this,arguments)}},f.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},f.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},f.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},f.once=f.partial(f.before,2),f.restArguments=y;var A=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=function(t,e){var n=N.length,o=t.constructor,i=f.isFunction(o)&&o.prototype||r,s="constructor";for(b(t,s)&&!f.contains(e,s)&&e.push(s);n--;)(s=N[n])in t&&t[s]!==i[s]&&!f.contains(e,s)&&e.push(s)};f.keys=function(t){if(!f.isObject(t))return[];if(l)return l(t);var e=[];for(var n in t)b(t,n)&&e.push(n);return A&&j(t,e),e},f.allKeys=function(t){if(!f.isObject(t))return[];var e=[];for(var n in t)e.push(n);return A&&j(t,e),e},f.values=function(t){for(var e=f.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},f.mapObject=function(t,e,n){e=v(e,n);for(var r=f.keys(t),o=r.length,i={},s=0;s<o;s++){var u=r[s];i[u]=e(t[u],u,t)}return i},f.pairs=function(t){for(var e=f.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},f.invert=function(t){for(var e={},n=f.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},f.functions=f.methods=function(t){var e=[];for(var n in t)f.isFunction(t[n])&&e.push(n);return e.sort()};var $=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=t(i),u=s.length,a=0;a<u;a++){var c=s[a];e&&void 0!==n[c]||(n[c]=i[c])}return n}};f.extend=$(f.allKeys),f.extendOwn=f.assign=$(f.keys),f.findKey=function(t,e,n){e=v(e,n);for(var r,o=f.keys(t),i=0,s=o.length;i<s;i++)if(e(t[r=o[i]],r,t))return r};var q,I,F=function(t,e,n){return e in n};f.pick=y(function(t,e){var n={},r=e[0];if(null==t)return n;f.isFunction(r)?(1<e.length&&(r=m(r,e[1])),e=f.allKeys(t)):(r=F,e=M(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var s=e[o],u=t[s];r(u,s,t)&&(n[s]=u)}return n}),f.omit=y(function(t,e){var n,r=e[0];return f.isFunction(r)?(r=f.negate(r),1<e.length&&(n=e[1])):(e=f.map(M(e,!1,!1),String),r=function(t,n){return!f.contains(e,n)}),f.pick(t,r,n)}),f.defaults=$(f.allKeys,!0),f.create=function(t,e){var n=_(t);return e&&f.extendOwn(n,e),n},f.clone=function(t){return f.isObject(t)?f.isArray(t)?t.slice():f.extend({},t):t},f.tap=function(t,e){return e(t),t},f.isMatch=function(t,e){var n=f.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var s=n[i];if(e[s]!==o[s]||!(s in o))return!1}return!0},q=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&I(t,e,n,r)},I=function(t,e,n,r){t instanceof f&&(t=t._wrapped),e instanceof f&&(e=e._wrapped);var i=u.call(t);if(i!==u.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return o.valueOf.call(t)===o.valueOf.call(e)}var s="[object Array]"===i;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,c=e.constructor;if(a!==c&&!(f.isFunction(a)&&a instanceof a&&f.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!q(t[l],e[l],n,r))return!1}else{var h,p=f.keys(t);if(l=p.length,f.keys(e).length!==l)return!1;for(;l--;)if(h=p[l],!b(e,h)||!q(t[h],e[h],n,r))return!1}return n.pop(),r.pop(),!0},f.isEqual=function(t,e){return q(t,e)},f.isEmpty=function(t){return null==t||(S(t)&&(f.isArray(t)||f.isString(t)||f.isArguments(t))?0===t.length:0===f.keys(t).length)},f.isElement=function(t){return!(!t||1!==t.nodeType)},f.isArray=c||function(t){return"[object Array]"===u.call(t)},f.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},f.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){f["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),f.isArguments(arguments)||(f.isArguments=function(t){return b(t,"callee")});var B=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof B&&(f.isFunction=function(t){return"function"==typeof t||!1}),f.isFinite=function(t){return!f.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},f.isNaN=function(t){return f.isNumber(t)&&isNaN(t)},f.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)},f.isNull=function(t){return null===t},f.isUndefined=function(t){return void 0===t},f.has=function(t,e){if(!f.isArray(e))return b(t,e);for(var n=e.length,r=0;r<n;r++){var o=e[r];if(null==t||!a.call(t,o))return!1;t=t[o]}return!!n},f.noConflict=function(){return t._=e,this},f.identity=function(t){return t},f.constant=function(t){return function(){return t}},f.noop=function(){},f.property=function(t){return f.isArray(t)?function(e){return w(e,t)}:g(t)},f.propertyOf=function(t){return null==t?function(){}:function(e){return f.isArray(e)?w(t,e):t[e]}},f.matcher=f.matches=function(t){return t=f.extendOwn({},t),function(e){return f.isMatch(e,t)}},f.times=function(t,e,n){var r=Array(Math.max(0,t));e=m(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},f.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},f.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=f.invert(L),U=function(t){var e=function(e){return t[e]},n="(?:"+f.keys(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}};f.escape=U(L),f.unescape=U(R),f.result=function(t,e,n){f.isArray(e)||(e=[e]);var r=e.length;if(!r)return f.isFunction(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=f.isFunction(i)?i.call(t):i}return t};var z=0;f.uniqueId=function(t){var e=++z+"";return t?t+e:e},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,W=function(t){return"\\"+Y[t]};f.template=function(t,e,n){!e&&n&&(e=n),e=f.defaults({},e,f.templateSettings);var r,o=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(o,function(e,n,r,o,u){return s+=t.slice(i,u).replace(V,W),i=u+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}var u=function(t){return r.call(this,t,f)};return u.source="function("+(e.variable||"obj")+"){\n"+s+"}",u},f.chain=function(t){var e=f(t);return e._chain=!0,e};var G=function(t,e){return t._chain?f(e).chain():e};f.mixin=function(t){return f.each(f.functions(t),function(e){var n=f[e]=t[e];f.prototype[e]=function(){var t=[this._wrapped];return i.apply(t,arguments),G(this,n.apply(f,t))}}),f},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];f.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],G(this,n)}}),f.each(["concat","join","slice"],function(t){var e=n[t];f.prototype[t]=function(){return G(this,e.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}();var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/equipment",["../view-model","./properties","./signals","./events","./commands","./ports","underscore","rx"],function(t,e,n,r,o,i,s,u){var a;return a=function(t){function a(t,s){a.__super__.constructor.call(this,t,s),this.station=this.parent.parent,this.project=this.station.project,this.properties=new e.Properties(this),this.signals=new n.Signals(this),this.events=new r.Events(this),this.commands=new o.Commands(this),this.ports=new i.Ports(this),this.sampleUnits={},this.propertyValues={},this.subject=new u.Subject}return __extends(a,t),a.prototype.getIds=function(){var t;return t=this.station.getIds(),t.equipment=this.model.equipment,t},a.prototype.loadEquipmentTemplate=function(t,e,n){var r;return!n&&this.templateLoaded?"function"==typeof e?e(null,this.equipmentTemplate):void 0:(r={type:this.model.type,template:this.model.template},this.project.loadEquipmentTemplate(r,t,function(t){return function(n,r){return t.templateLoaded=!0,t.setEquipmentTemplate(r),"function"==typeof e?e(n,t.equipmentTemplate):void 0}}(this),n))},a.prototype.setModel=function(t,e){return!!a.__super__.setModel.call(this,t,e)&&(this.setImage(),this.updatePropertyValues(),!0)},a.prototype.updatePropertyValues=function(){var t,e,n,r,o,i,s,u,a,c;for(n={},a=this.properties.items,o=0,s=a.length;o<s;o++)e=a[o],n[e.model.property]=e.getValue();if(this.model.properties)for(c=this.model.properties,i=0,u=c.length;i<u;i++)e=c[i],n[e.id]=e.value;for(t in n)r=n[t],this.setPropertyValue(t,r);return this.propertyValues},a.prototype.setImage=function(){var t,e;return this.image=null!=(t=this.model.image)?t:null!=(e=this.equipmentTemplate)?e.getModelValue("image"):void 0},a.prototype.setEquipmentTemplate=function(t){var e,n,r,o,i;if(t&&(this.setImage(),this.sampleUnits=t.getSampleUnits(),this.model.sampleUnits))for(i=this.model.sampleUnits,r=0,o=i.length;r<o;r++)n=i[r],(e=this.sampleUnits[n.id])&&null!=n.value&&(e.value=n.value);return this.equipmentTemplate=t},a.prototype.getChanges=function(t){var e,n,r,o,i,u,c,l;for(e=a.__super__.getChanges.call(this,t),r=[],l=this.properties.items,u=0,c=l.length;u<c;u++)o=l[u],o.isChanged()&&(n={id:o.model.property,value:o.value},r.push(n));return e.properties=r,i=s.map(this.sampleUnits,function(t){return{id:t.id,value:t.value}}),e.sampleUnits=i,e},a.prototype.loadProperties=function(t,e,n){return!n&&this.propertiesLoaded?"function"==typeof e?e(null,this.properties.items):void 0:this.loadEquipmentTemplate(null,function(r){return function(o,i){return r.propertiesLoaded=!0,i?i.loadProperties(t,function(t,n){var o;return n?(o=r.addProperties(n),"function"==typeof e?e(t,o):void 0):"function"==typeof e?e(t):void 0},n):"function"==typeof e?e(o):void 0}}(this),n)},a.prototype.addProperties=function(t){var e,n,r,o,i,s,u,a,c,l;if(r=function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)o=t[e],r.push(o.model);return r}(),n=this.properties.addItems(r),t=this.propertyValues)for(s=0,a=n.length;s<a;s++)e=n[s],e.setValue(t[e.model.property]);for(i=this.project.typeModels.units,u=0,c=n.length;u<c;u++)e=n[u],null==t[e.model.property]&&this.setPropertyValue(e.model.property,e.getValue()),e.unit=null!=(l=i.getItem(e.model.unit))?l.model:void 0;return n},a.prototype.getPropertyValue=function(t,e){var n;return null!=(n=this.propertyValues[t])?n:e},a.prototype.setPropertyValue=function(t,e){var n,r;return r=this.properties.getItemByIds({property:t}),r&&(e=r.setValue(e)),n=this.propertyValues[t],e===n?e:(this.propertyValues[t]=e,this.subject.onNext({type:"property",key:t,value:e,oldValue:n}),e)},a.prototype.subscribePropertyValue=function(t,e,n,r){var o,i,s;return n&&(o={type:"property",key:t,value:this.propertyValues[t]},"function"==typeof e&&e(o)),s=this.subject,s=s.where(function(e){return"property"===e.type&&e.key===t}),r&&(s=s.throttle(r)),i=s.subscribe(e),this.addHandler(i),i},a.prototype.subscribePropertiesValue=function(t,e,n){var r,o;return o=this.subject,n&&(o=o.throttle(n)),r=o.where(d(function(){return"property"===d.type&&t.indexOf(d.key)>=0})).subscribe(e),this.addHandler(r),r},a.prototype.loadSignals=function(t,e,n){return!n&&this.signalsLoaded?"function"==typeof e?e(null,this.signals.items):void 0:this.loadEquipmentTemplate(null,function(r){return function(o,i){return r.signalsLoaded=!0,i?i.loadSignals(t,function(t,n){var o;return n?(o=r.addSignals(n),"function"==typeof e?e(t,o):void 0):"function"==typeof e?e(t):void 0},n):"function"==typeof e?e(o):void 0}}(this),n)},a.prototype.addSignals=function(t){var e,n,r,o,i,s;for(r=function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)o=t[e],r.push(o.model);return r}(),n=this.signals.addItems(r),i=0,s=n.length;i<s;i++)e=n[i],this.station.signals[e.key]=e,this.project.addSignal(e);return n},a.prototype.loadEvents=function(t,e,n){return!n&&this.eventsLoaded?"function"==typeof e?e(null,this.events.items):void 0:this.loadEquipmentTemplate(null,function(r){return function(o,i){return r.eventsLoaded=!0,i?i.loadEvents(t,function(t,n){var o;return n?(o=r.addEvents(n),"function"==typeof e?e(t,o):void 0):"function"==typeof e?e(t):void 0},n):"function"==typeof e?e(o):void 0}}(this),n)},a.prototype.addEvents=function(t){var e,n,r,o,i,s;for(o=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.model);return o}(),r=this.events.addItems(o),i=0,s=r.length;i<s;i++)n=r[i],this.station.events[n.key]=n,this.project.addEvent(n);return r},a.prototype.loadCommands=function(t,e,n){return!n&&this.commandsLoaded?"function"==typeof e?e(null,this.commands.items):void 0:this.loadEquipmentTemplate(null,function(r){return function(o,i){return r.commandsLoaded=!0,i?i.loadCommands(t,function(t,n){var o;return n?(o=r.addCommands(n),"function"==typeof e?e(t,o):void 0):"function"==typeof e?e(t):void 0},n):"function"==typeof e?e(o):void 0}}(this),n)},a.prototype.addCommands=function(t){var e,n,r,o,i,s;for(o=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(e.model);return o}(),r=this.commands.addItems(o),i=0,s=r.length;i<s;i++)n=r[i],this.station.commands[n.key]=n,this.project.addCommand(n);return r},a.prototype.loadPorts=function(t,e,n){return!n&&this.portsLoaded?"function"==typeof e?e(null,this.ports.items):void 0:this.loadEquipmentTemplate(null,function(r){return function(o,i){return r.portsLoaded=!0,i?i.loadPorts(t,function(t,n){var o;return n?(o=r.addPorts(n),"function"==typeof e?e(t,o):void 0):"function"==typeof e?e(t):void 0},n):"function"==typeof e?e(o):void 0}}(this),n)},a.prototype.addPorts=function(t){var e,n,r,o,i,s;for(r=function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)o=t[e],r.push(o.model);return r}(),n=this.ports.addItems(r),i=0,s=n.length;i<s;i++)e=n[i],this.station.ports[e.key]=e,this.project.addPort(e);return n},a.prototype.dispose=function(t){return a.__super__.dispose.call(this,t),t||this.subject.dispose(),this.signals.dispose(t),this.events.dispose(t),this.commands.dispose(t),this.ports.dispose(t)},a.prototype.getTemplateValue2=function(t,e){var n;if(e)return n=e.model[t],null!=n?n:this.getTemplateValue2(t,e.base)},a.prototype.getTemplateValue=function(t){var e;return e=this.model[t],null!=e?e:this.getTemplateValue2(t,this.equipmentTemplate)},a.prototype.updateSignals=function(t,e){var n,r;return null==this.updateSignalsService&&(this.updateSignalsService=this.engine.modelManager.getService("updateSignals")),r=this.updateSignalsService.getUrl(this.model,!0),n={signals:t},this.updateSignalsService.postData(r,n,function(t){return function(n,r){return r&&t.setModel(r),t.display(n,"更新信号实例成功！"),"function"==typeof e?e(n,r):void 0}}(this))},a.prototype.updateEvents=function(t,e){var n,r;return null==this.updateEventsService&&(this.updateEventsService=this.engine.modelManager.getService("updateEvents")),r=this.updateEventsService.getUrl(this.model,!0),n={events:t},this.updateEventsService.postData(r,n,function(t){return function(n,r){return r&&t.setModel(r),t.display(n,"更新事件实例成功！"),"function"==typeof e?e(n,r):void 0}}(this))},a.prototype.updateCommands=function(t,e){var n,r;return null==this.updateCommandsService&&(this.updateCommandsService=this.engine.modelManager.getService("updateCommands")),r=this.updateCommandsService.getUrl(this.model,!0),n={commands:t},this.updateCommandsService.postData(r,n,function(t){return function(n,r){return r&&t.setModel(r),t.display(n,"更新控制实例成功！"),"function"==typeof e?e(n,r):void 0}}(this))},a}(t.ViewModel),{Equipment:a}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/equipments",["../items-model","./equipment"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipments"),null==(o=this.options).keys&&(o.keys=["user","project","station","equipment"])}return __extends(n,t),n.prototype.createItem=function(t){return new e.Equipment(this,t)},n}(t.ItemsModel),{Equipments:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/station",["../view-model","./equipments"],function(t,e){var n;return n=function(t){function n(t,r){n.__super__.constructor.call(this,t,r),this.stations=[],this.stationKeys={},this.stationIds=[r.station],this.project=this.parent.parent,this.equipments=new e.Equipments(this),this.signals={},this.events={},this.commands={},this.ports={},this.statistic={alarms:0,capacity:0,pue:0,equipments:0,stockItems:0,connections:0}}return __extends(n,t),n.prototype.getIds=function(){var t;return t=this.project.getIds(),t.station=this.model.station,t},n.prototype.appendStation=function(t){return this.stations.push(t),this.stationKeys[t.model.station]=t,this.stationIds.push(t.model.station)},n.prototype.containsStation=function(t){return this.model.station===t||this.stationKeys.hasOwnProperty(t)},n.prototype.loadEquipments=function(t,e,n,r){return null==t&&(t={}),null==t.user&&(t.user=this.model.user),null==t.project&&(t.project=this.model.project),null==t.station&&(t.station=this.model.station),this.equipments.load(t,e,function(t){return function(e,r){var o,i,s;if(r)for(i=0,s=r.length;i<s;i++)o=r[i],t.project.addEquipment(o);return"function"==typeof n?n(e,r):void 0}}(this),r)},n.prototype.loadEquipment=function(t,e,n,r){var o;return o={equipment:t,user:this.model.user,project:this.model.project,station:this.model.station},this.equipments.loadOne(o,e,function(t){return function(e,r){return r&&t.project.addEquipment(r),"function"==typeof n?n(e,r):void 0}}(this),r)},n.prototype.dispose=function(){n.__super__.dispose.apply(this,arguments),this.equipments.dispose(),this.signals={},this.events={},this.commands={},this.ports={}},n.prototype.loadStatisticByEquipmentTypes=function(t,e){var n,r,o;return o="inventory/statistic-by-equipment-types/:user/:project/:station",r={user:this.model.user,project:this.model.project,station:this.model.station},n=null,this.engine.query(o,r,n,function(e){return function(e,n){return"function"==typeof t?t(e,n):void 0}}(),e)},n.prototype.createEquipment=function(t,e){return null==t&&(t={}),null==t.user&&(t.user=this.model.user),null==t.project&&(t.project=this.model.project),null==t.station&&(t.station=this.model.station),null==t.enable&&(t.enable=!0),null==t.parent&&(t.parent=null!=e?e.model.equipment:void 0),this.equipment=this.equipments.createItem(t),this.equipment.parentEquipment=e,this.equipment},n.prototype.getEquipmentsByType=function(t){var e;return function(){var n,r,o,i;for(o=this.equipments.items,i=[],n=0,r=o.length;n<r;n++)e=o[n],e.model.type===t&&i.push(e);return i}.call(this)},n.prototype.getFirstEquipmentByType=function(t){var e,n,r,o;for(o=this.equipments.items,n=0,r=o.length;n<r;n++)if(e=o[n],e.model.type===t)return e;return null},n}(t.ViewModel),{Station:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/stations",["../items-model","./station"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="stations"),null==(o=this.options).keys&&(o.keys=["user","project","station"]),this.roots=[]}return __extends(n,t),n.prototype.createItem=function(t){return new e.Station(this,t)},n.prototype.load=function(t,e,r,o){return n.__super__.load.call(this,t,e,function(t){return function(e,n){return t.processStations(n),"function"==typeof r?r(e,n):void 0}}(this),o)},n.prototype.processStations=function(t){var e,n,r,o,i;if(t){for(e=function(n,r){var o,i,s,u;for(n.root=r,n.stations.length=0,o=n.model.station,s=0,u=t.length;s<u;s++)i=t[s],i.model.parent===o&&(i.parentStation=n,n.appendStation(i),e(i,r));return n},this.roots.length=0,o=0,i=t.length;o<i;o++)n=t[o],n.model.parent||(r=e(n,n),this.roots.push(r));return this.roots}},n.prototype.addNewItem=function(t){var e,r;return e=n.__super__.addNewItem.call(this,t),r=e.parentStation,r?(e.root=r.root,r.appendStation(e)):this.roots.push(e),e},n.prototype.removeItem=function(t){var e,r;if(e=n.__super__.removeItem.call(this,t))return r=e.parentStation,r?r.stations.splice(r.stations.indexOf(e),1):this.roots.splice(this.roots.indexOf(e),1),e},n}(t.ItemsModel),{Stations:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/equipment-type",["../view-model"],function(t){var e;return e=function(t){function e(t,n){e.__super__.constructor.call(this,t,n)}return __extends(e,t),e}(t.ViewModel),{EquipmentType:e}});var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/equipment-types",["../items-model","./equipment-type"],function(t,e){var n;return n=function(t){function n(t,e){this.buildCategoryTree=__bind(this.buildCategoryTree,this);var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="equipmenttypes"),null==(o=this.options).keys&&(o.keys=["user","project","type"])}return __extends(n,t),n.prototype.createItem=function(t){return new e.EquipmentType(this,t)},n.prototype.addItems=function(t){var e;return e=n.__super__.addItems.call(this,t),this.buildCategoryTree(e),e},n.prototype.buildCategoryTree=function(t,e){var n,r,o,i,s;if(e)for(e.categories=[],r=0,i=t.length;r<i;r++)n=t[r],n.model.base===e.model.type&&(e.categories.push(n),this.buildCategoryTree(t,n));else for(this.categories=[],o=0,s=t.length;o<s;o++)n=t[o],n.model.base||(this.categories.push(n),this.buildCategoryTree(t,n));return this.categories},n}(t.ItemsModel),{EquipmentTypes:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/project",["../view-model","../items-model","./equipment-templates","./stations","./equipment-types"],function(t,e,n,r,o){var i;return i=function(t){function i(t,e){i.__super__.constructor.call(this,t,e),this.equipmentTemplates=new n.EquipmentTemplates(this),this.stations=new r.Stations(this),this.equipments={},this.signals={},this.signalTopics={},this.statisticTopics={},this.events={},this.eventTopics={},this.commands={},this.commandTopics={},this.ports={},this.loadModels()}return __extends(i,t),i.prototype.loadModels=function(){return this.dictionary=this.typeModels={},this.createTypeModel("datatypes","type"),this.createTypeModel("stationtypes","type"),this.createTypeModel("signaltypes","type"),this.createTypeModel("eventtypes","type"),this.createTypeModel("eventseverities","severity"),this.createTypeModel("eventphases","phase"),this.createTypeModel("units","unit"),this.createTypeModel("vendors","vendor"),
this.createTypeModel("capacities","capacity"),this.createTypeModel("porttypes","type"),this.createTypeModel("equipmenttypes","type",o.EquipmentTypes)},i.prototype.getIds=function(){return{user:this.model.user,project:this.model.project}},i.prototype.createTypeModel=function(t,n,r){var o;return null==r&&(r=e.ItemsModel),o=new r(this,{id:t,keys:[n]}),this.typeModels[t]=o,o},i.prototype.loadTypeModel=function(t,e,n,r){var o,i;return(i=this.typeModels[t])?(o={user:this.model.user,project:this.model.project},i.load(o,e,n,r)):void("function"==typeof n&&n("unknown type: "+t))},i.prototype.loadTypeModels=function(t,e){var n,r,o,i;n={user:this.model.user,project:this.model.project},i=this.typeModels;for(r in i)o=i[r],o.load(n,null,t,e)},i.prototype.getTypeProperty=function(t,e,n){var r,o;return null!=(r=this.typeModels[t])&&null!=(o=r.getItem(e))?o.model[n]:void 0},i.prototype.loadStations=function(t,e,n){var r;return r={user:this.model.user,project:this.model.project},this.stations.load(r,t,e,n)},i.prototype.loadEquipmentTemplates=function(t,e,n,r){return null==t&&(t={}),null==t.user&&(t.user=this.model.user),null==t.project&&(t.project=this.model.project),this.equipmentTemplates.load(t,e,n,r)},i.prototype.loadEquipmentTemplate=function(t,e,n,r){return null==t&&(t={}),null==t.user&&(t.user=this.model.user),null==t.project&&(t.project=this.model.project),this.equipmentTemplates.loadEquipmentTemplate(t,e,n,r)},i.prototype.dispose=function(){var t,e,n;i.__super__.dispose.apply(this,arguments),n=this.typeModels;for(t in n)e=n[t],e.dispose();this.equipmentTemplates.dispose(),this.stations.dispose(),this.signals={},this.events={},this.commands={},this.ports={}},i.prototype.addEquipment=function(t){return this.equipments[t.key]=t},i.prototype.getEquipment=function(t){return this.equipments[t]},i.prototype.getEquipmentByIds=function(t){var e;if(e=this.stations.getItemByIds(t))return e.equipments.getItemByIds(t)},i.prototype.addSignal=function(t){var e,n,r;return e=t.equipment.model,n="signal-values/"+e.user+"/"+e.project+"/"+e.station+"/"+e.equipment+"/"+t.model.signal,this.signalTopics[n]=t,r="signal-statistics/"+e.user+"/"+e.project+"/"+e.station+"/"+e.equipment+"/"+t.model.signal,this.statisticTopics[r]=t,this.signals[t.key]=t,t},i.prototype.getSignal=function(t){return this.signals[t]},i.prototype.getSignalByTopic=function(t){return this.signalTopics[t]},i.prototype.getSignalByStatisticTopic=function(t){return this.statisticTopics[t]},i.prototype.addEvent=function(t){var e,n;return e=t.equipment.model,n="event-values/"+e.user+"/"+e.project+"/"+e.station+"/"+e.equipment+"/"+t.model.event,this.eventTopics[n]=t,this.events[t.key]=t,t},i.prototype.getEvent=function(t){return this.events[t]},i.prototype.getEventByTopic=function(t){return this.eventTopics[t]},i.prototype.addCommand=function(t){var e,n;return e=t.equipment.model,n="command-values/"+e.user+"/"+e.project+"/"+e.station+"/"+e.equipment+"/"+t.model.command,this.commandTopics[n]=t,this.commands[t.key]=t,t},i.prototype.getCommand=function(t){return this.commands[t]},i.prototype.getCommandByTopic=function(t){return this.commandTopics[t]},i.prototype.addPort=function(t){return this.ports[t.key]=t},i.prototype.getPort=function(t){return this.ports[t]},i.prototype.createStation=function(t){var e;return e={user:this.model.user,project:this.model.project,parent:null!=t?t.model.station:void 0},this.station=this.stations.createItem(e),this.station.parentStation=t,this.station.root=this,this.station},i}(t.ViewModel),{Project:i}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/common/projects",["../items-model","./project"],function(t,e){var n;return n=function(t){function n(t,e){var r,o;n.__super__.constructor.call(this,t,e),null==(r=this.options).id&&(r.id="project"),null==(o=this.options).keys&&(o.keys=["user","project"])}return __extends(n,t),n.prototype.createItem=function(t){return new e.Project(this,t)},n}(t.ItemsModel),{Projects:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/models/model-engine",["../services/service","./common/projects"],function(t,e){var n;return n=function(t){function n(t,r,o){this.$rootScope=t,this.modelManager=r,this.storage=o,n.__super__.constructor.apply(this,arguments),this.caches={},this.options=window.setting,this.projects=new e.Projects({engine:this})}return __extends(n,t),n.prototype.loadProjects=function(t,e,n,r){return this.projects.load(t,e,n,r),this.projects},n.prototype.loadProject=function(t,e,n,r){return this.projects.load(t,e,function(e){return function(r,o){var i,s,u,a,c,l,h;if(r)return n(r);for(a=0,c=o.length;a<c;a++)if(u=o[a],i=u.model,i.user===t.user&&i.project===t.project)return s={user:i.user,userName:i.userName,project:i.project,name:i.name,role:null!=(l=i._role)?l.role:void 0,portal:null!=(h=i._role)?h.portal:void 0},e.storage.set("myproject",s),"function"==typeof n?n(r,u):void 0;return"function"==typeof n?n("无效项目："+t.user+"."+t.project):void 0}}(this),r)},n.prototype.query=function(t,e,n,r,o){var i,s,u,a,c;return u=t+"&"+JSON.stringify(e)+"&"+n,i=this.caches[u],!o&&i?void("function"==typeof r&&r(null,i)):(s=t,c=this.options.services.model+"/"+this.options.services.api+"/"+t,a=this.modelManager.getService(s,c),a.query(e,n,function(t){return function(e,n){return t.caches[u]=n,"function"==typeof r?r(e,n):void 0}}(this),o))},n}(t.Service),{ModelEngine:n}}),define("clc.foundation.angular/live/topic-parser",[],function(){var t;return t=function(){function t(){this.patterns={}}return t.prototype.parse=function(t){var e,n;return n=this.patterns[t],n||(e=t.replace(/\+/g,"[^/]+").replace(/#$/,".+")+"$",n=new RegExp(e),this.patterns[t]=n),n},t.prototype.match=function(t,e){var n;return n=this.parse(t),n.test(e)},t.prototype.dispose=function(){return this.patterns={}},t}(),{TopicParser:t}}),function(t,e){"use strict";if("function"==typeof define&&define.amd)define("js-shortid",e);else if("undefined"!=typeof module&&module.exports)module.exports=e();else{var n=t.shortid,r=e();r.noConflict=function(){return t.shortid=n,r},t.shortid=r}}(this,function(){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e=function(t,e){return(t+e).slice(-t.length)},n=function(t){this._opt=t||{}};return n.prototype={_toBase:function(e,n){var r=this._opt,o=r.symbols||t,i="";if(n>o.length||n<=1)return!1;for(;e>=1;)i=o[e-n*Math.floor(e/n)]+i,e=Math.floor(e/n);return n<11?parseInt(i):i},_salts:function(){for(var t=this,n=t._opt,r=n.salts||2,o="",i=0;i<r;i++){var s=Math.floor(3844*Math.random());o+=e("00",t._toBase(s,62))}return o},gen:function(){var t=this,e=t._opt,n=e.interval||1,r=e.initTime||14603328e5,o=n>0?Math.floor(((new Date).getTime()-r)/n):0,i=t._salts();return 0===o?i:t._toBase(o,62)+i}},{inst:function(t){return new n(t)},gen:function(t){return new n(t).gen()},uuid:function(){return new n({salts:4}).gen()}}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/live/live-service",["../services/service","rx","./topic-parser","js-shortid"],function(t,e,n,r){var o,i,s,u,a;return a=0,u=0,o=0,i=-1,s=function(t){function s(t,r){this.$rootScope=t,this.socket=r,s.__super__.constructor.apply(this,arguments),this.topicParsers=new n.TopicParser,this.subject=new e.Subject,this.initializeRpc(),this.initializeSocket(this.socket)}return __extends(s,t),s.prototype.initializeSocket=function(t){return t.on("auth",function(t){return function(e){return t.onAuth(e)}}(this)),t.on("project",function(t){return function(e){return t.onProject(e)}}(this)),t.on("message",function(t){return function(e){return t.subject.onNext(e)}}(this)),t.on("rpc",function(t){return function(e){return t.rpcSubject.onNext(e)}}(this)),t.on("connect",function(t){return function(){return console.log((new Date).toISOString()+" socket.io connect success"),t.state=o,t.$rootScope.connection=o,t.$rootScope.connectionTimestamp=new Date,t.authenticate()}}(this)),t.on("reconnecting",function(t){return function(e){return console.log((new Date).toISOString()+" reconnecting: "+e),t.$rootScope.connection=e}}(this)),t.on("disconnect",function(t){return function(){return console.log((new Date).toISOString()+" disconnect"),t.state=i,t.$rootScope.connection=i,t.$rootScope.connectionTimestamp=new Date,t.disposeAuth()}}(this))},s.prototype.authenticate=function(){return this.$rootScope.$watch("user",function(t){return function(){var e,n,r;if((n=t.$rootScope.user)&&(null!=(r=t.lastUser)?r.user:void 0)!==n.user)return t.lastUser={user:n.user},e={user:n.user,token:n.token},t.emit("auth",e)}}(this))},s.prototype.authProject=function(){return this.$rootScope.$watch("project",function(t){return function(){var e,n,r,o,i;if((n=t.$rootScope.project)&&((null!=n?n.model:void 0)&&(n=n.model),!t.lastProject||t.lastProject.user!==n.user||t.lastProject.project!==n.project))return t.lastProject={user:n.user,project:n.project},e={user:n.user,project:n.project,token:null!=(r=null!=(o=t.token)?o.token:void 0)?r:null!=(i=t.$rootScope.user)?i.token:void 0},t.emit("project",e)}}(this))},s.prototype.dispose=function(){return s.__super__.dispose.apply(this,arguments),this.subject.dispose(),this.rpcSubject.dispose(),this.disposeAuth()},s.prototype.disposeAuth=function(){return this.lastUser=null,this.lastProject=null,this.token=null,this.role=null},s.prototype.onAuth=function(t){return this.token=t,t.err?this.display(t.err):(console.log((new Date).toISOString()+" live token: "+t.user+"/"+t.token),this.authProject())},s.prototype.onProject=function(t){var e,n,r,o,i,s,u,a,c;return this.role=t.role,this.role&&this.resumeSubscriptions(),t.err?this.display(t.err):(r=this.role.user,r||(r=null!=(o=null!=(i=this.$rootScope.project)&&null!=(s=i.model)?s.user:void 0)?o:this.$rootScope.myproject.user),e=this.role.project,e||(e=null!=(u=null!=(a=this.$rootScope.project)&&null!=(c=a.model)?c.project:void 0)?u:this.$rootScope.myproject.project),n=this.role.role,!n&&this.role.isAdmin&&(n="admin"),console.log((new Date).toISOString()+" live role: "+this.$rootScope.user.user+"@"+r+"/"+e+"/"+n))},s.prototype.resumeSubscriptions=function(){var t,e,n,r,o,i;e=[],i=this.handlers;for(r in i)n=i[r],o=n.target,t={id:o.id,topic:o.topic,history:o.history,options:o.options},e.push(t);if(e.length)return this.emit("subscribe",e)},s.prototype.subscribe=function(t,e,n,r){var o,i,s;return null==n&&(n=!0),o={id:++a,topic:t,history:n,options:r},i=this.subject.where(function(t){return function(t){return t.id===o.id}}()).subscribe(function(t){return function(t){return"function"==typeof e?e(t.err,t):void 0}}()),this.role&&this.emit("subscribe",o),s={id:o.id,topic:o.topic,history:o.history,options:o.options,callback:e,dispose:function(t){return function(){return i.dispose(),t.emit("unsubscribe",o)}}(this)},this.addHandle(s)},s.prototype.publish=function(t,e,n){var r;if(this.role)return r={id:++u,topic:t,message:e,timestamp:new Date,options:n},this.emit("publish",r),r},s.prototype.emit=function(t,e){if(this.state===o)return this.socket.emit(t,e)},s.prototype.initializeRpc=function(){return this.rpcs={},this.rpcSubject=new e.Subject,this.rpcSubject.subscribe(function(t){return function(e){var n;return n=t.rpcs[e.key],null!=n?n.onResponse(e):void 0}}(this))},s.prototype.rpc=function(t,e){var n,o,i,s,u;return null==t.key&&(t.key=r.gen()),n=t.key,u=new Date,o={key:n,timestamp:u,service:t.service,method:t.method,parameters:t.parameters},i={request:o,callback:e},this.rpcs[n]=i,t.timeout>0&&(s=this.setTimeout(function(t){return function(){return"function"==typeof i.callback&&i.callback("timeout"),delete t.rpcs[n]}}(this),t.timeout)),i.onResponse=function(t){return function(e){if((null!=e?e.key:void 0)===n)return s&&(s.dispose(),s=null),delete t.rpcs[n],i.response=e,"function"==typeof i.callback&&i.callback(e.err,e.data,e),i.callback=null}}(this),this.emit("rpc",o),i},s}(t.Service),{LiveService:s}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/query-service",["./service"],function(t){var e;return e=function(t){function e(t,n){this.$rootScope=t,this.$http=n,e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.onSuccess=function(t,e,n){var r,o,i,s;return this.$rootScope.loading=!1,r=null!=(i=t.data)?i:{},r._err?(o=null!=(s=r._err.message)?s:r._err,"function"==typeof e?e(o):void 0):n||"string"==typeof r?"function"==typeof e?e(null,r):void 0:"function"==typeof e?e(null,r.data,r.paging):void 0},e.prototype.onError=function(t,e,n){var r,o,i,s;return this.$rootScope.loading=!1,r=null!=(i=t.data)?i:{},o=(null!=r?r._err:void 0)?null!=(s=r._err.message)?s:r._err:"error: "+t.status,"function"==typeof e?e(o,r):void 0},e.prototype.beforeAction=function(){return this.$rootScope.loading=!0},e.prototype.query=function(t,e,n,r){var o;return t=this.replaceUrlParam(t,null!=(o=e.filter)?o:{}),e=this.appendToken(e),this.beforeAction(),this.$http.get(t,{params:e}).then(function(t){return function(e){return t.onSuccess(e,n,r)}}(this)).catch(function(t){return function(e){return t.onError(e,n,r)}}(this))},e.prototype.replaceUrlParam=function(t,e,n){var r;return r=t.replace(/\/:([^\/\s]*)/g,function(t,r){var o;return o=e[r],n||delete e[r],null!=o?"/"+o:"/+"}),"+"===r[r.length-1]&&(r=r.substr(0,r.length-2)),r},e}(t.Service),{QueryService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/reporting-service",["./query-service"],function(t){var e;return e=function(t){function e(t,n,r){this.urls=r,e.__super__.constructor.call(this,t,n)}return __extends(e,t),e.prototype.queryRecords=function(t,e,n,r){var o;return o=this.urls[t],o?this.query(o,e,n,r):n(t+" url is not defined")},e.prototype.querySignalRecords=function(t,e){var n;return n="reporting.records.signal",this.queryRecords(n,t,e)},e.prototype.querySignalGroupRecords=function(t,e){var n;return n="reporting.records.signal-group",this.queryRecords(n,t,e)},e.prototype.queryEventRecords=function(t,e){var n;return n="reporting.records.event",this.queryRecords(n,t,e)},e.prototype.queryCommandRecords=function(t,e){var n;return n="reporting.records.command",this.queryRecords(n,t,e)},e.prototype.querySignalStatistics=function(t,e){var n;return n="reporting.records.signal-statistic",this.queryRecords(n,t,e)},e.prototype.queryOperations=function(t,e){var n;return n="reporting.records.operation",this.queryRecords(n,t,e)},e.prototype.queryNotifications=function(t,e){var n;return n="reporting.records.notification",this.queryRecords(n,t,e)},e.prototype.queryTasks=function(t,e){var n;return n="reporting.records.task",this.queryRecords(n,t,e)},e.prototype.aggregate=function(t,e,n){var r;return r=this.urls[t],r?this.query(r,e,n):n(t+" url is not defined")},e.prototype.aggregateSignalValues=function(t,e){var n;return n="reporting.aggregate.signal",this.aggregate(n,t,e)},e.prototype.aggregateSignalStatistics=function(t,e){var n;return n="reporting.aggregate.signal-statistic",this.aggregate(n,t,e)},e.prototype.aggregateCommandValues=function(t,e){var n;return n="reporting.aggregate.command",this.aggregate(n,t,e)},e.prototype.aggregateEventValues=function(t,e){var n;return n="reporting.aggregate.event",this.aggregate(n,t,e)},e.prototype.aggregateOperations=function(t,e){var n;return n="reporting.aggregate.operation",this.aggregate(n,t,e)},e.prototype.aggregateNotifications=function(t,e){var n;return n="reporting.aggregate.notification",this.aggregate(n,t,e)},e.prototype.aggregateTasks=function(t,e){var n;return n="reporting.aggregate.task",this.aggregate(n,t,e)},e.prototype.search=function(t,e,n){var r,o,i,s;null==e&&(e={}),o="model.search",i={user:this.$rootScope.project.user,project:this.$rootScope.project.project,keywords:t};for(r in e)s=e[r],i[r]=s;return this.queryRecords(o,i,n,!0)},e}(t.QueryService),{ReportingService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/rpc-service",["./service"],function(t){var e;return e=function(t){function e(t,n){this.httpService=n,e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.rpc=function(t,e,n,r){var o,i;return"get"!==r&&"post"!==r&&(r="get"),o={parameters:e,startTime:new Date},i="rpc/"+t,this.$rootScope.rpcing=!0,this.httpService[r](i,o,function(t){return function(e,r){return t.$rootScope.rpcing=!1,"function"==typeof n?n(e,r):void 0}}(this))},e}(t.Service),{RpcService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/services/home-service",["./rpc-service"],function(t){var e;return e=function(t){function e(t,n){e.__super__.constructor.call(this,t,n)}return __extends(e,t),e.prototype.echo=function(t,e){return this.rpc("home/echo",t,e)},e.prototype.getReadme=function(t,e){return this.rpc("home/getReadme",t,e)},e.prototype.getConfig=function(t,e){return this.rpc("home/getConfig",t,e)},e.prototype.restoreConfig=function(t,e){return this.rpc("home/restoreConfig",t,e,"post")},e.prototype.setConfig=function(t,e){return this.rpc("home/setConfig",t,e,"post")},e.prototype.restartProcess=function(t,e){return this.rpc("home/restartProcess",t,e,"post")},e}(t.RpcService),{HomeService:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};define("clc.foundation.angular/controllers/controller",["../disposable","rx"],function(t,e){var n;return n=function(t){function n(t,e,r,o,i){this.$scope=t,this.$rootScope=e,this.$routeParams=r,this.$location=o,this.$window=i,n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.initialize=function(t){var e;return n.__super__.initialize.call(this,t),window.controller=this,window.$controller=this,this.setting=window.setting,this.$rootScope.title=(null!=(e=this.options)?e.title:void 0)||"",this.search=this.$routeParams.search,this.initializeNotification(),this.initializeEventBus(),this.$scope.$on("$destroy",function(t){return function(){return t.dispose()}}(this)),this.$window.onbeforeunload=function(t){return function(e){return t.dispose()}}(this)},n.prototype.dispose=function(){return n.__super__.dispose.apply(this,arguments),this.notifySubject.dispose(),this.eventBus.dispose()},n.prototype.initializeEventBus=function(){return this.patterns={},this.eventBus=new e.Subject},n.prototype.publishEventBus=function(t,e){return this.eventBus.onNext({topic:t,message:e})},n.prototype.subscribeEventBus=function(t,e,n){var r;return r=this.eventBus.where(function(e){return function(n){return e.matchTopic(t,n.topic)}}(this)),n&&(r=r.throttle(n)),r.subscribe(e)},n.prototype.matchTopic=function(t,e){var n,r;return r=this.patterns[t],r||(n=t.replace(/\+/g,"[^/]+").replace(/#$/,".+")+"$",r=new RegExp(n),this.patterns[t]=r),r.test(e)},n.prototype.initializeNotification=function(){var t;return this.audios={},this.notifySubject=new e.Subject,t=this.notifySubject.where(function(t){return"text"===t.type}).throttle(1e3).subscribe(function(t){return function(e){return t.showDesktopNotification(e.title,e.options)}}(this)),this.addHandle(t),t=this.notifySubject.where(function(t){return"audio"===t.type}).throttle(1e3).subscribe(function(t){return function(e){return t.playAudio(e.audio,e.options)}}(this)),this.addHandle(t)},n.prototype.display=function(t,e,n){var r,o,i,s;return(null!=t&&"function"==typeof t.indexOf?t.indexOf("[license-error]"):void 0)>=0?void this.redirect("/model/license"):!(o=this.formatErrorInfo(t,e))||(s=this.setting.toastThrottle||500,i=new Date,this.lastMessage&&(this.lastMessage=o&&i-this.lastMessage.timestamp<s))?void 0:(this.lastMessage={message:o,timestamp:i},r=this.setting.toastTime||n||5e3,M.toast({html:o,displayLength:r}))},n.prototype.formatErrorInfo=function(t,e){var n;return n=t?"object"==typeof t?JSON.stringify(t):t:e,n&&console.log((new Date).toISOString()+" "+n),n},n.prototype.getBaseUrl=function(){var t,e;return e=this.$location.absUrl(),t=e.indexOf("/#/"),t<0?e:e.substr(0,t)},n.prototype.encodeUrl=function(t){return btoa(t)},n.prototype.redirect=function(t){return this.$window.location.href=t},n.prototype.open=function(t,e){return window.open(t,e)},n.prototype.goto=function(t,e){if(this.$location.url(t),e)return this.applyChange()},n.prototype.gotoLastPath=function(){var t;if(t=this.$rootScope.lastPath)return this.goto(t)},n.prototype.goBack=function(){return this.$window.history.back()},n.prototype.goForward=function(){return this.$window.history.forward()},n.prototype.fullscreen=function(t){var e;if(t&&("string"!=typeof t||(e=angular.element(t),t=e[0])))if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement){if(document.exitFullscreen)return document.exitFullscreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen(Element.ALLOW_KEYBOARD_INPUT);if(document.mozExitFullScreen)return document.mozExitFullScreen();if(document.msExitFullscreen)return document.msExitFullscreen()}else{if(t.requestFullscreen)return t.requestFullscreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.msRequestFullscreen)return t.msRequestFullscreen()}},n.prototype.applyChange=function(){if(!this.$scope.$$phase)return this.$scope.$apply()},n.prototype.confirm=function(t,e,n,r,o){var i;return $("#prompt-modal").length>0?this.prompt(t,e,n,r,o):(console.log((new Date).toISOString()+" please add directive prompt-modal(options='vm.promptModal') into view for better confirm dialog"),i=confirm(t+" "+e),"function"==typeof n?n(i):void 0)},n.prototype.prompt=function(t,e,n,r,o){var i;i={title:t,message:e,enableComment:r,comment:o,confirm:function(t){return"function"==typeof n?n(t,this.comment):void 0}},this.$scope.$broadcast("openPromptModal",i)},n.prototype.downloadJsonFile=function(t,e){var n,r,o;if(null==e&&(e="download.json"),!t)return void console.error("No data");"object"==typeof t&&(t=JSON.stringify(t,void 0,2)),r=new Blob([t],{type:"text/json"}),o=document.createEvent("MouseEvents"),n=document.createElement("a"),n.download=e,n.href=window.URL.createObjectURL(r),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),o.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},n.prototype.downloadBlobFile=function(t,e){var n,r;r=document.createEvent("MouseEvents"),n=document.createElement("a"),n.download=e,n.href=window.URL.createObjectURL(t),n.dataset.downloadurl=[n.download,n.href].join(":"),r.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},n.prototype.notify=function(t,e){return this.notifySubject.onNext({title:t,options:e,type:"text"})},n.prototype.notifyAudio=function(t,e){return this.notifySubject.onNext({audio:t,options:e,type:"audio"})},n.prototype.showDesktopNotification=function(t,e){var n;return n=function(){var n;if(n=new Notification(t,e),e.onclick&&(n.onclick=function(t){return function(t){return e.onclick(t),n.close()}}()),e.delay)return setTimeout(function(){return n.close()},e.delay)},window.Notification?"granted"===Notification.permission?n():"denied"!==Notification.permission?Notification.requestPermission(function(t){return function(t){if("granted"===t)return n()}}()):void 0:M.toast({html:message,displayLength:delay})},n.prototype.closeModal=function(t){$(null!=t?t:".modal").modal("close")},n.prototype.openModal=function(t){$(null!=t?t:".modal").modal("open")},n.prototype.parseJson=function(t){var e;return"string"!=typeof t||"{"!==(e=t[0])&&"["!==e?t:JSON.parse(t)},n.prototype.playAudio=function(t){var e,n;if(t)return e=this.audios[t],e||(e=new Audio(t),this.audios[t]=e),null!=(n=e.play())?n.then(function(){return{}}).catch(function(t){var e;return console.error(null!=(e=t.message)?e:t)}):void 0,{dispose:function(){return e.pause()}}},n.prototype.normalizeKey=function(t,e){var n;if(null==e&&(e=this.current),e)return n=e[t],n&&(e[t]=n=n.replace(/[^\w\d_-]+/g,"_"),e.name||(e.name=n.charAt(0).toUpperCase()+n.substr(1))),n},n.prototype.getRootModule=function(t){var e,n,r,o;if(null==t&&(t="clc."),!(o=angular.element(document.body).injector().modules))return null;n=t.length;for(e in o)if(r=o[e],e.substring(0,n)===t)return r;return null},n.prototype.accessModule=function(t){var e,n,r,o,i;return!t||!!(o=this.$rootScope.user)&&(!!(n=this.$rootScope.project)&&("admin"===(i=o.user)||i===n.user||!!(r=this.$rootScope.role)&&(e=r.modules,"_all"===e[0]||__indexOf.call(e,t)>=0)))},n.prototype.downloadFileAsync=function(t,e){var n;return n=new XMLHttpRequest,n.open("GET",t),n.responseType="blob",n.onload=function(){var t;return t=200===this.status?null:this.status,e(t,n.response)},n.send()},n.prototype.findJsonValuesByKey=function(t,e){var n,r,o,i,s,u,a,c,l;if(s={},!t)return s;if(t instanceof Array)for(c=0,l=t.length;c<l;c++){n=t[c],i=this.findJsonValuesByKey(n,e);for(r in i)u=i[r],s[u]=u}else if("object"==typeof t)for(r in t)if(u=t[r],e instanceof Array&&__indexOf.call(e,r)>=0||r===e){if("string"==typeof u)s[u]=u;else if("object"==typeof u){i=this.findJsonValuesByKey(u,e);for(o in i)a=i[o],s[a]=a}}else{i=this.findJsonValuesByKey(u,e);for(o in i)a=i[o],s[a]=a}return s},n.prototype.findJsonValuesByProperty=function(t,e,n,r){var o,i,s,u,a,c,l,h,p,f;if(null==n&&(n="property"),null==r&&(r="value"),a={},!t)return a;if(t instanceof Array)for(p=0,f=t.length;p<f;p++){o=t[p],u=this.findJsonValuesByProperty(o,e,n,r);for(i in u)c=u[i],a[c]=c}else if("object"==typeof t)for(i in t)if(c=t[i],i===n&&(e instanceof Array&&__indexOf.call(e,c)>=0||c===e)){if("string"==typeof(h=t[r]))a[h]=h;else if("object"==typeof h){u=this.findJsonValuesByProperty(h,e,n,r);for(s in u)l=u[s],a[l]=l}}else{u=this.findJsonValuesByProperty(c,e,n,r);for(s in u)l=u[s],a[l]=l}return a},n.prototype.addLocationSearch=function(t){var e,n,r,o;if(t){n=null!=(o=this.$location.search())?o:{};for(e in t)r=t[e],n[e]=r;return this.$location.search(n).replace()}},n.prototype.onSearchChange=function(t){return null==t&&(t=this.search),this.addLocationSearch({search:t})},n.prototype.clearSearch=function(){return this.search=null,this.addLocationSearch({search:null})},n}(t.Disposable),{Controller:n}}),function(t){define("qrcode",[],function(){return function(){var e;return function(){function t(t){this.mode=c.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var r=[],o=this.data.charCodeAt(e);o>65536?(r[0]=240|(1835008&o)>>>18,r[1]=128|(258048&o)>>>12,r[2]=128|(4032&o)>>>6,r[3]=128|63&o):o>2048?(r[0]=224|(61440&o)>>>12,r[1]=128|(4032&o)>>>6,r[2]=128|63&o):o>128?(r[0]=192|(1984&o)>>>6,r[1]=128|63&o):r[0]=o,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function n(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function o(t,e){this.totalCount=t,this.dataCount=e}function i(){this.buffer=[],this.length=0}function s(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}function u(t,e){for(var n=1,r=a(t),o=0,i=m.length;o<=i;o++){var s=0;switch(e){case l.L:s=m[o][0];break;case l.M:s=m[o][1];break;case l.Q:s=m[o][2];break;case l.H:s=m[o][3]}if(r<=s)break;n++}if(n>m.length)throw new Error("Too long data");return n}function a(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},n.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[r][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=p.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n);this.make();for(var o=0;o<this.modules.length;o++)for(var i=1*o,s=0;s<this.modules[o].length;s++){var u=1*s,a=this.modules[o][s];a&&(r.beginFill(0,100),r.moveTo(u,i),r.lineTo(u+1,i),r.lineTo(u+1,i+1),r.lineTo(u,i+1),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],o=t[n];if(null==this.modules[r][o])for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)this.modules[r+i][o+s]=-2==i||2==i||-2==s||2==s||0==i&&0==s}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=p.getBCHTypeInfo(n),o=0;o<15;o++){var i=!t&&1==(r>>o&1)
;o<6?this.modules[o][8]=i:o<8?this.modules[o+1][8]=i:this.modules[this.moduleCount-15+o][8]=i}for(var o=0;o<15;o++){var i=!t&&1==(r>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=i:o<9?this.modules[8][15-o-1+1]=i:this.modules[8][15-o-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,o=7,i=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var u=0;u<2;u++)if(null==this.modules[r][s-u]){var a=!1;i<t.length&&(a=1==(t[i]>>>o&1));var c=p.getMask(e,r,s-u);c&&(a=!a),this.modules[r][s-u]=a,o--,-1==o&&(i++,o=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(t,e,r){for(var s=o.getRSBlocks(t,e),u=new i,a=0;a<r.length;a++){var c=r[a];u.put(c.mode,4),u.put(c.getLength(),p.getLengthInBits(c.mode,t)),c.write(u)}for(var l=0,a=0;a<s.length;a++)l+=s[a].dataCount;if(u.getLengthInBits()>8*l)throw new Error("code length overflow. ("+u.getLengthInBits()+">"+8*l+")");for(u.getLengthInBits()+4<=8*l&&u.put(0,4);u.getLengthInBits()%8!=0;)u.putBit(!1);for(;;){if(u.getLengthInBits()>=8*l)break;if(u.put(n.PAD0,8),u.getLengthInBits()>=8*l)break;u.put(n.PAD1,8)}return n.createBytes(u,s)},n.createBytes=function(t,e){for(var n=0,o=0,i=0,s=new Array(e.length),u=new Array(e.length),a=0;a<e.length;a++){var c=e[a].dataCount,l=e[a].totalCount-c;o=Math.max(o,c),i=Math.max(i,l),s[a]=new Array(c);for(var h=0;h<s[a].length;h++)s[a][h]=255&t.buffer[h+n];n+=c;var f=p.getErrorCorrectPolynomial(l),d=new r(s[a],f.getLength()-1),m=d.mod(f);u[a]=new Array(f.getLength()-1);for(var h=0;h<u[a].length;h++){var v=h+m.getLength()-u[a].length;u[a][h]=v>=0?m.get(v):0}}for(var y=0,h=0;h<e.length;h++)y+=e[h].totalCount;for(var _=new Array(y),g=0,h=0;h<o;h++)for(var a=0;a<e.length;a++)h<s[a].length&&(_[g++]=s[a][h]);for(var h=0;h<i;h++)for(var a=0;a<e.length;a++)h<u[a].length&&(_[g++]=u[a][h]);return _};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},h={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;p.getBCHDigit(e)-p.getBCHDigit(p.G15)>=0;)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;p.getBCHDigit(e)-p.getBCHDigit(p.G18)>=0;)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case h.PATTERN000:return(e+n)%2==0;case h.PATTERN001:return e%2==0;case h.PATTERN010:return n%3==0;case h.PATTERN011:return(e+n)%3==0;case h.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case h.PATTERN101:return e*n%2+e*n%3==0;case h.PATTERN110:return(e*n%2+e*n%3)%2==0;case h.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),n=0;n<t;n++)e=e.multiply(new r([1,f.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:case c.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var o=0;o<e;o++){for(var i=0,s=t.isDark(r,o),u=-1;u<=1;u++)if(!(r+u<0||e<=r+u))for(var a=-1;a<=1;a++)o+a<0||e<=o+a||0==u&&0==a||s==t.isDark(r+u,o+a)&&i++;i>5&&(n+=3+i-5)}for(var r=0;r<e-1;r++)for(var o=0;o<e-1;o++){var c=0;t.isDark(r,o)&&c++,t.isDark(r+1,o)&&c++,t.isDark(r,o+1)&&c++,t.isDark(r+1,o+1)&&c++,0!=c&&4!=c||(n+=3)}for(var r=0;r<e;r++)for(var o=0;o<e-6;o++)t.isDark(r,o)&&!t.isDark(r,o+1)&&t.isDark(r,o+2)&&t.isDark(r,o+3)&&t.isDark(r,o+4)&&!t.isDark(r,o+5)&&t.isDark(r,o+6)&&(n+=40);for(var o=0;o<e;o++)for(var r=0;r<e-6;r++)t.isDark(r,o)&&!t.isDark(r+1,o)&&t.isDark(r+2,o)&&t.isDark(r+3,o)&&t.isDark(r+4,o)&&!t.isDark(r+5,o)&&t.isDark(r+6,o)&&(n+=40);for(var l=0,o=0;o<e;o++)for(var r=0;r<e;r++)t.isDark(r,o)&&l++;return n+=Math.abs(100*l/e/e-50)/5*10}},f={glog:function(t){if(t<1)throw new Error("glog("+t+")");return f.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;d<8;d++)f.EXP_TABLE[d]=1<<d;for(var d=8;d<256;d++)f.EXP_TABLE[d]=f.EXP_TABLE[d-4]^f.EXP_TABLE[d-5]^f.EXP_TABLE[d-6]^f.EXP_TABLE[d-8];for(var d=0;d<255;d++)f.LOG_TABLE[f.EXP_TABLE[d]]=d;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<t.getLength();o++)e[n+o]^=f.gexp(f.glog(this.get(n))+f.glog(t.get(o)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f.glog(this.get(0))-f.glog(t.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<t.getLength();o++)n[o]^=f.gexp(f.glog(t.get(o))+e);return new r(n,0).mod(t)}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(t,e){var n=o.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],s=0;s<r;s++)for(var u=n[3*s+0],a=n[3*s+1],c=n[3*s+2],l=0;l<u;l++)i.push(new o(a,c));return i},o.getRsBlockTable=function(t,e){switch(e){case l.L:return o.RS_BLOCK_TABLE[4*(t-1)+0];case l.M:return o.RS_BLOCK_TABLE[4*(t-1)+1];case l.Q:return o.RS_BLOCK_TABLE[4*(t-1)+2];case l.H:return o.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var r in e)e.hasOwnProperty(r)&&n.setAttribute(r,e[r]);return n}var n=this._htOption,r=this._el,o=t.getModuleCount();Math.floor(n.width/o),Math.floor(n.height/o);this.clear();var i=e("svg",{viewBox:"0 0 "+String(o)+" "+String(o),width:"100%",height:"100%",fill:n.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(i),i.appendChild(e("rect",{fill:n.colorLight,width:"100%",height:"100%"})),i.appendChild(e("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<o;s++)for(var u=0;u<o;u++)if(t.isDark(s,u)){var a=e("use",{x:String(u),y:String(s)});a.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(a)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),y="svg"===document.documentElement.tagName.toLowerCase(),_=y?v:function(){return"undefined"!=typeof CanvasRenderingContext2D}()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var r=document.createElement("img"),o=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},i=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return r.onabort=o,r.onerror=o,r.onload=i,void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,o,i,s,u,a,c,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*n;else void 0===c&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);r.apply(this,arguments)}}var o=function(t,e){this._bIsPainted=!1,this._android=s(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return o.prototype.draw=function(t){var e=this._elImage,n=this._oContext,r=this._htOption,o=t.getModuleCount(),i=r.width/o,s=r.height/o,u=Math.round(i),a=Math.round(s);e.style.display="none",this.clear();for(var c=0;c<o;c++)for(var l=0;l<o;l++){var h=t.isDark(c,l),p=l*i,f=c*s;n.strokeStyle=h?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=h?r.colorDark:r.colorLight,n.fillRect(p,f,i,s),n.strokeRect(Math.floor(p)+.5,Math.floor(f)+.5,u,a),n.strokeRect(Math.ceil(p)-.5,Math.ceil(f)-.5,u,a)}this._bIsPainted=!0},o.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},o.prototype.isPainted=function(){return this._bIsPainted},o.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},o.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},o}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,r=t.getModuleCount(),o=Math.floor(e.width/r),i=Math.floor(e.height/r),s=['<table style="border:0;border-collapse:collapse;">'],u=0;u<r;u++){s.push("<tr>");for(var a=0;a<r;a++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+o+"px;height:"+i+"px;background-color:"+(t.isDark(u,a)?e.colorDark:e.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),n.innerHTML=s.join("");var c=n.childNodes[0],l=(e.width-c.offsetWidth)/2,h=(e.height-c.offsetHeight)/2;l>0&&h>0&&(c.style.margin=h+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();e=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(_=v),this._android=s(),this._el=t,this._oQRCode=null,this._oDrawing=new _(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},e.prototype.makeCode=function(t){this._oQRCode=new n(u(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},e.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},e.prototype.clear=function(){this._oDrawing.clear()},e.CorrectLevel=l}(),t.QRCode=e}.apply(t,arguments)})}(this);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/main-controller",["./controller","qrcode"],function(t,e){var n;return n=function(t){function n(t,e,r,o,i,s,u,a,c){this.$translate=s,this.storage=u,this.authService=a,this.modelManager=c,n.__super__.constructor.call(this,t,e,r,o,i),this.timestamp=new Date,this.languages=[{key:"cn",name:"中文",title:"切换语言"},{key:"en",name:"English",title:"Switch Language"}],this.loadLanguage()}return __extends(n,t),n.prototype.logout=function(){return this.authService.logout(function(t){return function(e){var n,r;return n=t.$rootScope.lastPath,(!n||n.indexOf("/401")>=0||n.indexOf("/error")>=0)&&(n="/"),r=t.getBaseUrl()+"/#/login?path="+n,r=t.encodeUrl(r),t.redirect(t.setting.urls.logout+"?url="+r)}}(this))},n.prototype.updateQRCode=function(t,n,r){var o,i;if(null==t&&(t="qrcode"),null==n&&(n=128),null==r&&(r=128),i=this.$location.absUrl(),this.lastQRPath!==i)return this.lastQRPath=i,this.qrcode?(this.qrcode.clear(),this.qrcode.makeCode(i)):(o=document.getElementById(t))?this.qrcode=new e(o,{text:i,width:n,height:r,colorDark:"#000000",colorLight:"#ffffff",correctLevel:e.CorrectLevel.H}):void 0},n.prototype.switchLanguage=function(t){return this.language=t,this.$translate.use(t.key),this.storage.set("language",t.key)},n.prototype.loadLanguage=function(){var t,e,n,r,o;if(e=this.storage.get("language"))for(o=this.languages,n=0,r=o.length;n<r;n++)if(t=o[n],t.key===e)return void this.switchLanguage(t);return this.switchLanguage(this.languages[0])},n.prototype.authenticate=function(){return this.loadAdminProject(function(t,e){return console.log(null!=t?t:e)})},n.prototype.loadAdminProject=function(t,e){var n,r,o,i;if(i=this.$location.url(),0!==i.indexOf("/login"))return n={user:"admin",project:"admin"},r=this.$rootScope.adminProject,!e&&r&&r.user===n.user&&r.project===n.project?(this.adminProject=r,"function"==typeof t?t(null,r):void 0):(o=this.modelManager.getService("project"),o.get(n,function(e){return function(n,r){return e.$rootScope.adminProject=e.adminProject=r,e.storage.set("adminProject",r),"function"==typeof t?t(n,r):void 0}}(this),e))},n}(t.Controller),{MainController:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/live-main-controller",["./main-controller"],function(t){var e,n;return n=0,e=function(t){function e(t,n,r,o,i,s,u,a,c,l){this.liveService=l,e.__super__.constructor.call(this,t,n,r,o,i,s,u,a,c)}return __extends(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.initializeConnectionStatus()},e.prototype.initializeConnectionStatus=function(t){var e;return null==t&&(t=1e4),this.connection=null,e=null,this.$rootScope.$watch("connection",function(r){return function(o){var i;if(r.connection!==o)if(r.connection=o,r.connection===n){if(e)return e.dispose(),e=null,i=M.Modal.getInstance("#statusModal"),"undefined"!=typeof modal&&null!==modal?modal.close():void 0}else if(!e)return e=r.setTimeout(function(){if(r.connection!==n)return i=M.Modal.getInstance("#statusModal"),"undefined"!=typeof modal&&null!==modal&&modal.open(),e=null},t)}}(this))},e}(t.MainController),{LiveMainController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/auth-controller",["./controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s){this.authService=s,e.__super__.constructor.call(this,t,n,r,o,i)}return __extends(e,t),e.prototype.initialize=function(t){var n,r,o;return e.__super__.initialize.call(this,t),this.$rootScope.loading=!0,r=this.$routeParams.token,r||(n=this.authService.getTokenCookie(!0))&&(r=n.token),r?(o=this.$routeParams.path||this.$rootScope.lastPath||"/",this.authenticate(r,function(t){return function(e,n){return t.display(e,""),e?t.login():t.$location.url(o).replace(),t.$rootScope.loading=!1}}(this))):(this.login(),this.$rootScope.loading=!1)},e.prototype.authenticate=function(t,e){return this.authService.authenticate(t,function(n){return function(r,o){var i;return r||(null!=o?o.user:void 0)||(r="无效的token: "+t),r||(i={username:o.user,token:t},n.authService.setTokenCookie(i,!0)),"function"==typeof e?e(r,o):void 0}}(this))},e.prototype.login=function(){var t;return t=this.getBaseUrl()+"/#/login?path="+this.$rootScope.lastPath,t=this.encodeUrl(t),this.redirect(this.setting.urls.login+"?url="+t)},e}(t.Controller),{AuthController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/paging-controller",["./controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i){var s,u,a,c;e.__super__.constructor.call(this,t,n,r,o,i),this.predicate="",this.reverse=!1,this.pageItems=12,a=this.$location.path(),u=null!=(c=this.$rootScope.pagings)?c[a]:void 0,this.page=this.$routeParams.page||u||1,this.pages=[],this.pageCount=0,this.itemCount=0,this.items=[],this.itemIds={},s=t.$watch("vm.pageItems",function(t){return function(e){return t.processPages(!0)}}(this)),this.addHandle(s)}return __extends(e,t),e.prototype.setItems=function(t){var e,n,r;if(t)if(t instanceof Array)for(this.items=t,n=0,r=t.length;n<r;n++)e=t[n],this.itemIds[e._id]=e;else this.itemIds[t._id]=t,this.items.push(t);else this.items=[],this.itemIds={};return this.processPages(),this.items},e.prototype.addItem=function(t){var e,n,r;if(t){if(e=this.itemIds[t._id]){for(n in t)r=t[n],e[n]=r;return e}return this.itemIds[t._id]=t,this.items.push(t),this.processPages(),t}},e.prototype.removeItem=function(t){var e;return t?(delete this.itemIds[t._id],e=this.items.indexOf(t),this.items.splice(e,1),this.processPages(),e):-1},e.prototype.removeById=function(t){var e;return e=this.itemIds[t],this.removeItem(e)},e.prototype.sortBy=function(t){return this.predicate===t?this.reverse=!this.reverse:(this.predicate=t,this.reverse=!0)},e.prototype.nextPage=function(){return this.setPage(this.page+1)},e.prototype.previousPage=function(){return this.setPage(this.page-1)},e.prototype.setPage=function(t){var e,n;return(!t||t>this.pageCount)&&(t=1),this.page=t,null==(n=this.$rootScope).pagings&&(n.pagings={}),e=this.$location.path(),this.$rootScope.pagings[e]=t,this.addLocationSearch({page:t})},e.prototype.processPages=function(t){var e,n,r;if(e=this.items.length,t||this.itemCount!==e)return this.itemCount=e,this.pageCount=Math.ceil(e/this.pageItems),0===this.pageCount?this.pages=[]:this.pages=function(){r=[];for(var t=1,e=this.pageCount;1<=e?t<=e:t>=e;1<=e?t++:t--)r.push(t);return r}.apply(this),n>this.pageCount?n=this.pageCount-1:void 0},e}(t.Controller),{PagingController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/model-controller",["./paging-controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u,a){this.$timeout=s,this.modelManager=u,this.options=a,e.__super__.constructor.call(this,t,n,r,o,i),this.current={},this.model={},this.modelService=this.modelManager.getService(this.options.type),this.initializeValidateKeys()}return __extends(e,t),e.prototype.initializeValidateKeys=function(){var t,e,n,r,o;if(e={},this.options.key instanceof Array)for(o=this.options.key,n=0,r=o.length;n<r;n++)t=o[n],e[t]=!0;return this.validateKeys=e},e.prototype.select=function(t){var e,n;if(this.current!==t)return this.current=null!=t?t:{},this.next=this.prev=null,t&&(e=this.items.indexOf(t),(n=this.items.length)>1&&(e>0&&(this.prev=this.items[e-1]),e<n-1&&(this.next=this.items[e+1]))),this.current},e.prototype.selectNext=function(t,e){var n,r;return r=this.itemIds[t],n=0,r&&(n=this.items.indexOf(r),n>=0?(n+=1)>=this.items.length&&(n=0):n=0),e&&1===this.items.length?this.select(null):this.select(this.items[n])},e.prototype.get=function(t,e,n){return this.modelService.get(t,function(t){return function(n,r){var o;return!n&&r&&(o=t.addItem(r))&&t.select(o),"function"==typeof e?e(n,r):void 0}}(this),n)},e.prototype.query=function(t,e,n,r){return this.modelService.query(t,e,function(t){return function(e,r){var o;return o=t.setItems(r),"function"==typeof n?n(e,o):void 0}}(this),r)},e.prototype.create=function(t,e){var n;return n=this.getChanges(),n?this.modelService.create(n,function(n){return function(r,o){var i;return!r&&o&&(i=n.addItem(o))&&n.select(i),n.display(r,null!=e?e:"数据创建成功！"),"function"==typeof t?t(r,o):void 0}}(this)):"function"==typeof t?t("cancel"):void 0},e.prototype.getChanges=function(){var t,e,n,r;e={},r=this.current;for(t in r)n=r[t],"_id"!==t&&"_"===t[0]||(e[t]=n);if(this.validate(e))return e},e.prototype.validate=function(t){var e,n;n=this.validateKeys;for(e in n)if(n[e]&&null==t[e])return this.display(e+"不能为空！"),!1;return!0},e.prototype.update=function(t,e){var n;return n=this.getChanges(),n?this.modelService.update(n,function(n){return function(r,o){var i;return!r&&o&&(i=n.addItem(o))&&n.select(i),n.display(r,null!=e?e:"数据更新成功！"),"function"==typeof t?t(r,o):void 0}}(this)):"function"==typeof t?t("cancel"):void 0},e.prototype.save=function(t,e){return this.current._removed?this.remove(t,e):this.current._id?this.update(t,e):this.create(t,e)},e.prototype.remove=function(t,e){var n;return n=this.getChanges(),n?this.modelService.remove(n,function(n){return function(r,o){var i,s,u,a,c;if(!r&&o){if(o instanceof Array)for(a=0,c=o.length;a<c;a++)u=o[a],i=n.removeById(u._id);else i=n.removeById(o._id);i>=0&&n.items.length>0&&(i>=n.items.length&&(i=n.items.length-1),s=n.items[i])}return n.select(s),n.display(r,null!=e?e:"数据删除成功！"),"function"==typeof t?t(r,o):void 0}}(this)):"function"==typeof t?t("cancel"):void 0},e.prototype.saveModel=function(t,e,n){var r;return"_back"===e?r=function(t){return function(){return t.goBack()}}(this):"string"==typeof e?r=function(t){return function(){return t.goto(e,!0)}}(this):"function"==typeof e&&(r=e),this.save(function(e){return function(n,o){if("function"==typeof t&&t(n,o),!n)return e.$rootScope.reload=!0,"function"==typeof r?r():void 0}}(this),n)},e.prototype.removeModel=function(t,e){var n,r,o;if(this.current)return this.confirm("确认删除："+(null!=(n=null!=(r=null!=(o=this.current.name)?o:this.current.id)?r:this.current.key)?n:this.current._id)+" ?","删除后将从数据库移除相关记录，不可恢复。",function(n){return function(r){return r?(n.current._removed=!0,n.saveModel(t,e)):"function"==typeof t?t("cancel"):void 0}}(this))},e}(t.PagingController),{ModelController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/model-with-upload-controller",["./model-controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u,a,c){var l;this.uploadService=a,e.__super__.constructor.call(this,t,n,r,o,i,s,u,c),null==(l=this.options).uploadUrl&&(l.uploadUrl=this.setting.urls.uploadUrl)}return __extends(e,t),e.prototype.upload=function(){return function(t){return function(e){return t.uploadImage(e)}}(this)},e.prototype.uploadImage=function(t){var e,n;if(t.files.length>0)return e=t.files[0],n=this.options.uploadUrl+"/"+e.name,this.uploadService.upload(e,n,function(t){return function(e,n){return t.$rootScope.err=e,t.current.image=n}}(this))},e.prototype.uploadBase64=function(t,e){var n;return n=this.toBlob(t),this.uploadBlob(n,e)},e.prototype.uploadBlob=function(t,e){var n,r,o;return n=t,r="test",o=this.options.uploadUrl+"/"+r,this.uploadService.upload(n,r,o,function(t){return function(t,n){return"function"==typeof e?e(t,n):void 0}}())},e.prototype.toBase64=function(t,e){var n;return n=new XMLHttpRequest,n.responseType="blob",n.onload=function(){var t;return t=new FileReader,t.onloadend=function(){return"function"==typeof e?e(null,t.result):void 0},0===n.status?t.readAsDataURL(n.response):"function"==typeof e?e(n.status):void 0},n.open("GET",t),n.send()},e.prototype.toBlob=function(t){var e,n,r,o;for(e=void 0,e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),o=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length),n=0;n<e.length;)r[n]=e.charCodeAt(n),n++;return new Blob([r],{type:o})},e}(t.ModelController),{ModelWithUploadController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/project-item-model-controller",["./model-with-upload-controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u,a,c){e.__super__.constructor.call(this,t,n,r,o,i,s,u,a,c),this.predicate="updatetime",this.pageItems=12,this.reverse=!0,this.idKey=this.options.key[this.options.key.length-1],this.$rootScope.myproject=this.project={user:this.$routeParams.user,project:this.$routeParams.project},this.onLoad(null,this.$rootScope.reload)}return __extends(e,t),e.prototype.onLoad=function(t,e){return this.load(t,e)},e.prototype.load=function(t,e){var n,r;return n={user:this.$routeParams.user,project:this.$routeParams.project},r=this.getQueryFields(),this.query(n,r,function(e){return function(n,r){return e.onQuery(n,r),"function"==typeof t?t(n,r):void 0}}(this),e)},e.prototype.getQueryFields=function(){var t;return this.options.key instanceof Array?(t=this.options.key.join(" "),t+=" name group updatetime",this.options.fields&&(t+=" "+this.options.fields)):t=null,t},e.prototype.select=function(t,n){var r,o,i,s,u,a,c;if(!(r=e.__super__.select.call(this,t)))return"function"==typeof n?n("select null item: "+(null!=t?t[this.idKey]:void 0)):void 0;if(t&&!t.createtime&&this.options.key instanceof Array){for(i={},c=this.options.key,u=0,a=c.length;u<a;u++)o=c[u],i[o]=t[o];this.get(i,n)}else"function"==typeof n&&n(null,r);return s=null!=t?t[this.idKey]:void 0,this.$routeParams[this.idKey]!==s?(i={},i[this.idKey]=s,this.addLocationSearch(i)):void 0},e.prototype.onQuery=function(t,e){if(this.items.length)return this.createItemKeys(),this.selectDefaultItem()},e.prototype.getKey=function(t){return t[this.idKey]},e.prototype.createItemKeys=function(){var t,e,n,r,o,i;for(n={},i=this.items,r=0,o=i.length;r<o;r++)t=i[r],e=this.getKey(t),t._key=e,n[e]=t;return this.keys=n},e.prototype.selectDefaultItem=function(){var t,e,n,r,o;if(1===this.items.length)return this.select(this.items[0]);if(null!=(e=this.$routeParams[this.idKey]))for(o=this.items,n=0,r=o.length;n<r;n++)if(t=o[n],t[this.idKey]===e)return void this.select(t);return this.select(this.items[0])},e.prototype.add=function(){return this.current={user:this.project.user,project:this.project.project}},e.prototype.create=function(t,n){var r,o;return null==(r=this.current).user&&(r.user=this.project.user),null==(o=this.current).project&&(o.project=this.project.project),e.__super__.create.call(this,t,n)},e.prototype.filterItem=function(t){return function(e){return function(n){return e.filterItemFunc(n,t)}}(this)},e.prototype.filterItemFunc=function(t,e){var n;return!(n=this.search)||(!!this.filterItemField(n,t,this.idKey,!0,e)||!!this.filterItemField(n,t,"name",!0,e))},e.prototype.filterItemField=function(t,e,n,r,o){var i,s,u;if(!t)return!0;if(i=e,o&&(i=i.model),r){if(t=t.toLowerCase(),(null!=(s=i[n])?s.toString().toLowerCase().indexOf(t):void 0)>=0)return!0}else if((null!=(u=i[n])?u.toString().indexOf(t):void 0)>=0)return!0;return!1},
e.prototype.filter=function(t,e,n,r){return null==e&&(e=["name"]),null==n&&(n=!0),function(o){return function(i){var s,u,a;if(!t)return!0;for(u=0,a=e.length;u<a;u++)if(s=e[u],o.filterItemField(t,i,s,n,r))return!0;return!1}}(this)},e.prototype.getNextName=function(t,e){return t?t.replace(/(\d*$)/,function(t,e){return e?parseInt(e)+1:"-0"}):e},e.prototype.copy=function(){var t;return t=angular.copy(this.current),delete t._id,t[this.idKey]=this.getNextName(t[this.idKey]),t.name=this.getNextName(t.name),this.current=t},e}(t.ModelWithUploadController),{ProjectItemModelController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};define("clc.foundation.angular/controllers/project-base-controller",["./project-item-model-controller"],function(t){var e,n;return e="_all",n=function(t){function n(t,e,r,o,i,s,u,a,c,l){this.modelEngine=a,n.__super__.constructor.call(this,t,e,r,o,i,s,u,c,l),this.starService=this.modelManager.getService("star"),this.$rootScope.myproject={user:this.$routeParams.user,project:this.$routeParams.project}}return __extends(n,t),n.prototype.dispose=function(){return n.__super__.dispose.apply(this,arguments),this.$rootScope.myproject=null},n.prototype.onLoad=function(t,e){return this.loadMyProject(function(n){return function(r,o){return r?"function"==typeof t?t(r,o):void 0:n.load(t,e)}}(this),e)},n.prototype.loadMyProject=function(t,e){var n,r,o;return n={user:this.$routeParams.user,project:this.$routeParams.project},n.project?(r=this.$rootScope.project,!e&&r&&r.user===n.user&&r.project===n.project?(this.project=r,"function"==typeof t?t(null,r):void 0):(o=this.modelManager.getService("project"),o.get(n,function(e){return function(n,r){return e.$rootScope.project=e.project=r,e.$rootScope.role=e.role=null!=r?r._role:void 0,e.modelEngine.storage.set("myproject",r),e.authenticateMyProject(n,r,t)}}(this),e))):"function"==typeof t?t("未知项目: "+n.user+"/"+n.project):void 0},n.prototype.authenticateMyProject=function(t,n,r){var o,i,s,u,a,c,l,h,p,f,d;return i=function(t){return function(e){return t.$rootScope.project=t.project=null,t.$rootScope.role=t.role=null,t.display(e),t.goto("/401"),"function"==typeof r&&r(e,n),!1}}(this),s=function(e){return function(){return e.accessModule(e.options.module)?("function"==typeof r&&r(null,n),!0):(t="用户"+e.$rootScope.user.user+"未授权访问模块"+e.options.module,e.display(t),e.goto("/401"),void("function"==typeof r&&r(t,n)))}}(this),t?i(t):n?(c=null!=(h=this.$rootScope.user)?h.user:void 0)?"admin"===c||c===n.user?s():(o=this.getRootModule(),u=null!=o?o.name:void 0,a=null!=(p=null!=(f=this.role)?f.services:void 0)?p:[],u&&a[0]!==e&&__indexOf.call(a,u)<0?i("登录用户["+c+"]未授权服务["+u+"]"):(l=null!=(d=this.role)?d.users:void 0,l?l[0]===e?s():__indexOf.call(l,c)<0?i("用户["+c+"]未授权项目["+this.$routeParams.user+"/"+this.$routeParams.project+"]"):s():i("项目角色未定义！"))):i("用户未登录！"):i("项目["+this.$routeParams.user+"/"+this.$routeParams.project+"]加载失败！")},n.prototype.star=function(t,e){var n,r;if(null==e&&(e=!0),t)return n={user:t.user,project:t.project,projectName:t.name,starUser:this.$rootScope.user.user,starUserName:this.$rootScope.user.name,remove:!e},r=this.starService.getUrl(n),this.starService.postData(r,n,function(n){return function(r,o){return(null!=o?o.user:void 0)&&angular.copy(o.user,n.$rootScope.user),(null!=o?o.project:void 0)&&angular.copy(o.project,t),e?n.display(r,"关注项目 "+t.user+"/"+t.project+" 成功"):n.display(r,"取消关注 "+t.user+"/"+t.project+" 成功")}}(this))},n.prototype.isStared=function(t){var e,n,r,o,i;if(!t)return!1;if(!(n=null!=(i=this.$rootScope.user)?i.starProjects:void 0))return!1;for(r=0,o=n.length;r<o;r++)if(e=n[r],t.user===e.user&&t.project===e.project)return!0;return!1},n.prototype.pasteLon=function(t,e){var n,r,o,i;return n=t.originalEvent.clipboardData.getData("text/plain"),i=n.split(","),o=i[0],r=i[1],this.$timeout(function(t){return function(){if(null!=o&&(e.longitude=o),null!=r)return e.latitude=r}}(),50)},n.prototype.pasteLat=function(t,e){var n,r,o,i;return n=t.originalEvent.clipboardData.getData("text/plain"),i=n.split(","),o=i[0],r=i[1],this.$timeout(function(t){return function(){if(null!=o&&null!=r)return e.longitude=o,e.latitude=r}}(),50)},n.prototype.isAdmin=function(){var t,e;return"admin"===(t=null!=(e=this.$rootScope.user)?e.user:void 0)||t===this.project.user},n.prototype.accessOperation=function(t){var n,r;return!!this.isAdmin()||!(null==(n=null!=(r=this.role)?r.operations:void 0)||!n.length)&&(n[0]===e||__indexOf.call(n,t)>=0)},n}(t.ProjectItemModelController),{ProjectBaseController:n}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/index-controller",["./project-base-controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u,a,c,l){e.__super__.constructor.call(this,t,n,r,o,i,s,u,a,c,l),this.pageItems=12,this.predicate=["stared","updatetime"]}return __extends(e,t),e.prototype.onLoad=function(t,e){return this.load(t,e)},e.prototype.load=function(t,e){return this.myproject=this.modelEngine.storage.get("myproject"),this.loadProjects(t,e)},e.prototype.loadProjects=function(t,e){var n,r,o;return this.setting.keyword&&(r={user:null!=(o=this.$rootScope.user)?o.user:void 0,keywords:this.setting.keyword}),n="user project _id name image updatetime stars keywords desc enable",this.query(r,n,function(e){return function(n,r){var o,i,s;if((null!=r?r.length:void 0)>0)for(i=0,s=r.length;i<s;i++)o=r[i],o.stared=e.isStared(o),!e.myproject&&o.stared&&(e.myproject=o);return"function"==typeof t?t(n,r):void 0}}(this),e)},e}(t.ProjectBaseController),{IndexController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/projects-controller",["./project-base-controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u,a,c,l){e.__super__.constructor.call(this,t,n,r,o,i,s,u,a,c,l),this.showMineOnly=!1,this.showStarsOnly=!1,this.predicate="updatetime",this.pageItems=12,this.reverse=!0}return __extends(e,t),e.prototype.onLoad=function(t,e){return this.load(t,e)},e.prototype.load=function(t,e){return this.loadProjects(t,e)},e.prototype.loadProjects=function(t,e){var n,r,o;return n={user:null!=(o=this.$rootScope.user)?o.user:void 0},r="user project _id name image updatetime stars enable visible group type",this.query(n,r,function(e){return function(n,r){return e.onQuery(n,r),"function"==typeof t?t(n,r):void 0}}(this),e)},e.prototype.filterItemFunc=function(t){return(!this.showMineOnly||t.user===this.$rootScope.user.user)&&(!(this.showStarsOnly&&!this.isStared(t))&&(!!e.__super__.filterItemFunc.call(this,t)||this.filterItemField(this.search,t,"user",!0)))},e}(t.ProjectBaseController),{ProjectsController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/project-controller",["./project-base-controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u,a,c,l){e.__super__.constructor.call(this,t,n,r,o,i,s,u,a,c,l)}return __extends(e,t),e}(t.ProjectBaseController),{ProjectController:e}});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("clc.foundation.angular/controllers/home-controller",["./controller"],function(t){var e;return e=function(t){function e(t,n,r,o,i,s,u){this.$timeout=s,this.homeService=u,e.__super__.constructor.call(this,t,n,r,o,i),this.getReadme(),this.getConfig()}return __extends(e,t),e.prototype.echo=function(){var t;return t={user:this.$rootScope.user.user,time:"client: "+(new Date).toISOString()},this.homeService.echo(t,function(t){return function(e,n){return t.echoResult=n,t.display(e,null!=n?n.method:void 0)}}(this))},e.prototype.isAdmnin=function(){var t;return"admin"===(null!=(t=this.$rootScope.user)?t.user:void 0)},e.prototype.getReadme=function(){return this.isAdmnin()?this.homeService.getReadme(null,function(t){return function(e,n){return e&&t.display(e),t.readme=null!=n?n.data:void 0}}(this)):this.display("请以系统管理员身份登录!")},e.prototype.getConfig=function(t){return this.isAdmnin()?this.homeService.getConfig(null,function(e){return function(n,r){if((n||t)&&e.display(n,"刷新配置成功!"),null!=r?r.data:void 0)return e.config=r.data,e.configJson=JSON.parse(e.config)}}(this)):this.display("请以系统管理员身份登录!")},e.prototype.restoreConfig=function(){return this.isAdmnin()?this.homeService.restoreConfig(null,function(t){return function(e,n){if(t.display(e,"恢复配置成功!"),null!=n?n.data:void 0)return t.config=n.data,t.configJson=JSON.parse(t.config)}}(this)):this.display("请以系统管理员身份登录!")},e.prototype.setConfig=function(){var t,e;if(!this.isAdmnin())return this.display("请以系统管理员身份登录!");if(this.configDetails||(this.config=JSON.stringify(this.configJson,null,4)),!this.config)return this.display("配置不能为空!");try{this.configJson=JSON.parse(this.config)}catch(e){if(t=e)return this.display(t.message)}return e={config:this.config},this.homeService.setConfig(e,function(t){return function(e,n){return t.display(e,"保存配置成功!")}}(this))},e.prototype.restartProcess=function(){return this.isAdmnin()?this.restarting=!0:this.display("请以系统管理员身份登录!")},e.prototype.restartProcess2=function(){return this.isAdmnin()?(this.restarting=!1,this.homeService.restartProcess(null,function(t){return function(e,n){return t.display(e,null!=n?n.data:void 0)}}(this))):this.display("请以系统管理员身份登录!")},e.prototype.toggleConfig=function(){return this.configDetails?this.configJson=JSON.parse(this.config):this.config=JSON.stringify(this.configJson,null,4),this.configDetails=!this.configDetails},e}(t.Controller),{HomeController:e}}),define("clc.foundation.angular/directives/materialize/accordion-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;return e={accordion:null==o.accordion||"true"===o.accordion,onOpenStart:o.onOpenStart,onOpenEnd:o.onOpenEnd,onCloseStart:o.onCloseStart,onCloseEnd:o.onCloseEnd,inDuration:o.inDuration||300,outDuration:o.outDuration||300},t.Collapsible.init(r,e)})}}},{AccordionDirective:e}}),define("clc.foundation.angular/directives/materialize/carousel-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;return e={duration:o.duration||200,dist:o.dist||-100,shift:o.duration||0,padding:o.padding||0,numVisible:o.numVisible||5,fullWidth:null!=o.fullWidth&&"true"===o.fullWidth,indicators:null==o.indicators||"true"===o.indicators,noWrap:null!=o.noWrap&&"true"===o.noWrap,onCycleTo:o.onCycleTo},t.Carousel.init(r,e)})}}},{CarouselDirective:e}}),define("clc.foundation.angular/directives/materialize/checkbox-directive",["materialize-css"],function(t){var e;return e=function(t){return{restrict:"AE",require:"ngModel",replace:!0,scope:{label:"@",checked:"@",disabled:"@",withGap:"@",filledIn:"@",ngModelOptions:"=",ngModel:"=",ngChange:"&",ngClick:"&",ngTrueValue:"@",ngFalseValue:"@"},template:"<label>\n  <input type='checkbox' ng-model='ngModel' ng-true-value=\"{{ngTrueValue == undefined ? true : ngTrueValue}}\" ng-false-value=\"{{ngFalseValue == undefined ? false : ngFalseValue}}\" ng-change='onChange($event)' ng-click='ngClick($event)' checked='{{checked}}' ng-disabled='disabled' ng-model-options='ngModelOptions' ng-class='{\"with-gap\": withGap, \"filled-in\": filledIn}' />\n  <span>{{label}}</span>\n</label>",link:function(e,n,r){return e.onChange=function(n){return t(function(){return e.ngChange(n)})}}}},{CheckboxDirective:e}}),define("clc.foundation.angular/directives/materialize/date-picker-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",require:"ngModel",link:function(n,r,o){return e(function(){var e;return e={autoClose:null!=o.autoClose&&"true"===o.autoClose,format:o.format||"yyyy-mm-dd",parse:o.parse,defaultDate:o.defaultDate||n.ngModel,parse:o.parse,setDefaultDate:null!=o.setDefaultDate&&"true"===o.setDefaultDate,disableWeekends:null!=o.disableWeekends&&"true"===o.disableWeekends,disableDayFn:o.disableDayFn,firstDay:o.firstDay||0,minDate:o.minDate,maxDate:o.maxDate,yearRange:o.yearRange||10,isRTL:null!=o.isRTL&&"true"===o.isRTL,showMonthAfterYear:null!=o.showMonthAfterYear&&"true"===o.showMonthAfterYear,showDaysInNextAndPreviousMonths:null!=o.showDaysInNextAndPreviousMonths&&"true"===o.showDaysInNextAndPreviousMonths,container:o.container,showClearBtn:null!=o.showClearBtn&&"true"===o.showClearBtn,i18n:o.i18n||{},events:o.events||[],onSelect:o.onSelect,onOpen:o.onOpen,onClose:o.onClose,onDraw:o.onDraw},t.Datepicker.init(r,e)})}}},{DatePickerDirective:e}}),define("clc.foundation.angular/directives/materialize/dropdown-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;e={alignment:o.alignment||"left",autoTrigger:null==o.autoTrigger||"true"===o.autoTrigger,constrainWidth:null==o.constrainWidth||"true"===o.constrainWidth,container:o.container,coverTrigger:null!=o.coverTrigger&&"true"===o.coverTrigger,closeOnClick:null==o.closeOnClick||"true"===o.closeOnClick,hover:null==o.hover||"true"===o.hover,inDuration:o.inDuration||150,outDuration:o.outDuration||250,onOpenStart:o.onOpenStart,onOpenEnd:o.onOpenEnd,onCloseStart:o.onCloseStart,onCloseEnd:o.onCloseEnd};try{return t.Dropdown.init(r,e)}catch(t){t}})}}},{DropdownDirective:e}}),define("clc.foundation.angular/directives/materialize/floating-action-button-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",scope:{message:"="},link:function(n,r,o){return e(function(){var e;return e={direction:o.direction||"top",hoverEnabled:!o.hoverEnabled||"true"===o.hoverEnabled,toolbarEnabled:!!o.toolbarEnabled&&"true"===o.toolbarEnabled},t.FloatingActionButton.init(r,e)})}}},{FloatingActionButtonDirective:e}}),define("clc.foundation.angular/directives/materialize/materialbox-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;return e={inDuration:o.inDuration||275,outDuration:o.outDuration||750,onOpenStart:o.onOpenStart,onOpenEnd:o.onOpenEnd,onCloseStart:o.onCloseStart,onCloseEnd:o.onCloseEnd},t.Materialbox.init(r,e)})}}},{MaterialBoxDirective:e}}),define("clc.foundation.angular/directives/materialize/modal-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e,i;return i={opacity:o.opacity||.5,inDuration:o.inDuration||250,outDuration:o.outDuration||250,onOpenStart:o.onOpenStart,onOpenEnd:o.onOpenEnd,onCloseStart:o.onCloseStart,onCloseEnd:o.onCloseEnd,preventScrolling:null==o.preventScrolling||"true"===o.preventScrolling,dismissible:null==o.dismissible||"true"===o.dismissible,startingTop:o.startingTop||"4%",endingTop:o.endingTop||"10%"},e=t.Modal.init(r,i),n.$on("$destroy",function(){var t;return null!=(t=e[0])?t.close():void 0})})}}},{ModalDirective:e}}),define("clc.foundation.angular/directives/materialize/pushpin-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;return e={top:o.top||0,top:o.bottom||1/0,offset:o.offset||0,onPositionChange:o.onPositionChange},t.Pushpin.init(r,e)})}}},{PushPinDirective:e}}),define("clc.foundation.angular/directives/materialize/radio-directive",["materialize-css"],function(t){var e;return e=function(t){return{restrict:"AE",require:"ngModel",replace:!0,scope:{name:"@",label:"@",value:"@",checked:"@",disabled:"@",withGap:"@",ngModelOptions:"=",ngModel:"=",ngChange:"&",ngClick:"&"},template:"<label>\n  <input name=\"{{name}}\" type=\"radio\" ng-model='ngModel'  ng-change='onChange($event)' ng-click='ngClick($event)' ng-disabled='disabled' value='{{value}}' checked='{{checked}}' ng-class='{\"with-gap\": withGap}' ng-model-options='ngModelOptions' />\n  <span>{{label}}</span>\n</label>",link:function(e,n,r){return e.onChange=function(n){return t(function(){return e.ngChange(n)})}}}},{RadioDirective:e}}),define("clc.foundation.angular/directives/materialize/scrollspy-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e,n;return e={throttle:o.throttle||100,scrollOffset:o.scrollOffset||200,activeClass:o.activeClass||"active",getActiveElement:null!=(n=o.getActiveElement)?n:function(t){return"a[href='#"+t+"'"}},t.ScrollSpy.init(r,e)})}}},{ScrollSpyDirective:e}}),define("clc.foundation.angular/directives/materialize/select-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",scope:{data:"=",ngModel:"="},link:function(n,r,o){return n.$watch("data",function(n){return e(function(){var e;e={classes:o.classes||"",dropdownOptions:o.dropdownOptions||{}};try{return t.FormSelect.init(r,e)}catch(t){t}})}),n.$watch("ngModel",function(n){return e(function(){var e;e={classes:o.classes||"",dropdownOptions:o.dropdownOptions||{}};try{return t.FormSelect.init(r,e)}catch(t){t}})})}}},{SelectDirective:e}}),define("clc.foundation.angular/directives/materialize/sidenav-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;return e={edge:o.edge||"left",draggable:null==o.draggable||"true"===o.draggable,inDuration:o.inDuration||250,outDuration:o.outDuration||250,onOpenStart:o.onOpenStart,onOpenEnd:o.onOpenEnd,onCloseStart:o.onCloseStart,onCloseEnd:o.onCloseEnd,preventScrolling:null==o.preventScrolling||"true"===o.preventScrolling},t.Sidenav.init(r,e)})}}},{SideNavDirective:e}}),define("clc.foundation.angular/directives/materialize/slider-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"EA",link:function(n,r,o){return e(function(){var e;return e={indicators:!o.indicators||"true"===o.indicators,height:o.height||400,duration:o.duration||500,interval:o.interval||6e3},t.Slider.init(r,e)})}}},{SliderDirective:e}}),define("clc.foundation.angular/directives/materialize/switch-directive",["materialize-css"],function(t){var e;return e=function(t){return{restrict:"AE",require:"ngModel",replace:!0,scope:{labelOn:"@",labelOff:"@",disabled:"@",ngModelOptions:"=",ngModel:"=",ngChange:"&",ngClick:"&",ngTrueValue:"@",ngFalseValue:"@"},template:"<div class=\"switch\">\n  <label>\n    {{labelOff}}\n    <input type=\"checkbox\" ng-model='ngModel' ng-true-value=\"{{ngTrueValue == undefined ? true : ngTrueValue}}\" ng-false-value=\"{{ngFalseValue == undefined ? false : ngFalseValue}}\" ng-change='onChange($event)' ng-click='ngClick($event)' ng-disabled='disabled' ng-model-options='ngModelOptions'>\n    <span class=\"lever\"></span>\n    {{labelOn}}\n  </label>\n</div>",link:function(e,n,r){return e.onChange=function(n){return t(function(){return e.ngChange(n)})}}}},{SwitchDirective:e}}),define("clc.foundation.angular/directives/materialize/tabs-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",scope:{tab:"="},link:function(n,r,o){return e(function(){var i,s;return i={duration:o.duration||300,onShow:o.onShow,swipeable:!!o.swipeable&&"true"===o.swipeable,responsiveThreshold:o.responsiveThreshold||1/0},s=t.Tabs.init(r,i),n.$watch("tab",function(t){if(t)return e(function(){return s[0].select(t)})})})}}},{TabsDirective:e}}),define("clc.foundation.angular/directives/materialize/time-picker-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",link:function(n,r,o){return e(function(){var e;return e={duration:o.duration||350,container:o.container,showClearBtn:null!=o.showClearBtn&&"true"===o.showClearBtn,defaultTime:o.defaultTime||"now",fromNow:o.fromNow||0,i18n:o.i18n||{},autoClose:o.autoClose,twelveHour:null==o.twelveHour||"true"===o.twelveHour,vibrate:null==o.vibrate||"true"===o.vibrate,onOpenStart:o.onOpenStart,onOpenEnd:o.onOpenEnd,onCloseStart:o.onCloseStart,onCloseEnd:o.onCloseEnd,onSelect:o.onSelect},t.Timepicker.init(r,e)})}}},{TimePickerDirective:e}}),define("clc.foundation.angular/directives/materialize/tooltip-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",scope:{message:"="},link:function(n,r,o){var i;return i=[],e(function(){var e;return e={exitDelay:o.exitDelay||0,enterDelay:o.enterDelay||200,html:o.html,margin:o.margin||5,inDuration:o.inDuration||300,outDuration:o.outDuration||250,position:o.position||"bottom",transitionMovement:o.transitionMovement||10},i=t.Tooltip.init(r,e)}),n.$on("$destroy",function(){var t;return null!=(t=i[0])?t.close():void 0})}}},{TooltipDirective:e}}),define("clc.foundation.angular/directives/materialize/range-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"EA",link:function(n,r,o){return e(function(){var e;return e={},t.Range.init(r,e)})}}},{RangeDirective:e}}),function(){function t(t){return t.split("").reverse().join("")}function e(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error(e)}function n(e,n,r,o,i,s,u,a,c,l,h,p){u=p;var f,d=h="";return s&&(p=s(p)),!("number"!=typeof p||!isFinite(p))&&(e&&0===parseFloat(p.toFixed(e))&&(p=0),0>p&&(f=!0,p=Math.abs(p)),e&&(s=Math.pow(10,e),p=(Math.round(p*s)/s).toFixed(e)),p=p.toString(),-1!==p.indexOf(".")&&(e=p.split("."),p=e[0],r&&(h=r+e[1])),n&&(p=t(p).match(/.{1,3}/g),p=t(p.join(t(n)))),f&&a&&(d+=a),o&&(d+=o),f&&c&&(d+=c),d=d+p+h,i&&(d+=i),l&&(d=l(d,u)),d)}function r(t,e,n,r,o,i,s,u,a,c,l,h){var p;return t="",l&&(h=l(h)),!(!h||"string"!=typeof h)&&(u&&h.substring(0,u.length)===u&&(h=h.replace(u,""),p=!0),r&&h.substring(0,r.length)===r&&(h=h.replace(r,"")),a&&h.substring(0,a.length)===a&&(h=h.replace(a,""),p=!0),o&&h.slice(-1*o.length)===o&&(h=h.slice(0,-1*o.length)),e&&(h=h.split(e).join("")),n&&(h=h.replace(n,".")),p&&(t+="-"),t=Number((t+h).replace(/[^0-9\.\-.]/g,"")),s&&(t=s(t)),!("number"!=typeof t||!isFinite(t))&&t)}function o(t){var n,r,o,i={};for(n=0;n<u.length;n+=1)r=u[n],o=t[r],void 0===o?i[r]="negative"!==r||i.negativeBefore?"mark"===r&&"."!==i.thousand&&".":"-":"decimals"===r?0<o&&8>o&&(i[r]=o):"encoder"===r||"decoder"===r||"edit"===r||"undo"===r?"function"==typeof o&&(i[r]=o):"string"==typeof o&&(i[r]=o);return e(i,"mark","thousand"),e(i,"prefix","negative"),e(i,"prefix","negativeBefore"),i}function i(t,e,n){var r,o=[];for(r=0;r<u.length;r+=1)o.push(t[u[r]]);return o.push(n),e.apply("",o)}function s(t){if(!(this instanceof s))return new s(t);"object"==typeof t&&(t=o(t),this.to=function(e){return i(t,n,e)},this.from=function(e){return i(t,r,e)})}var u="decimals thousand mark prefix postfix encoder decoder negativeBefore negative edit undo".split(" ");window.wNumb=s}(),function(t){"function"==typeof define&&define.amd?define("nouislider",[],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";function t(t,e){var n=document.createElement("div");return c(n,e),t.appendChild(n),n}function e(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}function n(t,e){return Math.round(t/e)*e}function r(t,e){var n=t.getBoundingClientRect(),r=t.ownerDocument,o=r.documentElement,i=p();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),e?n.top+i.y-o.clientTop:n.left+i.x-o.clientLeft}function o(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function i(t,e,n){n>0&&(c(t,e),setTimeout(function(){l(t,e)},n))}function s(t){return Math.max(Math.min(t,100),0)}function u(t){return Array.isArray(t)?t:[t]}function a(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function c(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function l(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function p(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return{x:t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft,y:t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop}}function f(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function d(t,e){return 100/(e-t)}function m(t,e){return 100*e/(t[1]-t[0])}function v(t,e){return m(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function y(t,e){return e*(t[1]-t[0])/100+t[0]}function _(t,e){for(var n=1;t>=e[n];)n+=1;return n}function g(t,e,n){if(n>=t.slice(-1)[0])return 100;var r,o,i,s,u=_(n,t);return r=t[u-1],o=t[u],i=e[u-1],s=e[u],i+v([r,o],n)/d(i,s)}function b(t,e,n){if(n>=100)return t.slice(-1)[0];var r,o,i,s,u=_(n,e);return r=t[u-1],o=t[u],i=e[u-1],s=e[u],y([r,o],(n-i)*d(i,s))}function w(t,e,r,o){if(100===o)return o;var i,s,u=_(o,t);return r?(i=t[u-1],s=t[u],o-i>(s-i)/2?s:i):e[u-1]?t[u-1]+n(o-t[u-1],e[u-1]):o}function x(t,e,n){var r;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("noUiSlider: 'range' contains invalid value.");if(r="min"===t?0:"max"===t?100:parseFloat(t),!o(r)||!o(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(r),n.xVal.push(e[0]),r?n.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(n.xSteps[0]=e[1]),n.xHighestCompleteStep.push(0)}function C(t,e,n){if(!e)return!0;n.xSteps[t]=m([n.xVal[t],n.xVal[t+1]],e)/d(n.xPct[t],n.xPct[t+1]);var r=(n.xVal[t+1]-n.xVal[t])/n.xNumSteps[t],o=Math.ceil(Number(r.toFixed(3))-1),i=n.xVal[t]+n.xNumSteps[t]*o;n.xHighestCompleteStep[t]=i}function S(t,e,n,r){this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e,this.direction=n;var o,i=[];for(o in t)t.hasOwnProperty(o)&&i.push([t[o],o]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),o=0;o<i.length;o++)x(i[o][1],i[o][0],this);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)C(o,this.xNumSteps[o],this)}function E(t,e){if(!o(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function k(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");t.spectrum=new S(e,t.snap,t.dir,t.singleStep)}function D(t,e){if(e=u(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function M(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function O(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function P(t,e){if(t.animationDuration=e,"number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.")}function T(t,e){var n,r=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(n=1;n<t.handles;n++)r.push(e);r.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=e}t.connect=r}function A(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function N(t,e){if(!o(e))throw new Error("noUiSlider: 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function j(t,e){if(!o(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function $(t,e){if(!o(e))throw new Error("noUiSlider: 'padding' option must be numeric.");if(0!==e){if(t.padding=t.spectrum.getMargin(e),!t.padding)throw new Error("noUiSlider: 'padding' option is only supported on linear sliders.");if(t.padding<0)throw new Error("noUiSlider: 'padding' option must be a positive number.");if(t.padding>=50)throw new Error("noUiSlider: 'padding' option must be less than half the range.")}}function q(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function I(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,r=e.indexOf("drag")>=0,o=e.indexOf("fixed")>=0,i=e.indexOf("snap")>=0,s=e.indexOf("hover")>=0;if(o){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");N(t,t.start[1]-t.start[0])}t.events={tap:n||i,drag:r,fixed:o,snap:i,hover:s}}function F(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(!0)}else{if(t.tooltips=u(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function B(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function L(t,e){if(void 0!==e&&"string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function R(t,e){if(void 0!==e&&"object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix){t.cssClasses={};for(var n in e)e.hasOwnProperty(n)&&(t.cssClasses[n]=t.cssPrefix+e[n])}else t.cssClasses=e}function U(t,e){if(!0!==e&&!1!==e)throw new Error("noUiSlider: 'useRequestAnimationFrame' option should be true (default) or false.");t.useRequestAnimationFrame=e}function z(t){var e={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,format:V},n={step:{r:!1,t:E},start:{r:!0,t:D},connect:{r:!0,t:T},direction:{r:!0,t:q},snap:{r:!1,t:M},animate:{r:!1,t:O},animationDuration:{r:!1,t:P},range:{r:!0,t:k},orientation:{r:!1,t:A},margin:{r:!1,t:N},limit:{r:!1,t:j},padding:{r:!1,t:$},behaviour:{r:!0,t:I},format:{r:!1,t:B},tooltips:{r:!1,t:F},cssPrefix:{r:!1,t:L},cssClasses:{r:!1,t:R},useRequestAnimationFrame:{r:!1,t:U}},r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleTouchArea:"handle-touch-area",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",
markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};Object.keys(n).forEach(function(o){if(void 0===t[o]&&void 0===r[o]){if(n[o].r)throw new Error("noUiSlider: '"+o+"' is required.");return!0}n[o].t(e,void 0===t[o]?r[o]:t[o])}),e.pips=t.pips;var o=[["left","top"],["right","bottom"]];return e.style=o[e.dir][e.ort],e.styleOposite=o[e.dir?0:1][e.ort],e}function H(n,o,a){function d(e,n){var r=t(e,o.cssClasses.origin),i=t(r,o.cssClasses.handle);return t(i,o.cssClasses.handleTouchArea),i.setAttribute("data-handle",n),0===n?c(i,o.cssClasses.handleLower):n===o.handles-1&&c(i,o.cssClasses.handleUpper),r}function m(e,n){return!!n&&t(e,o.cssClasses.connect)}function v(e,n){return!!o.tooltips[n]&&t(e.firstChild,o.cssClasses.tooltip)}function y(t,e,n){if("range"===t||"steps"===t)return it.xVal;if("count"===t){var r,o=100/(e-1),i=0;for(e=[];(r=i++*o)<=100;)e.push(r);t="positions"}return"positions"===t?e.map(function(t){return it.fromStepping(n?it.getStep(t):t)}):"values"===t?n?e.map(function(t){return it.fromStepping(it.getStep(it.toStepping(t)))}):e:void 0}function _(t,n,r){function o(t,e){return(t+e).toFixed(7)/1}var i={},s=it.xVal[0],u=it.xVal[it.xVal.length-1],a=!1,c=!1,l=0;return r=e(r.slice().sort(function(t,e){return t-e})),r[0]!==s&&(r.unshift(s),a=!0),r[r.length-1]!==u&&(r.push(u),c=!0),r.forEach(function(e,s){var u,h,p,f,d,m,v,y,_,g,b=e,w=r[s+1];if("steps"===n&&(u=it.xNumSteps[s]),u||(u=w-b),!1!==b&&void 0!==w)for(u=Math.max(u,1e-7),h=b;h<=w;h=o(h,u)){for(f=it.toStepping(h),d=f-l,y=d/t,_=Math.round(y),g=d/_,p=1;p<=_;p+=1)m=l+p*g,i[m.toFixed(5)]=["x",0];v=r.indexOf(h)>-1?1:"steps"===n?2:0,!s&&a&&(v=0),h===w&&c||(i[f.toFixed(5)]=[h,v]),l=f}}),i}function g(t,e,n){function r(t,e){var n=e===o.cssClasses.value,r=n?p:f,i=n?l:h;return e+" "+r[o.ort]+" "+i[t]}function i(t,e,n){return'class="'+r(n[1],e)+'" style="'+o.style+": "+t+'%"'}function s(t,r){r[1]=r[1]&&e?e(r[0],r[1]):r[1],a+="<div "+i(t,o.cssClasses.marker,r)+"></div>",r[1]&&(a+="<div "+i(t,o.cssClasses.value,r)+">"+n.to(r[0])+"</div>")}var u=document.createElement("div"),a="",l=[o.cssClasses.valueNormal,o.cssClasses.valueLarge,o.cssClasses.valueSub],h=[o.cssClasses.markerNormal,o.cssClasses.markerLarge,o.cssClasses.markerSub],p=[o.cssClasses.valueHorizontal,o.cssClasses.valueVertical],f=[o.cssClasses.markerHorizontal,o.cssClasses.markerVertical];return c(u,o.cssClasses.pips),c(u,0===o.ort?o.cssClasses.pipsHorizontal:o.cssClasses.pipsVertical),Object.keys(t).forEach(function(e){s(e,t[e])}),u.innerHTML=a,u}function b(t){var e=t.mode,n=t.density||1,r=t.filter||!1,o=t.values||!1,i=t.stepped||!1,s=y(e,o,i),u=_(n,e,s),a=t.format||{to:Math.round};return et.appendChild(g(u,r,a))}function w(){var t=J.getBoundingClientRect(),e="offset"+["Width","Height"][o.ort];return 0===o.ort?t.width||J[e]:t.height||J[e]}function x(t,e,n,r){var i=function(e){return!et.hasAttribute("disabled")&&(!h(et,o.cssClasses.tap)&&(!!(e=C(e,r.pageOffset))&&(!(t===tt.start&&void 0!==e.buttons&&e.buttons>1)&&((!r.hover||!e.buttons)&&(e.calcPoint=e.points[o.ort],void n(e,r))))))},s=[];return t.split(" ").forEach(function(t){e.addEventListener(t,i,!1),s.push([t,i])}),s}function C(t,e){t.preventDefault();var n,r,o=0===t.type.indexOf("touch"),i=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(s=!0),o){if(t.touches.length>1)return!1;n=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY}return e=e||p(),(i||s)&&(n=t.clientX+e.x,r=t.clientY+e.y),t.pageOffset=e,t.points=[n,r],t.cursor=i||s,t}function S(t){var e=t-r(J,o.ort),n=100*e/w();return o.dir?100-n:n}function E(t){var e=100,n=!1;return Q.forEach(function(r,o){if(!r.hasAttribute("disabled")){var i=Math.abs(nt[o]-t);i<e&&(n=o,e=i)}}),n}function k(t,e,n,r){var o=n.slice(),i=[!t,t],s=[t,!t];r=r.slice(),t&&r.reverse(),r.length>1?r.forEach(function(t,n){var r=j(o,t,o[t]+e,i[n],s[n]);!1===r?e=0:(e=r-o[t],o[t]=r)}):i=s=[!0];var u=!1;r.forEach(function(t,r){u=F(t,n[t]+e,i[r],s[r])||u}),u&&r.forEach(function(t){D("update",t),D("slide",t)})}function D(t,e,n){Object.keys(ut).forEach(function(r){var i=r.split(".")[0];t===i&&ut[r].forEach(function(t){t.call(Z,st.map(o.format.to),e,st.slice(),n||!1,nt.slice())})})}function M(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&P(t,e)}function O(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return P(t,e);var n=(o.dir?-1:1)*(t.calcPoint-e.startCalcPoint);k(n>0,100*n/e.baseSize,e.locations,e.handleNumbers)}function P(t,e){ot&&(l(ot,o.cssClasses.active),ot=!1),t.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener)),document.documentElement.noUiListeners.forEach(function(t){document.documentElement.removeEventListener(t[0],t[1])}),l(et,o.cssClasses.drag),I(),e.handleNumbers.forEach(function(t){D("set",t),D("change",t),D("end",t)})}function T(t,e){if(1===e.handleNumbers.length){var n=Q[e.handleNumbers[0]];if(n.hasAttribute("disabled"))return!1;ot=n.children[0],c(ot,o.cssClasses.active)}t.preventDefault(),t.stopPropagation();var r=x(tt.move,document.documentElement,O,{startCalcPoint:t.calcPoint,baseSize:w(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:nt.slice()}),i=x(tt.end,document.documentElement,P,{handleNumbers:e.handleNumbers}),s=x("mouseout",document.documentElement,M,{handleNumbers:e.handleNumbers});if(document.documentElement.noUiListeners=r.concat(i,s),t.cursor){document.body.style.cursor=getComputedStyle(t.target).cursor,Q.length>1&&c(et,o.cssClasses.drag);var u=function(){return!1};document.body.noUiListener=u,document.body.addEventListener("selectstart",u,!1)}e.handleNumbers.forEach(function(t){D("start",t)})}function A(t){t.stopPropagation();var e=S(t.calcPoint),n=E(e);if(!1===n)return!1;o.events.snap||i(et,o.cssClasses.tap,o.animationDuration),F(n,e,!0,!0),I(),D("slide",n,!0),D("set",n,!0),D("change",n,!0),D("update",n,!0),o.events.snap&&T(t,{handleNumbers:[n]})}function N(t){var e=S(t.calcPoint),n=it.getStep(e),r=it.fromStepping(n);Object.keys(ut).forEach(function(t){"hover"===t.split(".")[0]&&ut[t].forEach(function(t){t.call(Z,r)})})}function j(t,e,n,r,i){return Q.length>1&&(r&&e>0&&(n=Math.max(n,t[e-1]+o.margin)),i&&e<Q.length-1&&(n=Math.min(n,t[e+1]-o.margin))),Q.length>1&&o.limit&&(r&&e>0&&(n=Math.min(n,t[e-1]+o.limit)),i&&e<Q.length-1&&(n=Math.max(n,t[e+1]-o.limit))),o.padding&&(0===e&&(n=Math.max(n,o.padding)),e===Q.length-1&&(n=Math.min(n,100-o.padding))),n=it.getStep(n),(n=s(n))!==t[e]&&n}function $(t){return t+"%"}function q(t,e){nt[t]=e,st[t]=it.fromStepping(e);var n=function(){Q[t].style[o.style]=$(e),B(t),B(t+1)};window.requestAnimationFrame&&o.useRequestAnimationFrame?window.requestAnimationFrame(n):n()}function I(){rt.forEach(function(t){var e=nt[t]>50?-1:1,n=3+(Q.length+e*t);Q[t].childNodes[0].style.zIndex=n})}function F(t,e,n,r){return!1!==(e=j(nt,t,e,n,r))&&(q(t,e),!0)}function B(t){if(X[t]){var e=0,n=100;0!==t&&(e=nt[t-1]),t!==X.length-1&&(n=nt[t]),X[t].style[o.style]=$(e),X[t].style[o.styleOposite]=$(100-n)}}function L(t,e){null!==t&&!1!==t&&("number"==typeof t&&(t=String(t)),!1===(t=o.format.from(t))||isNaN(t)||F(e,it.toStepping(t),!1,!1))}function R(t,e){var n=u(t),r=void 0===nt[0];e=void 0===e||!!e,n.forEach(L),o.animate&&!r&&i(et,o.cssClasses.tap,o.animationDuration),rt.forEach(function(t){F(t,nt[t],!0,!1)}),I(),rt.forEach(function(t){D("update",t),null!==n[t]&&e&&D("set",t)})}function U(t){R(o.start,t)}function H(){var t=st.map(o.format.to);return 1===t.length?t[0]:t}function Y(){for(var t in o.cssClasses)o.cssClasses.hasOwnProperty(t)&&l(et,o.cssClasses[t]);for(;et.firstChild;)et.removeChild(et.firstChild);delete et.noUiSlider}function V(){return nt.map(function(t,e){var n=it.getNearbySteps(t),r=st[e],o=n.thisStep.step,i=null;!1!==o&&r+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-r),i=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===t?o=null:0===t&&(i=null);var s=it.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(s))),null!==i&&!1!==i&&(i=Number(i.toFixed(s))),[i,o]})}function W(t,e){ut[t]=ut[t]||[],ut[t].push(e),"update"===t.split(".")[0]&&Q.forEach(function(t,e){D("update",e)})}function G(t){var e=t&&t.split(".")[0],n=e&&t.substring(e.length);Object.keys(ut).forEach(function(t){var r=t.split(".")[0],o=t.substring(r.length);e&&e!==r||n&&n!==o||delete ut[t]})}function K(t,e){var n=H(),r=["margin","limit","padding","range","animate","snap","step","format"];r.forEach(function(e){void 0!==t[e]&&(a[e]=t[e])});var i=z(a);r.forEach(function(e){void 0!==t[e]&&(o[e]=i[e])}),i.spectrum.direction=it.direction,it=i.spectrum,o.margin=i.margin,o.limit=i.limit,o.padding=i.padding,nt=[],R(t.start||n,e)}var J,Q,X,Z,tt=f(),et=n,nt=[],rt=[],ot=!1,it=o.spectrum,st=[],ut={};if(et.noUiSlider)throw new Error("Slider was already initialized.");return function(e){c(e,o.cssClasses.target),0===o.dir?c(e,o.cssClasses.ltr):c(e,o.cssClasses.rtl),0===o.ort?c(e,o.cssClasses.horizontal):c(e,o.cssClasses.vertical),J=t(e,o.cssClasses.base)}(et),function(t,e){Q=[],X=[],X.push(m(e,t[0]));for(var n=0;n<o.handles;n++)Q.push(d(e,n)),rt[n]=n,X.push(m(e,t[n+1]))}(o.connect,J),Z={destroy:Y,steps:V,on:W,off:G,get:H,set:R,reset:U,__moveHandles:function(t,e,n){k(t,e,nt,n)},options:a,updateOptions:K,target:et,pips:b},function(t){t.fixed||Q.forEach(function(t,e){x(tt.start,t.children[0],T,{handleNumbers:[e]})}),t.tap&&x(tt.start,J,A,{}),t.hover&&x(tt.move,J,N,{hover:!0}),t.drag&&X.forEach(function(e,n){if(!1!==e&&0!==n&&n!==X.length-1){var r=Q[n-1],i=Q[n],s=[e];c(e,o.cssClasses.draggable),t.fixed&&(s.push(r.children[0]),s.push(i.children[0])),s.forEach(function(t){x(tt.start,t,T,{handles:[r,i],handleNumbers:[n-1,n]})})}})}(o.events),R(o.start),o.pips&&b(o.pips),o.tooltips&&function(){var t=Q.map(v);W("update",function(e,n,r){if(t[n]){var i=e[n];!0!==o.tooltips[n]&&(i=o.tooltips[n].to(r[n])),t[n].innerHTML="<span>"+i+"</span>"}})}(),Z}function Y(t,e){if(!t.nodeName)throw new Error("noUiSlider.create requires a single element.");void 0===e.tooltips&&(e.tooltips=!0);var n=z(e,t),r=H(t,n,e);return t.noUiSlider=r,r}S.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider: 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&m(this.xVal,t)},S.prototype.toStepping=function(t){return t=g(this.xVal,this.xPct,t)},S.prototype.fromStepping=function(t){return b(this.xVal,this.xPct,t)},S.prototype.getStep=function(t){return t=w(this.xPct,this.xSteps,this.snap,t)},S.prototype.getNearbySteps=function(t){var e=_(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e-0],step:this.xNumSteps[e-0],highestStep:this.xHighestCompleteStep[e-0]}}},S.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(a);return Math.max.apply(null,t)},S.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var V={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};return{create:Y}}),define("clc.foundation.angular/directives/materialize/nouislider-directive",["materialize-css","nouislider"],function(t,e){var n;return n=function(t){return{restrict:"EA",link:function(n,r,o){return t(function(){return{},e.create(r[0]({start:[20,80],connect:!0,step:1,orientation:"horizontal",range:{min:0,max:100},format:wNumb({decimals:0})}))})}}},{NoUiSliderDirective:n}}),define("clc.foundation.angular/directives/materialize/autocomplete-directive",["materialize-css"],function(t){var e;return e=function(e){return{restrict:"AE",scope:{data:"="},link:function(n,r,o){return e(function(){var e,i,s;return s={limit:o.limit,minLength:o.minLength},i=t.Autocomplete.init(r,s),e=i[0],n.$watch(n.data,function(t){return e.updateData(t)}),n.$on("$destroy",function(){return e.destroy()})})}}},{AutocompleteDirective:e}}),define("clc.foundation.angular/directives/file-uploader-directive",[],function(){var t;return t=function(t,e){return{restrict:"AE",require:"ngModel",replace:!0,scope:{dir:"@",filename:"@",accept:"@",ngModel:"=",onUpload:"&"},template:"<div style='width: 100%; height: 100%;' title='{{ngModel && ngModel || \"拖动或选择打开文件\"}}' class=''  ng-mouseenter='toolbar=true' ng-mouseleave='toolbar=false'>\n  <div ng-show='!showLink' style='cursor: pointer; width: 100%; height: 100%; position: relative; display: table' class='file-preview'>\n    <a ng-if='ngModel' style='display: table-cell; vertical-align: middle'><i class='material-icons small'>attach_file</i><span>{{ngModel}}</span></a>\n    <a ng-if='!ngModel' style='display: table-cell; vertical-align: middle'><i class='material-icons small'>file_upload</i></a>\n  </div>\n  <textarea ng-show='showLink' style='width: 100%; height: 100%; resize: none;' ng-model='ngModel'></textarea>\n  <input type='file' accept='{{accept}}' style='display: none' />\n  <div class='progress' ng-show='progress > 0 && progress < 100' title='上载进度：{{name}} {{progress | number:1}}%'>\n    <div class='determinate' style='width: {{progress}}%'></div>\n  </div>\n  <div style='position: relative; float: right; margin: 5px; top: -40px;' ng-show='toolbar'>\n    <span ng-show='ngModel' class='file-remove' title='删除文件' ng-click='ngModel = \"\"'>\n        <a href='' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>delete</i>\n        </a>\n    </span>\n    <span class='file-link' title='显示或设置文件链接' ng-click='showLink = !showLink'>\n        <a href='' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>link</i>\n        </a>\n    </span>\n    <span ng-show='ngModel' class='file-link' title='下载文件'>\n        <a ng-href='{{dir}}/{{ngModel}}' target='_blank' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>file_download</i>\n        </a>\n    </span>\n  </div>\n</div>",link:function(t,n,r){var o,i,s;return null==t.accept&&(t.accept="*"),i=n.find(".file-preview"),o=n.find('input[type="file"]'),i.bind("click",function(){return o.click()}),o.bind("change",function(n){var r,i;return e?s(null!=(r=o[0])&&null!=(i=r.files)?i[0]:void 0):"function"==typeof t.upload&&t.upload()(o[0]),n.target.value=null}),s=function(n){var r;if(n)return t.name=n.name,r=t.dir+"/"+n.name,e.upload(n,t.filenmae,r,function(e){return function(e,n){var r;return e?console.log(e):t.ngModel=""+n.resource+n.extension+"?"+(new Date).getTime(),"function"==typeof t.onUpload&&"function"==typeof(r=t.onUpload())?r(e,t.ngModel):void 0}}(),function(e){return t.progress=100*e})},n.on("drop",function(t){var e,n,r,o;if(!$(t.target).is(":input"))return t.preventDefault(),t.stopPropagation(),n=t.originalEvent,e=null!=(r=n.dataTransfer)&&null!=(o=r.files)?o[0]:void 0,s(e)}),n.on("paste",function(t){var e,n,r,o,i;for(t.preventDefault(),t.stopPropagation(),i=t.originalEvent.clipboardData.items,r=0,o=i.length;r<o;r++)if(n=i[r],"file"===n.kind)return e=n.getAsFile(),void s(e)})}}},{FileUploaderDirective:t}}),define("clc.foundation.angular/directives/image-uploader-directive",[],function(){var t;return t=function(t,e){return{restrict:"AE",require:"ngModel",replace:!0,scope:{dir:"@",filename:"@",accept:"@",ngModel:"=",upload:"&",onUpload:"&",paste:"&"},template:"<div style='width: 100%; height: 100%;' title='{{ngModel && ngModel || \"拖动或选择打开图片文件\"}}' ng-mouseenter='toolbar=true' ng-mouseleave='toolbar=false'>\n  <div ng-show='!showLink' style='cursor: pointer; width: 100%; height: 100%; position: relative; display: table; text-align: center;' class='img-preview'>\n    <img ng-if='ngModel', ng-src='{{ngModel ? dir + \"/\" + ngModel : null}}' style='position: absolute; left: 0; right: 0; top: 0; bottom: 0; margin: auto' />\n    <a ng-if='!ngModel' style='display: table-cell; vertical-align: middle'><i class='material-icons small'>file_upload</i></a>\n  </div>\n  <textarea ng-show='showLink' style='width: 100%; height: 100%; resize: none;' ng-model='ngModel'></textarea>\n  <input type='file' name='uploadInput' accept='{{accept}}' style='display: none' />\n  <div class='progress' ng-show='progress > 0 && progress < 100' title='上载进度：{{name}} {{progress | number:1}}%'>\n    <div class='determinate' style='width: {{progress}}%'></div>\n  </div>\n  <div style='position: relative; float: right; margin: 5px; top: -40px;' ng-show='toolbar'>\n    <span class='img-copy' title='复制粘贴板图片' ng-click='pasteImage()'>\n        <a href='' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>add_to_photos</i>\n        </a>\n    </span>\n    <span ng-show='ngModel' class='img-remove' title='删除图片' ng-click='ngModel = \"\"'>\n        <a href='' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>delete</i>\n        </a>\n    </span>\n    <span class='img-link' title='显示或设置图片链接' ng-click='showLink = !showLink'>\n        <a href='' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>link</i>\n        </a>\n    </span>\n    <span ng-show='ngModel' class='img-link' title='下载图片'>\n        <a ng-href='{{dir}}/{{ngModel}}' target='_blank' style='color: grey;' onMouseOver='this.style.color=\"orange\"' onMouseOut='this.style.color=\"grey\"'>\n          <i class='material-icons small'>file_download</i>\n        </a>\n    </span>\n  </div>\n</div>",link:function(t,n,r){var o,i,s;return null==t.accept&&(t.accept="image/*"),i=n.find(".img-preview"),o=n.find('input[type="file"]'),i.bind("click",function(){return o.click()}),o.bind("change",function(n){var r,i;return e?s(null!=(r=o[0])&&null!=(i=r.files)?i[0]:void 0):"function"==typeof t.upload&&t.upload()(o[0]),n.target.value=null}),s=function(r){var o,i,s;if(r)return i=new FileReader,i.onload=function(t){var e;return e=n.find("img"),e.attr("src",t.target.result)},i.readAsDataURL(r),t.name=r.name,s=t.dir+"/"+r.name,o=t.filename,e.upload(r,o,s,function(e,n){var r;return e?console.log(e):t.ngModel=""+n.resource+n.extension+"?"+(new Date).getTime(),"function"==typeof t.onUpload&&"function"==typeof(r=t.onUpload())?r(e,t.ngModel):void 0},function(e){return t.progress=100*e})},n.on("drop",function(t){var e,n,r,o;return t.preventDefault(),t.stopPropagation(),n=t.originalEvent,e=null!=(r=n.dataTransfer)&&null!=(o=r.files)?o[0]:void 0,s(e)}),n.on("paste",function(t){var e,n,r,o,i;if(!$(t.target).is(":input"))for(t.preventDefault(),t.stopPropagation(),i=t.originalEvent.clipboardData.items,r=0,o=i.length;r<o;r++)if(n=i[r],"file"===n.kind&&n.type.indexOf("image")>=0)return e=n.getAsFile(),void s(e)}),t.pasteImage=function(){return navigator.permissions.query({name:"clipboard-read"}).then(function(e){return navigator.clipboard.read().then(function(e){return function(e){var n,r,o,i,u,a,c;for(o=0,u=e.length;o<u;o++)for(n=e[o],c=n.types,i=0,a=c.length;i<a;i++)"text/plain"!==(r=c[i])&&n.getType(r).then(function(e){var n;return n=t.filename,n&&n.indexOf(".")<0&&(n+=".png"),null==e.name&&(e.name=null!=n?n:(new Date).getTime()+".png"),s(e)})}}())})},t.$on("pasteImage",function(e,n){return t.pasteImage()})}}},{ImageUploaderDirective:t}}),define("clc.foundation.angular/directives/input-format-directive",["moment"],function(t){var e;return e=function(e,n){return{restrict:"AE",require:"ngModel",scope:{type:"@"},link:function(e,n,r,o){return o.$parsers.push(function(n){var r;if("json"===e.type)return JSON.parse(n);if("time"===e.type)return r=t(n).format("HH:mm:ss");if("string"!=typeof n)return n;switch(e.type){case"date":case"datetime-local":r=new Date(n);break;case"number":r=Number(n);break;default:r=n}return r}),o.$formatters.push(function(n){var r,o;if("json"===e.type)return JSON.stringify(n,null,4);if("string"!=typeof n)return n;switch(e.type){case"date":case"datetime-local":o=new Date(n);break;case"time":r=t(n,"HH:mm:ss"),o=r.isValid()?r.toDate():new Date;break;case"number":o=Number(n);break;default:o=n}return o})}}},{InputFormatDirective:e}}),define("clc.foundation.angular/directives/json-text-directive",[],function(){var t;return t=function(t){return{restrict:"AE",require:"ngModel",link:function(t,e,n,r){return r.$parsers.push(function(t){return JSON.parse(t)}),r.$formatters.push(function(t){return JSON.stringify(t)})}}},{JsonTextDirective:t}}),define("clc.foundation.angular/directives/loading-directive",[],function(){var t;return t=function(t){return{restrict:"AE",template:"<div class='loading'>\n  <div class='spinner'>\n    <div class='rect1' />\n    <div class='rect2' />\n    <div class='rect3' />\n    <div class='rect4' />\n    <div class='rect5' />\n  </div>\n\n  <p class='center materialize-red-text' translate='LOADING'>正在加载...</p>\n</div>",link:function(t,e,n,r){}}},{LoadingDirective:t}}),function(t,e,n){"use strict";!function(e){"function"==typeof define&&define.amd?define("webui-popover",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(function(n){function r(t,e){return this.$element=n(t),e&&("string"===n.type(e.delay)||"number"===n.type(e.delay))&&(e.delay={show:e.delay,hide:e.delay}),this.options=n.extend({},u,e),this._defaults=u,this._name=o,this._targetclick=!1,this.init(),c.push(this.$element),this}var o="webuiPopover",i="webui-popover",s="webui.popover",u={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",selector:!1,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",direction:"",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:!1},a=i+"-rtl",c=[],l=n('<div class="webui-popover-backdrop"></div>'),h=0,p=!1,f=-2e3,d=n(e),m=function(t,e){return isNaN(t)?e||0:Number(t)},v=function(t){return t.data("plugin_"+o)},y=function(){for(var t=null,e=0;e<c.length;e++)(t=v(c[e]))&&t.hide(!0);d.trigger("hiddenAll."+s)},_=function(t){for(var e=null,n=0;n<c.length;n++)(e=v(c[n]))&&e.id!==t.id&&e.hide(!0);d.trigger("hiddenAll."+s)},g="ontouchstart"in e.documentElement&&/Mobi/.test(navigator.userAgent),b=function(t){var e={x:0,y:0};if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type){var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=n.pageX,e.y=n.pageY}else("mousedown"===t.type||"mouseup"===t.type||"click"===t.type)&&(e.x=t.pageX,e.y=t.pageY);return e};r.prototype={init:function(){if(this.$element[0]instanceof e.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");"manual"!==this.getTrigger()&&("click"===this.getTrigger()||g?this.$element.off("click touchend",this.options.selector).on("click touchend",this.options.selector,n.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,n.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,n.proxy(this.mouseleaveHandler,this))),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=h,this.id=o+this._idSeed,this.options.container=n(this.options.container||e.body).first(),this.options.backdrop&&l.appendTo(this.options.container).hide(),h++,"sticky"===this.getTrigger()&&this.show(),this.options.selector&&(this._options=n.extend({},this.options,{selector:""}))},destroy:function(){for(var t=-1,e=0;e<c.length;e++)if(c[e]===this.$element){t=e;break}c.splice(t,1),this.hide(),this.$element.data("plugin_"+o,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},getDelegateOptions:function(){var t={};return this._options&&n.each(this._options,function(e,n){u[e]!==n&&(t[e]=n)}),t},hide:function(t,e){if((t||"sticky"!==this.getTrigger())&&this._opened){e&&(e.preventDefault(),e.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null);var r=n.Event("hide."+s);if(this.$element.trigger(r,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var o=this;setTimeout(function(){o.$target.hide(),o.getCache()||o.$target.remove()},o.getHideDelay())}this.options.backdrop&&l.hide(),this._opened=!1,this.$element.trigger("hidden."+s,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},delegate:function(t){var e=n(t).data("plugin_"+o);return e||(e=new r(t,this.getDelegateOptions()),n(t).data("plugin_"+o,e)),e},toggle:function(t){var e=this;t&&(t.preventDefault(),t.stopPropagation(),this.options.selector&&(e=this.delegate(t.currentTarget))),e[e.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){y()},hideOthers:function(){_(this)},show:function(){if(!this._opened){var t=this.getTarget().removeClass().addClass(i).addClass(this._customTargetClass);if(this.options.multi||this.hideOthers(),!this.getCache()||!this._poped||""===this.content){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),this.canEmptyHide()&&""===this.content)return;t.show()}this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&l.show(),this._opened=!0,this.resetAutoHide()}},displayContent:function(){var t=this.getElementPosition(),e=this.getTarget().removeClass().addClass(i).addClass(this._customTargetClass),r=this.getContentElement(),o=e[0].offsetWidth,u=e[0].offsetHeight,c="bottom",l=n.Event("show."+s);if(this.canEmptyHide()){var h=r.children().html();if(null!==h&&0===h.trim().length)return}this.$element.trigger(l,[e]);var p=this.$element.data("width")||this.options.width;""===p&&(p=this._defaults.width),"auto"!==p&&e.width(p);var d=this.$element.data("height")||this.options.height;""===d&&(d=this._defaults.height),"auto"!==d&&r.height(d),this.options.style&&this.$target.addClass(i+"-"+this.options.style),"rtl"!==this.options.direction||r.hasClass(a)||r.addClass(a),this.options.arrow||e.find(".webui-arrow").remove(),e.detach().css({top:f,left:f,display:"block"}),this.getAnimation()&&e.addClass(this.getAnimation()),e.appendTo(this.options.container),c=this.getPlacement(t),this.$element.trigger("added."+s),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&r.css("height",r.outerHeight()),this.$target.addClass("webui-no-padding")),o=e[0].offsetWidth,u=e[0].offsetHeight;var m=this.getTargetPositin(t,c,o,u);if(this.$target.css(m.position).addClass(c).addClass("in"),"iframe"===this.options.type){var v=e.find("iframe"),y=e.width(),_=v.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(y=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(_=this.options.iframeOptions.height),v.width(y).height(_)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var g=this.$target.find(".webui-arrow");g.removeAttr("style"),"left"===c||"right"===c?g.css({top:this.$target.height()/2}):("top"===c||"bottom"===c)&&g.css({left:this.$target.width()/2}),m.arrowOffset&&(-1===m.arrowOffset.left||-1===m.arrowOffset.top?g.hide():g.css(m.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+s,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var t=o+this._idSeed;this.$target=n(this.options.template).attr("id",t),this._customTargetClass=this.$target.attr("class")!==i?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)}return this.$target.data("trigger-element")||this.$target.data("trigger-element",this.getTriggerElement()),this.$target},removeTarget:function(){this.$target.remove(),this.$target=null,this.$contentElement=null},getTitleElement:function(){return this.getTarget().find("."+i+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+i+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return m(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return m(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if(void 0!==t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return void 0!==t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return void 0!==t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?("rtl"!==this.options.direction||e.hasClass(a)||e.addClass(a),e.html(t)):e.remove()},hasContent:function(){return this.getContent()},canEmptyHide:function(){return this.options.hideEmpty&&"html"===this.options.type},getIframe:function(){var t=n("<iframe></iframe>").attr("src",this.getUrl()),e=this;return n.each(this._defaults.iframeOptions,function(n){void 0!==e.options.iframeOptions[n]&&t.attr(n,e.options.iframeOptions[n])}),t},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=n(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(t){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var t="";if(t=n.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,!this.content){var e=this.$element.next();e&&e.hasClass(i+"-content")&&(this.content=e)}}return this.content},setContent:function(t){var e=this.getTarget(),r=this.getContentElement()
;"string"==typeof t?r.html(t):t instanceof n&&(r.html(""),this.options.cache?t.removeClass(i+"-content").appendTo(r):t.clone(!0,!0).removeClass(i+"-content").appendTo(r)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(t){var e=this;this.xhr||(this.xhr=n.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(t){e.options.async.before&&e.options.async.before(e,t)},success:function(r){e.bindBodyEvents(),t&&n.isFunction(t)?e.content=t.apply(e.$element[0],[r]):e.content=r,e.setContent(e.content),e.getContentElement().removeAttr("style"),e.displayContent(),e.options.async.success&&e.options.async.success(e,r)},complete:function(){e.xhr=null},error:function(t,n){e.options.async.error&&e.options.async.error(e,t,n)}}))},bindBodyEvents:function(){p||(this.options.dismissible&&"click"===this.getTrigger()?(d.off("keyup.webui-popover").on("keyup.webui-popover",n.proxy(this.escapeHandler,this)),d.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",n.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&d.off("touchend.webui-popover").on("touchend.webui-popover",n.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(t){var e=this;t&&this.options.selector&&(e=this.delegate(t.currentTarget)),e._timeout&&clearTimeout(e._timeout),e._enterTimeout=setTimeout(function(){e.getTarget().is(":visible")||e.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){p=!0;for(var e=!0,n=0;n<c.length;n++){var r=v(c[n]);if(r&&r._opened){var o=r.getTarget().offset(),i=o.left,s=o.top,u=o.left+r.getTarget().width(),a=o.top+r.getTarget().height(),l=b(t);if(l.x>=i&&l.x<=u&&l.y>=s&&l.y<=a){e=!1;break}}}e&&y()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",n.proxy(this.mouseenterHandler,this)).on("mouseleave",n.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",n.proxy(this.hide,this,!0))},getPlacement:function(t){var e,n=this.options.container,r=n.innerWidth(),o=n.innerHeight(),i=n.scrollTop(),s=n.scrollLeft(),u=Math.max(0,t.left-s),a=Math.max(0,t.top-i);e="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;var c="horizontal"===e,l="vertical"===e;return"auto"===e||c||l?e=r/3>u?o/3>a?c?"right-bottom":"bottom-right":2*o/3>a?l?o/2>=a?"bottom-right":"top-right":"right":c?"right-top":"top-right":2*r/3>u?o/3>a?c?r/2>=u?"right-bottom":"left-bottom":"bottom":2*o/3>a?c?r/2>=u?"right":"left":o/2>=a?"bottom":"top":c?r/2>=u?"right-top":"left-top":"top":o/3>a?c?"left-bottom":"bottom-left":2*o/3>a?l?o/2>=a?"bottom-left":"top-left":"left":c?"left-top":"top-left":"auto-top"===e?e=r/3>u?"top-right":2*r/3>u?"top":"top-left":"auto-bottom"===e?e=r/3>u?"bottom-right":2*r/3>u?"bottom":"bottom-left":"auto-left"===e?e=o/3>a?"left-top":2*o/3>a?"left":"left-bottom":"auto-right"===e&&(e=o/3>a?"right-bottom":2*o/3>a?"right":"right-top"),e},getElementPosition:function(){var t=this.$element[0].getBoundingClientRect(),r=this.options.container,o=r.css("position");if(r.is(e.body)||"static"===o)return n.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||t.width,height:this.$element[0].offsetHeight||t.height});if("fixed"===o){var i=r[0].getBoundingClientRect();return{top:t.top-i.top+r.scrollTop(),left:t.left-i.left+r.scrollLeft(),width:t.width,height:t.height}}return"relative"===o?{top:this.$element.offset().top-r.offset().top,left:this.$element.offset().left-r.offset().left,width:this.$element[0].offsetWidth||t.width,height:this.$element[0].offsetHeight||t.height}:void 0},getTargetPositin:function(t,n,r,o){var i=t,s=this.options.container,u=this.$element.outerWidth(),a=this.$element.outerHeight(),c=e.documentElement.scrollTop+s.scrollTop(),l=e.documentElement.scrollLeft+s.scrollLeft(),h={},p=null,d=this.options.arrow?20:0,m=10,v=d+m>u?d:0,y=d+m>a?d:0,_=0,g=e.documentElement.clientHeight+c,b=e.documentElement.clientWidth+l,w=i.left+i.width/2-v>0,x=i.left+i.width/2+v<b,C=i.top+i.height/2-y>0,S=i.top+i.height/2+y<g;switch(n){case"bottom":h={top:i.top+i.height,left:i.left+i.width/2-r/2};break;case"top":h={top:i.top-o,left:i.left+i.width/2-r/2};break;case"left":h={top:i.top+i.height/2-o/2,left:i.left-r};break;case"right":h={top:i.top+i.height/2-o/2,left:i.left+i.width};break;case"top-right":h={top:i.top-o,left:w?i.left-v:m},p={left:w?Math.min(u,r)/2+v:f};break;case"top-left":_=x?v:-m,h={top:i.top-o,left:i.left-r+i.width+_},p={left:x?r-Math.min(u,r)/2-v:f};break;case"bottom-right":h={top:i.top+i.height,left:w?i.left-v:m},p={left:w?Math.min(u,r)/2+v:f};break;case"bottom-left":_=x?v:-m,h={top:i.top+i.height,left:i.left-r+i.width+_},p={left:x?r-Math.min(u,r)/2-v:f};break;case"right-top":_=S?y:-m,h={top:i.top-o+i.height+_,left:i.left+i.width},p={top:S?o-Math.min(a,o)/2-y:f};break;case"right-bottom":h={top:C?i.top-y:m,left:i.left+i.width},p={top:C?Math.min(a,o)/2+y:f};break;case"left-top":_=S?y:-m,h={top:i.top-o+i.height+_,left:i.left-r},p={top:S?o-Math.min(a,o)/2-y:f};break;case"left-bottom":h={top:C?i.top-y:m,left:i.left-r},p={top:C?Math.min(a,o)/2+y:f}}return h.top+=this.getOffsetTop(),h.left+=this.getOffsetLeft(),{position:h,arrowOffset:p}}},n.fn[o]=function(t,e){var i=[],s=this.each(function(){var s=n.data(this,"plugin_"+o);s?"destroy"===t?s.destroy():"string"==typeof t&&i.push(s[t]()):(t?"string"==typeof t?"destroy"!==t&&(e||(s=new r(this,null),i.push(s[t]()))):"object"==typeof t&&(s=new r(this,t)):s=new r(this,null),n.data(this,"plugin_"+o,s))});return i.length?i:s};var w=function(){var t=function(){y()},e=function(t,e){e=e||{},n(t).webuiPopover(e)},r=function(t){var e=!0;return n(t).each(function(t){e=e&&void 0!==n(t).data("plugin_"+o)}),e};return{show:function(t,e){e?n(t).webuiPopover(e).webuiPopover("show"):n(t).webuiPopover("show")},hide:function(t){n(t).webuiPopover("hide")},create:e,isCreated:r,hideAll:t,updateContent:function(t,e){var r=n(t).data("plugin_"+o);if(r){var i=r.getCache();r.options.cache=!1,r.options.content=e,r._opened?(r._opened=!1,r.show()):r.isAsync()?r.setContentASync(e):r.setContent(e),r.options.cache=i}}}}();t.WebuiPopovers=w})}(window,document),define("clc.foundation.angular/directives/popover-directive",["webui-popover"],function(t){var e;return e=function(t,e){return{restrict:"EA",scope:{},link:function(n,r,o){var i,s;return i=null,s=function(t,e){return null!=o[t]?"true"===o[t]:e},t(function(){var t,u,a,c,l,h,p;return u={closeable:s("closeable",!0),dismissible:s("dismissible",!0),cache:s("cache",!0),width:null!=(c=o.width)?c:"auto",height:null!=(l=o.height)?l:"auto",placement:null!=(h=o.placement)?h:"auto",multiple:s("multiple",!1),style:null!=(p=o.style)?p:""},a=o.template,a&&(t=$(a).html(),i=e(t)(n.$parent),u.content=i,i.find("select").on("click",function(){return!1})),$(r).webuiPopover(u)},50),n.$on("$destroy",function(){return $(r).webuiPopover("destroy"),null!=i?i.off():void 0})}}},{PopoverDirective:e}}),define("clc.foundation.angular/directives/prompt-modal-directive",[],function(){var t;return t=function(t,e){return{restrict:"EA",scope:{options:"="},template:"<div id='prompt-modal' class='modal'>\n    <div class='modal-content'>\n      <h5>{{options.title}}</h5>\n      <p>{{options.message}}</p>\n      <input type='text' ng-model='options.comment' ng-show='options.enableComment' />\n    </div>\n\n    <div class='modal-footer'>\n      <a class='modal-action modal-close waves-effect waves-green btn red' ng-click='options.confirm(true)'>确认<i class='material-icons left'>save</i></a>\n      <a class='modal-action modal-close waves-effect waves-green btn-flat' ng-click='options.confirm(false)'>取消<i class='material-icons left'>close</i></a>\n\n    </div>\n</div>",link:function(t,e,n){var r;return $(e.find(".modal")).modal(),(n.width||n.height)&&(r={},n.width&&(r.width=n.width),n.height&&(r.height=n.height),e.find("#prompt-modal").css(r)),t.$on("openPromptModal",function(n,r){return t.options=r,e.find("#prompt-modal").modal("open")})}}},{PromptModalDirective:t}}),define("clc.foundation.angular/directives/qrcode-popover-directive",["qrcode"],function(t){var e;return e=function(e,n,r){return{restrict:"EA",scope:{options:"="},link:function(n,o,i){var s,u,a,c,l,h;return c=null,u=function(t,e){return null!=i[t]?"true"===i[t]:e},s=function(){var t,e,n,r;return t={closeable:u("closeable",!0),dismissible:u("dismissible",!0),cache:u("cache",!0),width:null!=(e=i.width)?e:"auto",height:null!=(n=i.height)?n:"auto",placement:null!=(r=i.placement)?r:"auto",multiple:u("multiple",!1),content:"<div id='qrcode'></div>",onShow:function(){return h()}},c=$(o).webuiPopover(t)},e(function(){return c=s()},50),n.$on("$destroy",function(){return null!=c&&"function"==typeof c.destroy?c.destroy():void 0}),a=null,l=null,h=function(e,n,o){var i,s;if(null==e&&(e="qrcode"),null==n&&(n=128),null==o&&(o=128),s=r.absUrl(),a!==s)return a=s,l?(l.clear(),l.makeCode(s)):(i=document.getElementById(e))?l=new t(i,{text:s,width:n,height:o,colorDark:"#000000",colorLight:"#ffffff",correctLevel:t.CorrectLevel.H}):void 0}}}},{QrcodePopoverDirective:e}}),define("clc.foundation.angular/directives/qrcode-directive",["qrcode"],function(t){var e;return e=function(e,n,r){return{restrict:"EA",scope:{options:"=",code:"="},link:function(e,n,r){var o,i,s;return o=null,i=null,s=function(r){var s,u,a,c,l,h,p;if(o!==r)if(o=r,i){if(i.clear(),r)return i.makeCode(r)}else if(r)return s=null!=(u=e.options)?u:{},i=new t(n[0],{text:r,width:null!=(a=s.width)?a:128,height:null!=(c=s.height)?c:128,colorDark:null!=(l=s.colorDark)?l:"#000000",colorLight:null!=(h=s.colorLight)?h:"#ffffff",correctLevel:null!=(p=s.correctLevel)?p:t.CorrectLevel.H})},e.$on("$destroy",function(){}),e.$watch("code",function(t){return s(t)})}}},{QrcodeDirective:e}}),define("clc.foundation.angular/directives/scroll-if-directive",[],function(){var t;return t=function(t,e){return{restrict:"A",link:function(t,e,n,r){return t.$watch(n.scrollIf,function(t){if(t)return e[0].scrollIntoView({behavior:"smooth"})})}}},{ScrollIfDirective:t}}),define("clc.foundation.angular/directives/markdown-modal-directive",[],function(){var t;return t=function(t){return{restrict:"AE",require:"ngModel",replace:!0,scope:{name:"@",ngModel:"="},template:'<div md-modal="md-modal" class="modal modal-fixed-footer"><div class="modal-content"><label>{{name}} (markdown)</label><div ng-show="view == \'edit\'" ui-ace="{mode: \'markdown\', onLoad: aceLoaded, onChange: onChange}" ng-model="content" class="text-editor"></div><p ng-show="view == \'html\'" markdown="ngModel"></p><image-uploader id="imageUploader" ng-model="Img" dir="{{uploadUrl}}" on-upload="onImageUpload()" class="imageUploader hide"></image-uploader><file-uploader id="fileUploader" ng-model="File" dir="{{uploadUrl}}" on-upload="onFileUpload()" class="fileUploader hide"></file-uploader></div><div class="modal-footer"><a ng-click="save(true)" class="btn-flat left">保存<i class="material-icons left">save</i></a><a ng-click="view = &quot;html&quot;; save()" ng-class="{&quot;teal-text&quot;: view == &quot;html&quot;}" class="btn-flat left">浏览<i class="material-icons left">book</i></a><a ng-click="view = &quot;edit&quot;" ng-class="{&quot;teal-text&quot;: view == &quot;edit&quot;}" class="btn-flat left">编辑<i class="material-icons left">edit</i></a><a ng-click="insertImage()" ng-show="view == &quot;edit&quot;" class="btn-flat left"><i class="material-icons left">insert_photo</i>插入图片</a><a ng-click="pasteImage()" ng-show="view == &quot;edit&quot;" class="btn-flat left"><i class="material-icons left">add_to_photos</i>粘贴图片</a><a ng-click="insertFile()" ng-show="view == &quot;edit&quot;" class="btn-flat left"><i class="material-icons left">attach_file</i>插入附件</a><a href="" class="waves-effect waves-teal btn-flat modal-action modal-close">关闭<i class="material-icons left">close</i></a></div></div>',link:{pre:function(t,e,n){return t.aceLoaded=function(e){return t.editor=e}},post:function(t,e,n){var r,o,i;return t.uploadUrl=window.setting.urls.uploadUrl,t.view="edit",t.$watch("ngModel",function(e){return t.content=t.ngModel}),r=function(e){var n,r,o;if(n=t.editor,e&&n)return o=n.getSession(),r=n.getCursorPosition(),o.insert(r,e)},t.save=function(n){t.ngModel=t.content,n&&"function"==typeof e.modal&&e.modal("close")},t.insertImage=function(){return $('#imageUploader input[type="file"]',e).click()},t.onImageUpload=function(){return function(t,e){if(!t&&e)return i(e)}},i=function(e){var n;if(e)return n="!["+e+"]("+t.uploadUrl+"/"+e+")\n",r(n)},t.insertFile=function(){return $('#fileUploader input[type="file"]',e).click()},t.onFileUpload=function(){return function(t,e){if(!t&&e)return o(e)}},o=function(e){var n;if(e)return n="["+e+"]("+t.uploadUrl+"/"+e+")\n",r(n)},t.pasteImage=function(){return t.$broadcast("pasteImage")}}}}},{MarkdownModalDirective:t}}),define("clc.foundation.angular/filters/enum-definition-filter",[],function(){var t;return t=function(){return function(t,e){return null==e&&(e=","),t?t.split(e).map(function(t){return t.trim()}).filter(function(t){return t}):[]}},{EnumDefinitionFilter:t}}),define("clc.foundation.angular/filters/pretty-number-filter",[],function(){var t;return t=function(){return function(t,e){var n;return null==e&&(e=2),isNaN(t)?t:(n=parseFloat(t),n=n%1==0?n.toFixed(0):n.toFixed(e),"NaN"===n?"":n)}},{PrettyNumberFilter:t}}),define("clc.foundation.angular/filters/duration-filter",[],function(){var t,e;return e=function(){return{one:{year:"{} 年",month:"{} 月",week:"{} 周",day:"{} 天",hour:"{} 小时",minute:"{} 分",second:"{} 秒"},other:{year:"{} 年",month:"{} 月",week:"{} 周",day:"{} 天",hour:"{} 小时",minute:"{} 分",second:"{} 秒"}}},t=function(t,e){return function(n,r,o){var i,s,u,a,c,l,h,p,f,d,m;if(n&&n.startTime){for(c=new Date(n.startTime),i=n.endTime?new Date(n.endTime):new Date,d=(i-c)/1e3,h=["year","month","week","day","hour","minute","second"],f={year:31557600,month:2678400,week:604800,day:86400,hour:3600,minute:60,second:1},m=[],u=h.length,o=parseInt(o,10)||f[o||"second"]||1,d=(parseInt(d,10)||0)*(f[r||"second"]||1),d>=o?d=Math.round(d/o)*o:u=1,s=void 0,a=void 0,s=0,a=h.length;s<a&&0!==d&&(l=h[s],0===(p=Math.floor(d/f[l]))||(m.push((e[p]||e[t.pluralCat(p)]||{unit_name:"{} "+l})[l].replace("{}",p)),0!=--u));)d%=f[l],s++;return m.join(" ")}}},{LocaleDurationsFactory:e,DurationFilter:t}}),define("clc.foundation.angular/filters/filter-or-filter",[],function(){var t,e;return e=function(t,e){var n,r,o,i;o=0;for(n in e)if((r=e[n])&&(o++,(null!=(i=t[n])?i.indexOf(r):void 0)>=0))return!0;return 0===o},t=function(){return function(t,n){var r,o,i,s;for(o=[],i=0,s=t.length;i<s;i++)r=t[i],e(r,n)&&o.push(r);return o}},{FilterOrFilter:t}}),define("clc.foundation.angular/filters/order-by-property-filter",[],function(){var t;return t=function(){return function(t,e,n){var r,o,i;o=[];for(r in t)i=t[r],o.push(i);return o.sort(function(t,n){return t[e]>n[e]}),n&&o.reverse(),o}},{OrderByPropertyFilter:t}}),define("clc.foundation.angular/filters/trust-url-filter",[],function(){var t;return t=function(t){return function(e){return t.trustAsResourceUrl(e)}},{TrustUrlFilter:t}}),define("clc.foundation.angular/modules/clc.materialize.module",["angular","../services/http-service","../services/resource-model-service","../services/upload-service","../services/auth-service","../services/model-service","../services/model-manager","../models/model-engine","../live/live-service","../services/reporting-service","../services/home-service","../controllers/main-controller","../controllers/live-main-controller","../controllers/auth-controller","../controllers/index-controller","../controllers/projects-controller","../controllers/project-controller","../controllers/home-controller","../directives/materialize/accordion-directive","../directives/materialize/carousel-directive","../directives/materialize/checkbox-directive","../directives/materialize/date-picker-directive","../directives/materialize/dropdown-directive","../directives/materialize/floating-action-button-directive","../directives/materialize/materialbox-directive","../directives/materialize/modal-directive","../directives/materialize/pushpin-directive","../directives/materialize/radio-directive","../directives/materialize/scrollspy-directive","../directives/materialize/select-directive","../directives/materialize/sidenav-directive","../directives/materialize/slider-directive","../directives/materialize/switch-directive","../directives/materialize/tabs-directive","../directives/materialize/time-picker-directive","../directives/materialize/tooltip-directive","../directives/materialize/range-directive","../directives/materialize/nouislider-directive","../directives/materialize/autocomplete-directive","../directives/file-uploader-directive","../directives/image-uploader-directive","../directives/input-format-directive","../directives/json-text-directive","../directives/loading-directive","../directives/popover-directive","../directives/prompt-modal-directive","../directives/qrcode-popover-directive","../directives/qrcode-directive","../directives/scroll-if-directive","../directives/markdown-modal-directive","../filters/enum-definition-filter","../filters/pretty-number-filter","../filters/duration-filter","../filters/filter-or-filter","../filters/order-by-property-filter","../filters/trust-url-filter"],function(t,e,n,r,o,i,s,u,a,c,l,h,p,f,d,m,v,y,_,g,b,w,x,C,S,E,k,D,M,O,P,T,A,N,j,$,q,I,F,B,L,R,U,z,H,Y,V,W,G,K,J,Q,X,Z,tt,et){var nt,rt;return rt=t.module("clc.materialize",[]),rt.service("httpService",["$rootScope","$http",e.HttpService]),rt.service("resourceService",["$resource",n.ResourceModelService]),rt.service("uploadService",["$rootScope","$http",r.UploadService]),rt.service("authService",["$rootScope","$location","$cookieStore","storage","httpService",o.AuthService]),rt.service("modelService",["$rootScope","$http",i.ModelService]),rt.service("modelManager",["$rootScope","$http",function(t,e){return new s.ModelManager(t,e,window.setting)}]),rt.service("modelEngine",["$rootScope","modelManager","storage",function(t,e,n){return new u.ModelEngine(t,e,n)}]),rt.service("liveService",["$rootScope","socket",a.LiveService]),rt.service("reportingService",["$rootScope","$http",function(t,e){return new c.ReportingService(t,e,window.setting.urls)}]),rt.service("homeService",["$rootScope","httpService",l.HomeService]),nt=function(t,e,n,r,o){return rt.controller(t,["$scope","$rootScope","$routeParams","$location","$window","$timeout","modelManager","modelEngine","uploadService",function(t,i,s,u,a,c,l,h,p){var f;return f={type:n,key:r,title:o,uploadUrl:setting.urls.uploadUrl,fileUrl:setting.urls.fileUrl,url:setting.urls[n]},new e(t,i,s,u,a,c,l,h,p,f)}])},rt.controller("MainController",["$scope","$rootScope","$routeParams","$location","$window","$translate","storage","authService",h.MainController]),rt.controller("LiveMainController",["$scope","$rootScope","$routeParams","$location","$window","$translate","storage","authService","liveService",p.LiveMainController]),rt.controller("AuthController",["$scope","$rootScope","$routeParams","$location","$window","authService",f.AuthController]),rt.controller("HomeController",["$scope","$rootScope","$routeParams","$location","$window","$timeout","homeService",y.HomeController]),nt("IndexController",d.IndexController,"projects",["user","project"],"主页"),nt("ProjectsController",m.ProjectsController,"projects",["user","project"],"项目"),nt("ProjectController",v.ProjectController,"project",["user","project"],"项目"),rt.directive("mdAccordion",["$timeout",_.AccordionDirective]),rt.directive("mdCarousel",["$timeout",g.CarouselDirective]),rt.directive("mdCheckbox",["$timeout",b.CheckboxDirective]),rt.directive("mdDatePicker",["$timeout",w.DatePickerDirective]),rt.directive("mdDropdown",["$timeout",x.DropdownDirective]),rt.directive("mdFloatingActionButton",["$timeout",C.FloatingActionButtonDirective]),rt.directive("mdMaterialBox",["$timeout",S.MaterialBoxDirective]),rt.directive("mdModal",["$timeout",E.ModalDirective]),rt.directive("mdPushPin",["$timeout",k.PushPinDirective]),rt.directive("mdRadio",["$timeout",D.RadioDirective]),rt.directive("mdScrollSpy",["$timeout",M.ScrollSpyDirective]),rt.directive("mdSelect",["$timeout",O.SelectDirective]),rt.directive("mdSideNav",["$timeout",P.SideNavDirective]),rt.directive("mdSlider",["$timeout",T.SliderDirective]),rt.directive("mdSwitch",["$timeout",A.SwitchDirective]),rt.directive("mdTabs",["$timeout",N.TabsDirective]),rt.directive("mdTimePicker",["$timeout",j.TimePickerDirective]),rt.directive("mdTooltip",["$timeout",$.TooltipDirective]),rt.directive("mdRange",["$timeout",q.RangeDirective]),rt.directive("mdNouiSliderDirective",["$timeout",I.NouiSliderDirective]),rt.directive("mdAutocomplete",["$timeout",F.AutocompleteDirective]),rt.directive("fileUploader",["$timeout","uploadService",B.FileUploaderDirective]),rt.directive("imageUploader",["$timeout","uploadService",L.ImageUploaderDirective]),rt.directive("inputFormat",["$timeout","$window",R.InputFormatDirective]),rt.directive("jsonText",["$timeout",U.JsonTextDirective]),rt.directive("loadingSpinner",["$timeout",z.LoadingDirective]),rt.directive("qrcodePopover",["$timeout","$compile","$location",V.QrcodePopoverDirective]),rt.directive("qrcode",["$timeout","$compile","$location",W.QrcodeDirective]),rt.directive("promptModal",["$timeout","$window",Y.PromptModalDirective]),rt.directive("popover",["$timeout","$compile",H.PopoverDirective]),rt.directive("scrollIf",["$timeout","$compile",G.ScrollIfDirective]),rt.directive("markdownModal",["$timeout",K.MarkdownModalDirective]),rt.filter("enumDefinition",[J.EnumDefinitionFilter]),rt.filter("prettyNumber",[Q.PrettyNumberFilter]),rt.factory("$localeDurations",[X.LocaleDurationsFactory]),rt.filter("duration",["$locale","$localeDurations",X.DurationFilter]),rt.filter("filterOr",[Z.FilterOrFilter]),rt.filter("orderByProperty",[tt.OrderByPropertyFilter]),rt.filter("trustUrl",["$sce",et.TrustUrlFilter]),{"clc.materialize":rt}}),define("clc.materialize",["clc.foundation.angular/modules/clc.materialize.module"],function(t){return t});